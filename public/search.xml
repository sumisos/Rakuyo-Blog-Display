<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>「游戏」有手就行的《饥荒联机版》专用服务器搭建及配置教程</title>
      <link href="/game/DST-Server-Deploy/"/>
      <url>/game/DST-Server-Deploy/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul><li>基友突然想玩饥荒，就搞了一个，有确说实，真的不难</li><li>不需要编程知识，要一点运维基础（但动手能力稍微强一点，自给自足没有任何问题，不用怕）  </li><li>就算搜索筛选能力不太好，我在写本文之前已经基本把坑都趟过一遍了，照着本教程一步一步做就行  </li><li>如果照着做完依然不行……我只能说缘分没到，奉劝居士不必强求  </li></ul><a id="more"></a><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><h3 id="时效性"><a href="#时效性" class="headerlink" title="时效性"></a>时效性</h3><p>po亲手测试以及本文写就时间为2020年4月8日，根据时间流逝也许会逐渐与实际情况产生出入，请酌情食用。<br><del>用人话说，我写完没打算更了</del></p><h3 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h3><p>本文实测环境为阿里云ECS，CentOS 7.7。<del>阿里云centos基本都是这个，祖传镜像</del><br>P.S. <code>lsb_release -a</code>可查看系统版本  </p><h3 id="能用树莓派跑吗"><a href="#能用树莓派跑吗" class="headerlink" title="能用树莓派跑吗"></a>能用树莓派跑吗</h3><p>和所有rpi玩家一样，我第一反应就是树莓派。<br>然而如果你和我一样没有选择官方Raspbian而是刷了第三方64位Debian的话，你应该也会遇到和我一样的问题：第一步apt安装依赖包的时候就尬住了，找不到/版本不匹配。<br>但理论上应该是可行的，打个比方，提示 <code>E: Unable to locate package lib32gcc1</code> 的「<a href="https://packages.debian.org/zh-cn/sid/libgcc1" target="_blank" rel="noopener">libgcc1 其实 1:10 版本支持 arm64架构</a>」，解决方案可参考「<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#3-162%E4%BD%BF%E7%94%A8apt%E5%91%BD%E4%BB%A4%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%8C%85%E6%97%B6%E7%89%88%E6%9C%AC%E4%B8%8D%E5%8C%B9%E9%85%8D" target="_blank" rel="noopener">Debian Pi Aarch64 常见问题</a>」。<br>由于我的树莓派已经算半个生产环境了，所以没继续折腾，有兴趣的小伙伴可以深入研究一下。</p><h2 id="完整流程"><a href="#完整流程" class="headerlink" title="完整流程"></a>完整流程</h2><p>如果真的有零基础的小伙伴看的话，科普一下，Linux是信奉「less is more」的。<br><strong>没有消息就是好消息。</strong><br>更通俗点说，如果你在Linux的输入没有任何回显信息，不要慌，这说明你的操作完全成功了；<br>如果有回显，说明上一步操作多少有点问题。<br>（当然也不是绝对，一些长时间运行/状态多变的程序肯定会持续输出log，不必硬杠。）<br>OK的话，Let’s GO。  </p><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><p>64位CentOS：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum -y install glibc.i686 libstdc++.i686 libcurl.i686</span><br></pre></td></tr></table></figure><p>64位Debian使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install libstdc++6:i386 libgcc1:i386 libcurl4-gnutls-dev:i386 lib32gcc1</span><br></pre></td></tr></table></figure><p>除了安装依赖之外，后面的命令应该是一样的，但<strong>并未在Debian实际测试过</strong>，如果使用Debian出现问题请参考本教程自行解决。</p><h3 id="安装-CMD-版-Steam"><a href="#安装-CMD-版-Steam" class="headerlink" title="安装 CMD 版 Steam"></a>安装 CMD 版 Steam</h3><p>开服并不需要Steam账号，但下载和更新DST服务端需要Steam，SteamCMD就是命令行版Steam客户端，所以要先装这个。</p><p>另外如果直接使用root用户运行服务端可能会导致严重的安全隐患，我们新建一个用户专门来负责这方面。<br>名字当然可以随便取，（因为还跑了l4d2）我就取steam了，如果你使用了另外的名字，之后请注意替换对应的命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ useradd -m steam <span class="comment"># 新建一个名为steam的用户</span></span><br><span class="line">$ su - steam <span class="comment"># 切换到steam用户</span></span><br></pre></td></tr></table></figure><p>新建一个文件夹专门放SteamCMD：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ~/steamcmd <span class="comment"># 创建目录</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/steamcmd <span class="comment"># 进入该目录</span></span><br></pre></td></tr></table></figure><p>下载并解压SteamCMD：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz <span class="comment"># 下载压缩包</span></span><br><span class="line">$ tar -xvzf steamcmd_linux.tar.gz <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure><p>初次运行SteamCMD：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./steamcmd.sh</span><br></pre></td></tr></table></figure><h3 id="安装DST（饥荒联机版）服务端"><a href="#安装DST（饥荒联机版）服务端" class="headerlink" title="安装DST（饥荒联机版）服务端"></a>安装DST（饥荒联机版）服务端</h3><p>首先匿名登录 SteamCMD：（用真实账号登录没有必要也没有意义）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Steam&gt; login anonymous</span><br></pre></td></tr></table></figure><p>强制指定安装路径：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Steam&gt; force_install_dir ../</span><br></pre></td></tr></table></figure><p>下载/更新饥荒联机版服务端：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Steam&gt; app_update 343050 validate</span><br></pre></td></tr></table></figure><p>最后提示<code>Success! App &#39;343050&#39; fully installed.</code>即为安装完成，然后退出SteamCMD：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Steam&gt; quit</span><br></pre></td></tr></table></figure><p>现在硬性条件就算准备完成了，理论上已经可以运行饥荒服务端了，是不是很简单？<br>但如果要把饥荒服务端自定义成想要的样子，还有一部分重要内容。</p><h3 id="服务端架构简介"><a href="#服务端架构简介" class="headerlink" title="服务端架构简介"></a>服务端架构简介</h3><p>首先科普一下基础，饥荒联机版（Don’t Starve Together，简称DST）服务端是集群架构。<br>典型的有三种设计，我尽量浅显的介绍一下，有一个形象的认知之后会方便很多。<br>大概了解运行模式之后对之后的每个步骤做了什么、为什么要这样做，心里比较有数。</p><p>首先给完全零基础的小伙伴介绍一下术语：（在<strong>本文</strong>的<strong>大部分语境</strong>中）</p><ul><li>服务器（server）：一般指实际存在的物理机；打个比方，假如把搭DST服务端当成运行「一个应用」，服务器相当于你的电脑</li><li>集群（cluster）：也就是DST所谓的「专用服务器」；用上面的比喻来说，集群相当于「这个应用」</li><li>分片服务端（shard）：在物理机服务器上运行的、真正干活的程序；相当于「这个应用」的一个个子进程</li></ul><blockquote><p>如果是租用的服务器（VPS），实际上基本都是虚拟机，但使用起来可以<strong>视为</strong>物理机，具体不再继续展开</p></blockquote><p><img src="https://i.loli.net/2020/04/09/APCvgYbsUqf1nBI.png" alt="举例"><br>区别只在于「饥荒服务器」提供的是「在线游戏」服务，「浏览器」提供的是「网上冲浪」服务。</p><blockquote><p>以下图片来自「<a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1616647350" target="_blank" rel="noopener">Dedicated Server配置项和命令行参数详解</a>」，感谢大佬形象直观的绘图。</p></blockquote><h4 id="单服务器单集群"><a href="#单服务器单集群" class="headerlink" title="单服务器单集群"></a>单服务器单集群</h4><p><img src="https://i.loli.net/2020/04/09/oibBavGk2sIZ9cf.jpg" alt="单服务器单集群架构"><br>最简单最好理解的一种架构。  </p><p>在一台服务器（物理机）上跑整个集群。<br>一个集群里有两个服务端（有时候也可以直接称之为服务器，因为饥荒游戏客户端不会在乎这台物理机服务器上提供了别的任何——它根本不需要——的服务，所以对饥荒游戏客户端来说它就相当于整个服务器）。<br>这两个分片服务端（或者说抽象意义上的服务器），分别是主服务器（Master，地面服务器，或者说地上服务器）和从服务器（Slave，饥荒这个使用场景中即地穴服务器，或者说洞穴服务器 Caves）。  </p><p>但这种架构有一个问题，如果服务器（物理机）机能有限，与主世界实时同步运行的地穴服务器也许会吃掉所剩不多的服务器（物理机）资源，导致游玩体验卡顿。  </p><blockquote><p>一种很委屈的妥协方案是直接不开地穴服务器。（金子靠猪王，石头靠流星，远古靠缘分……）  </p></blockquote><p>那么除了换成性能更好（可能价格也贵得多）的服务器（物理机）之外，有没有别的解决方案呢？</p><h4 id="多服务器单集群"><a href="#多服务器单集群" class="headerlink" title="多服务器单集群"></a>多服务器单集群</h4><p><img src="https://i.loli.net/2020/04/09/WxPgJ4ZqSh1zwjA.jpg" alt="多服务器单集群"><br>有，性价比最高也最广为人知的就是分布式（极简Version）。<br>使用两台服务器（物理机），分别运行主服务器和地穴服务器，共同分担一个集群的任务。<br>一台服务器专门跑地面，另一台专门跑地穴，那么两台服务器（物理机）的配置都不需要太高。</p><p>但假如你有一台性能强大的服务器（物理机）专门运行饥荒服务端，根本不需要多台服务器（物理机）。<br>跑个20人饥荒服务器而已，不费吹灰之力，再跑几个都没问题。<br>那么有没有可以榨干机能的方案？</p><h4 id="单服务器多集群"><a href="#单服务器多集群" class="headerlink" title="单服务器多集群"></a>单服务器多集群</h4><p><img src="https://i.loli.net/2020/04/09/LX9KVNPoHlDgbmI.jpg" alt="单服务器多集群"><br>有，如果服务器（物理机）方面没有问题，可以在同一台服务器（物理机）上同时运行数个集群，并且多个集群之间可以联通。<br>一些很专业的服务器（饥荒服务端）可以做到主服务器只用来接待，通过权限验证和玩家选择之后再把玩家送进对应的专属服务器。<br>游玩体验类似Minecraft的多世界，成功登录主服务器后可以分发到各个不同主题的功能性服务器，比如原版纯生存世界、RPG世界、PVP竞技世界；<br>或者分周目：虽然现在已经三周目了，但如果你想，随时可以回到一周目/二周目继续游玩。  </p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><strong>「这一部分是不是太多不必要的废话了？我就开个服而已，能跑就行，有必要了解一大堆运行原理吗？」</strong>  </p><p>如果你顺利部署好了服务器并成功游玩，恭喜你，enjoy it。你说得对，叉掉这个页面吧。  </p><p>如果你部署过程中不太顺利，不幸遇到了莫名其妙的问题，又不知道从何处下手排查，面对网上一大堆乍一看什么都有但其实八成内容雷同的「<strong>教程</strong>」一筹莫展的时候，是绝对不会嫌基础资料多的。</p><p>总而言之，假如以上内容你都看完了，现在应该对饥荒服务端的运行机制有一定了解了，下面正式开始编辑配置。</p><blockquote><p>下面两节内容大部分参考自「<a href="https://forums.kleientertainment.com/forums/topic/64552-dedicated-server-settings-guide/" target="_blank" rel="noopener">Dedicated Server Settings Guide</a>」</p></blockquote><h3 id="cluster-ini-集群配置"><a href="#cluster-ini-集群配置" class="headerlink" title="cluster.ini 集群配置"></a>cluster.ini 集群配置</h3><p>一口吃不成胖子，如果你上来就想一气呵成直接把双服务器同时搞定——<br>意味着可能会出问题的几率翻番，debug的成本也要提高一倍。<br>反正我是不建议赌这个几率，建议先从「单服务器单集群」这种方案开始测试。  </p><p>cluster.ini标准模板：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[GAMEPLAY]</span><br><span class="line">game_mode &#x3D; endless</span><br><span class="line">max_players &#x3D; 6</span><br><span class="line">pvp &#x3D; false</span><br><span class="line">pause_when_empty &#x3D; true</span><br><span class="line"></span><br><span class="line">[NETWORK]</span><br><span class="line">cluster_name &#x3D; 服务器名字</span><br><span class="line">cluster_description &#x3D; 服务器描述信息</span><br><span class="line">cluster_password &#x3D; 服务器密码</span><br><span class="line">cluster_intention &#x3D; cooperative</span><br><span class="line">cluster_language &#x3D; zh</span><br><span class="line"></span><br><span class="line">[MISC]</span><br><span class="line">console_enabled &#x3D; true</span><br><span class="line"></span><br><span class="line">[SHARD]</span><br><span class="line">shard_enabled &#x3D; true</span><br><span class="line">bind_ip &#x3D; 绑定ip</span><br><span class="line">master_ip &#x3D; 主服务器的ip</span><br><span class="line">master_port &#x3D; 主服务器的通信端口</span><br><span class="line">cluster_key &#x3D; 集群内部通信密码</span><br></pre></td></tr></table></figure><p>下面分别解释所有可设置项。<br>注意：未必每一项都要设置，如果没有在 cluster.ini 中特别设置，则默认此项使用「默认值」。</p><h4 id="MISC-杂项"><a href="#MISC-杂项" class="headerlink" title="MISC 杂项"></a><code>MISC</code> 杂项</h4><h5 id="max-snapshots-最大快照数量"><a href="#max-snapshots-最大快照数量" class="headerlink" title="max_snapshots 最大快照数量"></a><code>max_snapshots</code> 最大快照数量</h5><p>默认值：<code>6</code><br>默认情况下每天日出的时候会自动保存一个快照，这项设置是设置总共允许保留几个快照。</p><p>可以在游戏中按「Tab」键打开记分板，然后点击「服务器操作」，再选择「回滚」回到上一个快照。<br><img src="https://i.loli.net/2020/04/09/gDv6noF7drPxVfq.png" alt="服务器操作.png"><br><img src="https://i.loli.net/2020/04/09/mLPNolpSvkjE457.png" alt="服务器操作列表.png"></p><p>如果拥有管理员权限，也可以在「服务器的命令行界面」或者在游戏中打开「控制台」并用Ctrl键切换到远程控制台；<br>并输入<code>c_rollback(3)</code>回到三个快照之前。</p><blockquote><p>由于一般情况下是每天日出时自动保存快照，回滚三个快照版本一般意味着回到前天日出时。<br>（1-今天日出时、2-昨天日出时、3-前天日出时）<br>但你也可以使用<code>c_save()</code>手动将当前状态保存为快照，那么手动保存的快照也会被计入记录。</p></blockquote><h5 id="console-enabled-最大快照数量"><a href="#console-enabled-最大快照数量" class="headerlink" title="console_enabled 最大快照数量"></a><code>console_enabled</code> 最大快照数量</h5><p>默认值：<code>true</code><br>是否允许在「服务器的命令行界面」或者在游戏中打开「控制台」输入命令。</p><h4 id="SHARD-分片"><a href="#SHARD-分片" class="headerlink" title="SHARD 分片"></a><code>SHARD</code> 分片</h4><h5 id="shard-enabled-是否启用分片架构"><a href="#shard-enabled-是否启用分片架构" class="headerlink" title="shard_enabled 是否启用分片架构"></a><code>shard_enabled</code> 是否启用分片架构</h5><p>默认值：<code>false</code><br>前面一节已经解释过什么是分片架构、分片架构如何运行了。</p><p>简单来说就是如果要启用多层服务器（主服务器+地穴服务器=2），这个选项必须设置为<code>true</code>。<br>如果不开地穴服务器，只开主服务器（地面服务器）就不用管。</p><h5 id="bind-ip-绑定监听IP"><a href="#bind-ip-绑定监听IP" class="headerlink" title="bind_ip 绑定监听IP"></a><code>bind_ip</code> 绑定监听IP</h5><p><strong>可以被server.ini覆盖</strong></p><blockquote><p>什么叫覆盖？尽管cluster.ini已经设置过了<br>但如果server.ini中有不同的设置，以server.ini为准<br>下同</p></blockquote><p>默认值：<code>127.0.0.1</code><br>前提：<code>shard_enabled</code> = <code>true</code> 而且 <code>is_master</code> = <code>true</code> 此项设置才会生效<br>「主服务器」监听的「从服务器」连接过来的IP，默认的<code>127.0.0.1</code>是本地的意思，假如地穴服务器和主服务器在同一台服务器（物理机）上，不用管这个选项。<br>如果是「多服务器单集群」架构，即地穴服务器在另一台服务器上，需要修改为<code>0.0.0.0</code>（监听所有IP，确切的说是ipv4）。<br>理论上专门限定「从服务器」的IP也行（但没有必要，如果注重安全可以设置<code>cluster_key</code>）。</p><h5 id="master-ip-主服务器IP"><a href="#master-ip-主服务器IP" class="headerlink" title="master_ip 主服务器IP"></a><code>master_ip</code> 主服务器IP</h5><p><strong>可以被server.ini覆盖</strong><br>默认值：<code>none</code><br>前提：<code>shard_enabled</code> = <code>true</code> 而且 <code>is_master</code> = <code>false</code><br>（注意<code>is_master</code>需要为false，也就是说上一个选项只在Master生效，这个选项只在Caves生效）<br>主服务器和地穴服务器在同一台物理机服务器上填<code>127.0.0.1</code>，否则填主服务器的IP。</p><p>顺便提一下，如果主服务器和地穴服务器在同一个局域网，填内网IP即可。<br>比如家里有服务器，填路由器分发的内网IP；或者是某某云<strong>同一个子网内</strong>的两台VPS，填内网IP即可。<br>（使用内网通信可以提高一定的通信速度和安全性。）<br>如果不是，则必须填主服务器的公网IP。<br><strong>如果实在弄不清楚，也别整那些花里胡哨的，直接填外网IP就完事了。</strong></p><h5 id="master-port-主服务器集群内部通信端口"><a href="#master-port-主服务器集群内部通信端口" class="headerlink" title="master_port 主服务器集群内部通信端口"></a><code>master_port</code> 主服务器集群内部通信端口</h5><p><strong>可以被server.ini覆盖</strong><br>默认值: <code>10888</code><br>主服务器会持续监听这个<strong>UDP</strong>端口，所有尚未连接到主服务器的分片「从服务器」都会尝试用这个端口连接到主服务器。</p><p>突然不知道怎么形容了……用人话说：这个端口是主服务器和其他分片服务器之间通信的端口。<br>这意味什么？</p><ol><li>「饥荒游戏客户端」主要的通信数据不是走的这个端口，走的是Master/Caves的<code>server.ini</code>里设置的<code>server_port</code>，<strong>所以<code>cluster.ini</code>的<code>master_port</code>和<code>server.ini</code>的<code>server_port</code>不能是同一个端口</strong>。</li><li>不管有几个分片服务器，主服务器、地穴服务器、天上服务器、天下服务器、天上天下天地无双服务器，<strong>所有分片服务器的<code>cluster.ini</code>中的<code>master_port</code>都是同一个端口</strong>。</li></ol><h5 id="cluster-key-集群内部通信密码"><a href="#cluster-key-集群内部通信密码" class="headerlink" title="cluster_key 集群内部通信密码"></a><code>cluster_key</code> 集群内部通信密码</h5><p><strong>可以被server.ini覆盖</strong><br>默认值: <code>none</code><br>前提：<code>shard_enabled</code> = <code>true</code><br>如果设置了，「从服务器」试图连接到「主服务器」时会验证这个密码。<br>别的不用多说了吧，比如要配置要统一什么的，都不是同一个密码还连个P。</p><p>这个有什么用，想象一下，你服务器的公网IP和端口都是公开的（不然也Steam和Klei也连不上你的服务器），假如有一个人知道了你的IP和端口，<strong>如果没有设置<code>cluster_key</code></strong>，他完全可以搞一个服务器假装是你的「从服务器」来连你。<br>（当然，如果他想成功连上必须保证他的<code>cluster.ini</code>和你的主服务器的能对得上，其实这本身就相当于一道密码了。）<br>另外连上了能做什么，我也不太清楚，我就这么一提，客观上有这么一种可能性。<br>其实也没什么在意的必要，你的服务器又不是日流水几千上万，谁有这么闲摸过来找你搞事。<br>（L4D2就未必了，我开个小服还设置了Steam组成员限定，有没有必要D啊？动了谁的蛋糕？还是脚本小子学了新活拿我练手？）</p><h4 id="STEAM-Steam-相关"><a href="#STEAM-Steam-相关" class="headerlink" title="STEAM Steam 相关"></a><code>STEAM</code> Steam 相关</h4><h5 id="steam-group-only-Steam-组内成员限定"><a href="#steam-group-only-Steam-组内成员限定" class="headerlink" title="steam_group_only Steam 组内成员限定"></a><code>steam_group_only</code> Steam 组内成员限定</h5><p>默认值: <code>false</code><br>如果设置为true，则只有<code>steam_group_id</code>设置的 Steam 组内部的成员可以进入服务器。</p><h5 id="steam-group-id-Steam-组-ID"><a href="#steam-group-id-Steam-组-ID" class="headerlink" title="steam_group_id Steam 组 ID"></a><code>steam_group_id</code> Steam 组 ID</h5><p>默认值: <code>0</code><br>服务器绑定的Steam用户组ID。</p><h5 id="steam-group-admins-Steam-组管理员同步"><a href="#steam-group-admins-Steam-组管理员同步" class="headerlink" title="steam_group_admins Steam 组管理员同步"></a><code>steam_group_admins</code> Steam 组管理员同步</h5><p>默认值: <code>false</code><br>如果设置为true，则<code>steam_group_id</code>设置的 Steam 组的「组管理员」自动成为「本服务器的管理员」。</p><h4 id="NETWORK-网络"><a href="#NETWORK-网络" class="headerlink" title="NETWORK 网络"></a><code>NETWORK</code> 网络</h4><h5 id="offline-cluster-集群离线"><a href="#offline-cluster-集群离线" class="headerlink" title="offline_cluster 集群离线"></a><code>offline_cluster</code> 集群离线</h5><p>默认值: <code>false</code><br>如果设置为true，则服务器不会在Steam公共服务器列表显示，所有有关Steam的功能失效，且只有本地用户能够连接。</p><h5 id="tick-rate-Tick-速率"><a href="#tick-rate-Tick-速率" class="headerlink" title="tick_rate Tick 速率"></a><code>tick_rate</code> Tick 速率</h5><p>默认值: <code>15</code><br>服务器刷新频率，需要为60的除数，即15、20、30。</p><p>简单科普一下，任何游戏都会涉及数值计算，怎么算，把「玩家与系统之间的交互状态」量化为数据然后算。<br>最直观的，攻速属性：系统告诉你，你攻速是多少；它不可能随便说个数字，然后真实攻速搞成随机（除了游戏机制本身就是设计为随机浮动的攻速），它一定有一个标准，这个标准就是Tick。<br>游戏内部是有一个时钟来计算各种关于时间的数值的，一般可以分为运算帧和显示帧。</p><p>显示帧根据你物理机的配置不同也许有各种浮动，但一定是限定在一个范围内的。<br>你配置顶天了，你拿超算玩的游戏，也不可能比别人提前看一秒的游戏画面，即使人家机器总价2k，随便捡的二手亮机卡。<br>玩过梦幻西游类似网游的都知道（好像暴露年龄了），特别卡的时候游戏画面会卡住，但你能说连服务器计算数值都卡住了吗。<br>等不卡了，画面疯狂快进到当前时刻，这就是显示归显示，数值计算归数值计算。</p><p>运算帧同理，游戏服务器肯定有一个标准来计算攻击间隔啦、技能CD啦、buff时间啦。<br>主打竞技性的射击游戏对这个值是最敏感的，比如要算「射速计算+距离计算+运动速度计算=横向提前量计算=命中判定」，甚至更细的「+重力加速度=纵向提前量计算=命中判定」，另外还有用「开枪后准心高度随机上扬」来表现的后坐力等等一大堆复杂机制，全都要吃运算帧。</p><p>最典型的FPS，CSGO一般的刷新率是64 Tick，比赛服128 Tick。<br>相对来说多人开放世界沙盒由于涉及的计算属性繁杂，而且也不太吃运算细节，而是整个沙盒世界综合起来的总体反馈。<br>你玩饥荒会在意攻速具体到小数点后两位是多少吗，还不是打二走一就完事了。<br>FPS就不得不在意，决赛生死局的一发神经枪从128 Tick 换成64 Tick 说不定真的就射失了；射击游戏要走竞技这条路，如果这方面做得不好就没人玩。</p><p>假如玩个Minecraft，本来出生区块就是255空岛的高空流水，地下全是高频红石自动农场，你还要逼服务器抽出资源来算你掠夺3补刀刷怪塔掉的空血怪是不是晚死了0.082秒，那也太过分了。<br>我记得之前玩的MC服，还是1.14.4那个卡比版本，同时在线30+，提倡每个区块6实体以下人走红石停，卡起来TPS不到10；人少一点10+可以到15 TPS（已经算流畅了，用颜色表示就是绿色），更少甚至可以20。</p><p>我说这么多就是为了表示，<strong>饥荒服务器15 tick的默认值一般不用改，假如能够一直稳定15帧，体验就已经极流畅了</strong>。<br>调高TPS意味着服务器运算量提高乃至翻倍，结果给你带来的游戏体验未必会更流畅，放过服务器吧。<br>我不想爽玩30 TPS的服吗？带不动啊。不说别的，6人联机能够稳定15真的够了。</p><blockquote><p>P.S. 大型网游，尤其是3D的MMORPG，百人同屏特效乱飞那种也会很低，比如剑网3的运算帧就只有1秒16帧。<br>攻速、技能读条时间、技能CD时间、<del>buff持续时间</del> 好像没有这个、dot/hot跳数全是在此之上计算的。</p></blockquote><h5 id="whitelist-slots-VIP-席位数量"><a href="#whitelist-slots-VIP-席位数量" class="headerlink" title="whitelist_slots VIP 席位数量"></a><code>whitelist_slots</code> VIP 席位数量</h5><p>默认值: <code>0</code><br>直接打比方吧，假如现在<code>max_players</code>=15，<code>whitelist_slots</code>=5，那么当有10个路人玩家加进来之后，第11个路人玩家就无法再加入服务器了，只有白名单里的玩家可以继续加入服务器。<br>如果<code>max_players</code>=10，<code>whitelist_slots</code>=10，那么只有白名单内的玩家可以加入服务器。</p><p>白名单用<code>whitelist.txt</code>设置，里面写的是「Klei 的User ID（<code>KU_</code>开头那个）」或者「Steam 64位 ID」，每行一个，<code>whitelist.txt</code>文件和<code>cluster.ini</code>文件放在同一个目录下。</p><h5 id="cluster-password-集群外部连接密码"><a href="#cluster-password-集群外部连接密码" class="headerlink" title="cluster_password 集群外部连接密码"></a><code>cluster_password</code> 集群外部连接密码</h5><p>默认值: <code>none</code><br>设置之后必须玩家使用这个密码才能加入服务器，不需要密码留空即可。</p><h5 id="cluster-name-集群外部名称"><a href="#cluster-name-集群外部名称" class="headerlink" title="cluster_name 集群外部名称"></a><code>cluster_name</code> 集群外部名称</h5><p>显示在游戏里服务器列表里的名字。</p><h5 id="cluster-description-集群外部描述"><a href="#cluster-description-集群外部描述" class="headerlink" title="cluster_description 集群外部描述"></a><code>cluster_description</code> 集群外部描述</h5><p>默认值: <code>empty</code><br>在游戏里点击某个服务器之后，显示在右边的「服务器详细信息」里的内容。</p><h5 id="lan-only-cluster-集群只对lan可用"><a href="#lan-only-cluster-集群只对lan可用" class="headerlink" title="lan_only_cluster 集群只对lan可用"></a><code>lan_only_cluster</code> 集群只对lan可用</h5><p>默认值: <code>false</code><br>如果设置为true，则服务器只允许同一个局域网下的玩家进入。</p><p>用Windows开服，并且只想让室友进服的玩家也许会用到这个设置项？<br>买VPS的用户无视即可，你总不能接进某某云内网玩游戏吧。</p><h5 id="cluster-intention-集群目标"><a href="#cluster-intention-集群目标" class="headerlink" title="cluster_intention 集群目标"></a><code>cluster_intention</code> 集群目标</h5><p>显示服务器的游戏风格是什么：</p><ul><li><strong>social</strong> 社交</li><li><strong>cooperative</strong> 合作</li><li><strong>competitive</strong> 竞争</li><li><strong>madness</strong> 疯狂</li></ul><h5 id="autosaver-enabled-是否启用自动快照"><a href="#autosaver-enabled-是否启用自动快照" class="headerlink" title="autosaver_enabled 是否启用自动快照"></a><code>autosaver_enabled</code> 是否启用自动快照</h5><p>默认值: <code>true</code><br>如果设置为false，则服务器不再于每天日出时保存快照。</p><p>当然，当服务器关闭、或者手动运行<code>c_save()</code>时仍然会保存。</p><h4 id="GAMEPLAY-游玩相关"><a href="#GAMEPLAY-游玩相关" class="headerlink" title="GAMEPLAY 游玩相关"></a>GAMEPLAY 游玩相关</h4><h5 id="max-players-最大玩家数量"><a href="#max-players-最大玩家数量" class="headerlink" title="max_players 最大玩家数量"></a><code>max_players</code> 最大玩家数量</h5><p>默认值: <code>16</code><br>允许<strong>同时</strong>连接到此服务器的玩家的总数。</p><h5 id="pvp-是否允许PVP"><a href="#pvp-是否允许PVP" class="headerlink" title="pvp 是否允许PVP"></a><code>pvp</code> 是否允许PVP</h5><p>默认值: <code>false</code><br>如果设置为true，则服务器允许玩家之间互相伤害。</p><h5 id="game-mode-游戏模式"><a href="#game-mode-游戏模式" class="headerlink" title="game_mode 游戏模式"></a><code>game_mode</code> 游戏模式</h5><p>默认值: <code>survival</code></p><ul><li><strong>survival</strong> 生存<br>新玩家出生在恶魔之门，死亡之后变成鬼魂，鬼魂会导致活着的玩家掉san，所有人都死光后整个世界重置</li><li><strong>wilderness</strong> 荒野<br>新玩家出生在随机位置，死亡之后不会变成鬼魂，直接reroll角色重来</li><li><strong>endless</strong> 无穷无尽<br>新玩家出生在恶魔之门，死亡之后变成鬼魂，鬼魂摸恶魔之门可以直接复活，即使所有人死光世界也不会重置</li></ul><h5 id="pause-when-empty-是否启用闲置时暂停"><a href="#pause-when-empty-是否启用闲置时暂停" class="headerlink" title="pause_when_empty 是否启用闲置时暂停"></a><code>pause_when_empty</code> 是否启用闲置时暂停</h5><p>默认值: <code>false</code><br>如果设置为true，则服务器会在最后一个玩家退出后暂停整个世界。<strong>强烈建议开启</strong></p><h5 id="vote-enabled-是否启用投票机制"><a href="#vote-enabled-是否启用投票机制" class="headerlink" title="vote_enabled 是否启用投票机制"></a><code>vote_enabled</code> 是否启用投票机制</h5><p>默认值: <code>true</code><br>如果设置为false，则服务器禁用玩家投票功能。</p><h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><p>总之所有分片服务器的<code>cluster.ini</code>设置要一致，不能说主服务器无所谓<code>whitelist_slots</code>=0，但是地穴服务器要留一个VIP席位<code>whitelist_slots</code>=1，<strong>这样是不行的</strong>。<br>如果某个选项对你来说默认值就可以，可以忽略这一项配置，从而使用默认值。</p><h3 id="server-ini-分片服务端设置"><a href="#server-ini-分片服务端设置" class="headerlink" title="server.ini 分片服务端设置"></a>server.ini 分片服务端设置</h3><h4 id="SHARD-分片-1"><a href="#SHARD-分片-1" class="headerlink" title="SHARD 分片"></a><code>SHARD</code> 分片</h4><h5 id="is-master-是否为主服务器"><a href="#is-master-是否为主服务器" class="headerlink" title="is_master 是否为主服务器"></a><code>is_master</code> 是否为主服务器</h5><p>默认值: <code>none</code><br>前提：<code>shard_enabled</code> = <code>true</code><br>将一个分片服务端设置为主服务器，每个集群中只有一个主服务器。</p><p>主服务器（Master）的<code>server.ini</code>中此项设置为true，其他分片（Caves）的<code>server.ini</code>中此项设置为false。</p><h5 id="name-分片服务端名称"><a href="#name-分片服务端名称" class="headerlink" title="name 分片服务端名称"></a><code>name</code> 分片服务端名称</h5><p>默认值: <code>none</code><br>前提：<code>shard_enabled</code> = <code>true</code> 而且 <code>is_master</code> = <code>false</code><br>命令行终端输出日志时显示的分片服务端名称。</p><p>主服务器会忽略这项设置，强制为<code>SHDMASTER</code>。</p><h5 id="id-分片服务端-ID"><a href="#id-分片服务端-ID" class="headerlink" title="id 分片服务端 ID"></a><code>id</code> 分片服务端 ID</h5><p>默认值: <code>一串随机生成的数字</code><br>主服务器之外的分片服务端会自动生成这一项，用来标识在整个集群中的唯一性。</p><h4 id="STEAM-Steam-相关-1"><a href="#STEAM-Steam-相关-1" class="headerlink" title="STEAM Steam 相关"></a><code>STEAM</code> Steam 相关</h4><h5 id="authentication-port-鉴权端口"><a href="#authentication-port-鉴权端口" class="headerlink" title="authentication_port 鉴权端口"></a><code>authentication_port</code> 鉴权端口</h5><p>默认值: <code>8766</code><br>Steam使用的网络端口。<br>整个集群（即主服务器和地穴服务器同时）运行在同一台物理机服务器上时，不同的分片服务端<code>authentication_port</code>要使用不同的端口。</p><h5 id="master-server-port-作用不明我也不知道怎么翻译好"><a href="#master-server-port-作用不明我也不知道怎么翻译好" class="headerlink" title="master_server_port 作用不明我也不知道怎么翻译好"></a><code>master_server_port</code> 作用不明我也不知道怎么翻译好</h5><p>默认值: <code>27016</code><br>Steam使用的网络端口。</p><p>整个集群（即主服务器和地穴服务器同时）运行在同一台物理机服务器上时，不同的分片服务端<code>master_server_port</code>要使用不同的端口。</p><h4 id="NETWORK-网络-1"><a href="#NETWORK-网络-1" class="headerlink" title="NETWORK 网络"></a><code>NETWORK</code> 网络</h4><h5 id="server-port-服务器真正的服务端口"><a href="#server-port-服务器真正的服务端口" class="headerlink" title="server_port 服务器真正的服务端口"></a><code>server_port</code> 服务器真正的服务端口</h5><p>默认值: <code>10999</code><br>真正持续监听饥荒游戏客户端连接的<strong>UDP</strong>端口。</p><p><strong>有几个注意点</strong>：</p><ol><li>整个集群（即主服务器和地穴服务器同时）运行在同一台物理机服务器上时，不同的分片服务端<code>server_port</code>要使用不同的端口。</li><li>这个端口走的是 <strong>UDP</strong> 流量，开防火墙和安全组的时候别开成TCP协议了。</li><li>DST游戏<strong>客户端</strong>与<strong>服务端</strong>真正通信的时候访问的就是这个端口。<br>Steam 设置 Don’t Starve Together 启动选项直接连接服务器的时候用的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+connect 主服务器IP:本端口</span><br></pre></td></tr></table></figure>或者<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+connect 主服务器IP:本端口 +password &quot;集群密码&quot;</span><br></pre></td></tr></table></figure>的端口就是<strong>主服务器（Master）</strong>的<code>server.ini</code>里的<code>server_port</code>。<br>其他端口会显示服务器游戏版本与本地不一致 <del>我试过了</del>。</li><li>理论上说设置为任何端口（1-65535）都能跑，但是：  <ul><li>推荐设置为10998-11018之间，否则游戏内服务器列表界面可能会显示「延迟???」</li><li>不建议使用小于1024的端口，在某些操作系统上可能会出现权限问题</li></ul></li></ol><h2 id="其他常见问题"><a href="#其他常见问题" class="headerlink" title="其他常见问题"></a>其他常见问题</h2><h3 id="最低配置"><a href="#最低配置" class="headerlink" title="最低配置"></a>最低配置</h3><p>根据<a href="https://dontstarve.fandom.com/wiki/Guides/Don%E2%80%99t_Starve_Together_Dedicated_Servers#Requirements" target="_blank" rel="noopener">Wiki</a>有：</p><ul><li><strong>CPU</strong> 无所谓</li><li><strong>内存</strong> 每个玩家消耗 65MB</li><li><strong>上传带宽</strong> 每个玩家消耗 8KB/s</li></ul><h3 id="黑名单"><a href="#黑名单" class="headerlink" title="黑名单"></a>黑名单</h3><p>有白名单自然也有黑名单，和白名单的用法一样，<code>blocklist.txt</code>放在和<code>cluster.ini</code>同一个目录下。<br>在游戏中，管理员按「Tab」出记分板上面的有踢和封禁按钮，用封禁按钮ban掉的人也是加入的这个文件。</p><h3 id="管理员"><a href="#管理员" class="headerlink" title="管理员"></a>管理员</h3><p>和白名单/黑名单的用法一样，<code>adminlist.txt</code>放在和<code>cluster.ini</code>同一个目录下。<br>注意提供给<code>cluster_token.txt</code>的token其实是带了玩家的Klei ID 的，也就是说提供token的玩家自动默认为管理员。</p><h3 id="Mods"><a href="#Mods" class="headerlink" title="Mods"></a>Mods</h3><h4 id="下载-Mod"><a href="#下载-Mod" class="headerlink" title="下载 Mod"></a>下载 Mod</h4><p>首先要在饥荒服务端对应目录下载mod。<br>如果按照上面说的的攻略部署的服务器，应该是：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/dontstarvetogether_dedicated_server/mods</span><br><span class="line">$ vim dedicated_server_mods_setup.lua</span><br></pre></td></tr></table></figure><p>然后添加要使用的mod即可：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerModSetup(<span class="string">"Mod ID"</span>) <span class="comment">--这样是lua的注释 记不清哪个mod是什么可以这样标记一下</span></span><br></pre></td></tr></table></figure><p>推荐自己到创意工坊新建一个合集：（然后增减Mod就可以在创意工坊页面完成了，而不必每次手动编辑文件）</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServerModCollectionSetup(<span class="string">"合集ID"</span>)</span><br></pre></td></tr></table></figure><p>设置完后启动服务器只是会自动从Steam下载而已，如果要真正启用还要另外编辑。</p><h4 id="启用-Mod"><a href="#启用-Mod" class="headerlink" title="启用 Mod"></a>启用 Mod</h4><p>可以编辑（和<code>dedicated_server_mods_setup.lua</code>同级目录）的<code>modsettings.lua</code>：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ForceEnableMod(<span class="string">"强制启用的Mod"</span>)</span><br></pre></td></tr></table></figure><p>更推荐使用覆写配置的方式，打开 Master/Caves 目录下的 <code>modoverrides.lua</code>（没有就新建一个）：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  <span class="comment">--前提是已经下好了 ~/dontstarvetogether_dedicated_server/mods 目录下有对应的文件夹就是下好了</span></span><br><span class="line">  [<span class="string">"workshop-375859599"</span>] = &#123; enabled = <span class="literal">true</span> &#125;, <span class="comment">--血条提示</span></span><br><span class="line">  [<span class="string">"workshop-378160973"</span>] = &#123; enabled = <span class="literal">true</span> &#125;, <span class="comment">--GPS</span></span><br><span class="line">  [<span class="string">"workshop-666155465"</span>] = &#123; enabled = <span class="literal">true</span> &#125;  <span class="comment">--显示提示</span></span><br><span class="line">  <span class="comment">--注意最后一项没有逗号                       ↑ 没有逗号</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="配置-Mod"><a href="#配置-Mod" class="headerlink" title="配置 Mod"></a>配置 Mod</h4><p>如果要配置Mod，也可以用 <code>modoverrides.lua</code> 写，比如：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"workshop-666155465"</span>]=&#123; <span class="comment">--显示提示</span></span><br><span class="line">  configuration_options=&#123;</span><br><span class="line">    chestB=<span class="number">-1</span>,</span><br><span class="line">    chestG=<span class="number">-1</span>,</span><br><span class="line">    chestR=<span class="number">-1</span>,</span><br><span class="line">    food_estimation=<span class="number">-1</span>,</span><br><span class="line">    food_order=<span class="number">1</span>,</span><br><span class="line">    food_style=<span class="number">0</span>,</span><br><span class="line">    lang=<span class="string">"chs"</span>,</span><br><span class="line">    show_food_units=<span class="number">-1</span>,</span><br><span class="line">    show_uses=<span class="number">-1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  enabled=<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="上传文件权限问题"><a href="#上传文件权限问题" class="headerlink" title="上传文件权限问题"></a>上传文件权限问题</h3><ul><li>如果用WinSCP上传了文件</li><li>WinSCP传文件的时候还是用的 root 用户</li><li>但运行服务端的用户又不是root用户</li></ul><p>建议确保权限正确。<br>使用root登录SSH：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果新建的专门跑服务端的用户叫 steam</span></span><br><span class="line">$ chown -R steam:steam /home/steam/.klei/DoNotStarveTogether/MyDediServer/Cluster_1</span><br></pre></td></tr></table></figure><h3 id="端口问题"><a href="#端口问题" class="headerlink" title="端口问题"></a>端口问题</h3><h4 id="概括"><a href="#概括" class="headerlink" title="概括"></a>概括</h4><p>假如是「单服务器单集群」架构，那么你会有七个相关端口：</p><ul><li>Master 的 <code>master_port</code></li><li>Master 的 <code>server_port</code></li><li>Master 的 <code>authentication_port</code></li><li>Master 的 <code>master_server_port</code></li><li>Caves 的 <code>server_port</code></li><li>Caves 的 <code>authentication_port</code></li><li>Caves 的 <code>master_server_port</code></li></ul><p>七个端口都必须不同。</p><p>假如是「多服务器单集群」架构，那么「主服务器」上有四个端口，「地穴服务器」上有三个端口。<br>主服务器和地穴服务器上的对应端口也许可以相同（我没有试过），但没有必要。<br>何必呢，分别设置七个端口有那么难吗？</p><p>打个比方：</p><ul><li>Master 的 <code>master_port</code> 使用 <code>11000</code></li><li>Master 的 <code>server_port</code> 使用 <code>11001</code></li><li>Master 的 <code>authentication_port</code> 使用 <code>11002</code></li><li>Master 的 <code>master_server_port</code> 使用 <code>11003</code></li><li>Caves 的 <code>server_port</code> 使用 <code>11004</code></li><li>Caves 的 <code>authentication_port</code> 使用 <code>11005</code></li><li>Caves 的 <code>master_server_port</code> 使用 <code>11006</code></li></ul><p>现在你知道，所有分片服务器上都要开三个端口，分别提供「游戏服务」和「Steam内部通信服务 * 2」。<br>主服务器上的是 1、2、3，地穴服务器上的是 4、5、6。<br>主服务器上还多一个端口，是提供「集群内部通信服务」的，是 0。（为什么不是1？嗯？……我就随便举个栗子）</p><p>那么主服务器打开0-3（包括0和3）四个端口就行，地穴服务器打开4-6三个端口就行，既好记，又方便使用。</p><h4 id="Linux-防火墙"><a href="#Linux-防火墙" class="headerlink" title="Linux 防火墙"></a>Linux 防火墙</h4><p>使用 root 用户连接到SSH：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --zone&#x3D;public --query-port&#x3D;查询的端口&#x2F;udp</span><br><span class="line"># 如果回显 no 说明对应端口没有打开，需要防火墙放通</span><br><span class="line">$ firewall-cmd --zone&#x3D;public --add-port&#x3D;放通的端口&#x2F;udp --permanent</span><br><span class="line"># 应该回显 success</span><br><span class="line">$ firewall-cmd --reload # 重载防火墙策略</span><br><span class="line">$ systemctl restart firewalld # 或者直接重启防火墙</span><br><span class="line">$ firewall-cmd --zone&#x3D;public --query-port&#x3D;再次查询端口&#x2F;udp</span><br><span class="line"># 应该回显 yes</span><br></pre></td></tr></table></figure><h4 id="IDC-服务商的安全组"><a href="#IDC-服务商的安全组" class="headerlink" title="IDC 服务商的安全组"></a>IDC 服务商的安全组</h4><p>阿里云、腾讯云、京东云、华为云、又拍云、筋斗云，不管什么云，它但凡是家有牌照的IDC商，肯定是提供安全组服务的。<br>这年头狗都会上网了，真的不建议放通所有端口。</p><blockquote><p>这两天斗鱼PM我说最近有先查主播IP然后D到不能开播的情况<br>实属离奇</p></blockquote><p><img src="https://i.loli.net/2020/04/09/iqTdz8WjMGURhI9.png" alt="斗鱼PM"></p><p>要用的上面全部写清楚了，又不是不知道具体该开放哪些端口，有衣服穿何必裸奔呢。<br>对应端口，UDP，0.0.0.0/0，允许，没了。</p><h2 id="其他不常见问题"><a href="#其他不常见问题" class="headerlink" title="其他不常见问题"></a>其他不常见问题</h2><p>下面两个问题都是CentOS出现的，不太清楚Debian能不能复现。</p><h3 id="缺少-libcurl-gnutls-so-4"><a href="#缺少-libcurl-gnutls-so-4" class="headerlink" title="缺少 libcurl-gnutls.so.4"></a>缺少 libcurl-gnutls.so.4</h3><p>感谢「<a href="https://blog.csdn.net/zhang41228/article/details/103106298" target="_blank" rel="noopener">Linux/Centos7搭建饥荒服务器教程</a>」一文的提出的解决方案。<br>如果依赖已经成功安装，但运行服务端仍然提示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dontstarve_dedicated_server_nullrenderer: error <span class="keyword">while</span> loading shared libraries: libcurl-gnutls.so.4: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><p>这种情况是库文件链接错误，重新建立软链接就好了：<br>（注意<code>/home/steam</code>是当前用户的home目录，即<code>pwd ~</code>，若与教程不同请注意自行替换）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ln -s /usr/lib/libcurl.so.4 /home/steam/dontstarvetogether_dedicated_server/bin/lib32/libcurl-gnutls.so.4</span><br></pre></td></tr></table></figure><p>如果你确定当前用户就是steam（或者叫别的名字的专门运行服务端的用户）而不是root，也可以直接</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ln -s /usr/lib/libcurl.so.4 ~/dontstarvetogether_dedicated_server/bin/lib32/libcurl-gnutls.so.4</span><br></pre></td></tr></table></figure><h3 id="内核版本过低"><a href="#内核版本过低" class="headerlink" title="内核版本过低"></a>内核版本过低</h3><p>新搞了个服务器，用来测试写的脚本，结果出了这个问题。</p><p>感谢「<a href="https://blog.csdn.net/baidu_36985483/article/details/103507215" target="_blank" rel="noopener">Centos7 在使用SteamCMD更新的时候显示登录成功||不成功，获取用户信息失败问题分析！解决方法</a>」一文的提出的解决方案。<br>查看「<a href="https://steamcommunity.com/discussions/forum/11/1646544161774102517" target="_blank" rel="noopener">[LINUX, STEAMCMD] Waiting for user info…FAILED. Timed out.</a>」一帖可以看到热心网友<a href="https://steamcommunity.com/id/neutralx2" target="_blank" rel="noopener">NeutralX2</a>表示他遇到了同样的问题，但已经解决了，是内核版本过新（他的情况是过新）的问题，并指路「<a href="https://github.com/ValveSoftware/steam-for-linux/issues/6326" target="_blank" rel="noopener">Steam does not connect on kernels newer than 2019-06-17 #6326</a>」。<br>总之出现类似问题多半是SteamCMD不支持当前的内核版本。</p><p>我这里的症状是SteamCMD解压好第一次运行的时候匿名登录上去了，但获取API时失败，大概像这样：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Steam&gt;login anonymous</span><br><span class="line"></span><br><span class="line">Connecting anonymously to Steam Public...Logged in OK</span><br><span class="line">Waiting for user info...OK.</span><br><span class="line">Loading Steam API...FAILED. Timed out.</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><p>解决方案很简单，更新内核就好了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum update kernel</span><br></pre></td></tr></table></figure><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>不记得参考了哪些，以前的我既然记在这里那应该都参考了，排名不分先后。<br><a href="https://github.com/moonprism/installDSTserver.sh" target="_blank" rel="noopener">moonprism的安装脚本</a><br><a href="https://steamcommunity.com/sharedfiles/filedetails/?id=1448397182" target="_blank" rel="noopener">Windows+Steam客户端，快速配置Dedicated Server</a><br><a href="https://www.jianshu.com/p/440d64cd3ac4" target="_blank" rel="noopener">饥荒联机版服务器搭建教程</a><br><a href="https://www.kicoe.com/article/id/4" target="_blank" rel="noopener">Linux下搭建饥荒专用服务器</a></p><h2 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h2><p>差点忘了说，顺手写了个脚本，就当复习shell基础了。<br>写的时候考虑尽善尽美了，不保证实际体验。<br>我还是觉得授人以<a href="https://github.com/Cyanashi/AutoTaskScripts/tree/master/Game/DoNotStarveTogether" target="_blank" rel="noopener">鱼</a>不如授人以渔。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y wget &amp;&amp; wget https://raw.githubusercontent.com/Cyanashi/AutoTaskScripts/master/Game/DoNotStarveTogether/install_dst.sh &amp;&amp; sh install_dst.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务端 </tag>
            
            <tag> 饥荒 </tag>
            
            <tag> 饥荒联机版 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「运维」SSH-Key 的使用场景 Termux and Git</title>
      <link href="/operation/Linux-SSH-Keys-Usage/"/>
      <url>/operation/Linux-SSH-Keys-Usage/</url>
      
        <content type="html"><![CDATA[<p>SSH-Key用途有很多，用得最多的主要还是「SSH 登录」和「Github 鉴权」。<br>背景知识日后有空再补充，直接讲用法。</p><a id="more"></a><h2 id="SSH-登录"><a href="#SSH-登录" class="headerlink" title="SSH 登录"></a>SSH 登录</h2><h3 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"yourmark"</span> -f ~/.ssh/keys_filename <span class="comment"># 生成密钥对 keys_filename是指定的密钥对文件名</span></span><br><span class="line">$ <span class="built_in">cd</span> ~/.ssh <span class="comment"># 切换到ssh元目录</span></span><br><span class="line">$ cat keys_filename.pub &gt;&gt; authorized_keys <span class="comment"># 把刚刚生成的密钥对存进白名单</span></span><br><span class="line">$ chmod -R 700 ~/.ssh <span class="comment"># 确保ssh元目录权限正确</span></span><br><span class="line">$ chmod 600 ~/.ssh/authorized_keys <span class="comment"># 确保白名单文件权限正确</span></span><br></pre></td></tr></table></figure><p>接着运行<code>vim /etc/ssh/sshd_config</code>编辑ssh配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## 允许使用ssh-key验证并登录 ##</span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"></span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">## 上面这行的意思是允许登录root 但禁止直接登录root 即只能用别的账户登录成功后切换到root ##</span><br><span class="line">## 不用动它 新增下面这行就行 ##</span><br><span class="line">PermitRootLogin yes # 允许root直接登录</span><br></pre></td></tr></table></figure><p>把<code>~/.ssh/id_rsa</code>（私钥文件）下载到本地PC，直接打开复制粘贴也好，用WinSCP下载也罢，总之把私钥保存到本地就行。<br>保存好私钥之后运行<code>service sshd restart</code>或者<code>/etc/init.d/ssh restart</code>重启SSH服务。</p><blockquote><p>为了提高安全性可以直接禁止密码登录：<br><code>vim /etc/ssh/sshd_config</code>打开配置文件，修改为<code>PasswordAuthentication no</code>保存后重启SSH即可。<br>此外还可以把默认的22端口修改为其他端口进一步提高安全性。</p></blockquote><h3 id="使用手机登录SSH"><a href="#使用手机登录SSH" class="headerlink" title="使用手机登录SSH"></a>使用手机登录SSH</h3><p>首先下载著名的「Linux终端 upon 安卓 - <a href="https://play.google.com/store/apps/details?id=com.termux" target="_blank" rel="noopener">Termux</a>」。</p><h4 id="用电脑-SSH-登录手机-Termux"><a href="#用电脑-SSH-登录手机-Termux" class="headerlink" title="用电脑 SSH 登录手机 Termux"></a>用电脑 SSH 登录手机 Termux</h4><p>手机操作也太不方便了，在外面还情有可原，手边有电脑就用电脑操作吧：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pkg install openssh <span class="comment"># 安装SSH服务</span></span><br><span class="line">$ termux-setup-storage <span class="comment"># 挂载手机本地存储</span></span><br></pre></td></tr></table></figure><p>使用电脑生成密钥对，并把公钥导入到手机里，有两种方法。</p><p>一是将公钥文件<code>xxx.pub</code>保存到手机存储空间，比如照片文件夹<code>DCIM</code>。<br>放在其他文件夹也行，具体对应关系参考下图。<br><img src="https://i.loli.net/2020/03/25/zNx3LvkYfbVFJem.png" alt="Termux与手机存储空间对应关系"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat ~/storage/dcim/xxx.pub &gt;&gt; ~/.ssh/authorized_keys <span class="comment"># 将公钥内容保存到SSH白名单</span></span><br><span class="line">$ sshd <span class="comment"># 启动SSH服务</span></span><br></pre></td></tr></table></figure><p>二是直接把公钥内容以文本形式从电脑发送到手机，手机复制后<code>vi ~/.ssh/authorized_keys</code>输入<code>i</code>进入编辑模式，长按屏幕，PASTE。<br>注意只能是<code>vi</code>，因为Termux原生自带的是阉割版的vim，并且只支持<code>vi</code>命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ifconfig wlan0 <span class="comment"># 查看当前手机IP</span></span><br><span class="line">$ whoami <span class="comment"># 查看当前用户名</span></span><br></pre></td></tr></table></figure><p>电脑使用SSH软件连接[手机IP:8022]（Termux默认SSH端口8022）并用对应的「用户名」和「私钥」登录即可。</p><h4 id="安装-ArchLinux"><a href="#安装-ArchLinux" class="headerlink" title="安装 ArchLinux"></a>安装 ArchLinux</h4><p>用不惯Termux自带的Linux？没关系，经典的Arch也是可以装的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ pkg install wget <span class="comment"># 安装wget</span></span><br><span class="line">$ pkg install proot <span class="comment"># 安装proot</span></span><br><span class="line">$ pkg install bsdtar <span class="comment"># 安装bsdtar</span></span><br><span class="line">$ wget https://sdrausty.github.io/TermuxArch/setupTermuxArch.sh <span class="comment"># 下载安装脚本</span></span><br><span class="line">$ bash setupTermuxArch.sh 运行安装脚本</span><br></pre></td></tr></table></figure><p>耐心等待下载/解压完成，视网速和手机性能不同，这一步耗费的时间也会有差异。<br>安装成功后会自动进入ArchLinux环境，可以使用<code>exit</code>退出。</p><blockquote><p>注意：重启Termux进程后默认系统仍是Termux，需要手动运行<code>startarch</code>进入ArchLinux环境。</p></blockquote><h4 id="奥义·套娃SSH"><a href="#奥义·套娃SSH" class="headerlink" title="奥义·套娃SSH"></a>奥义·套娃SSH</h4><p>在linux中使用SSH-Key登录别的服务器可以运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh username@hostname -i ~/.ssh/your_id_rsa</span><br></pre></td></tr></table></figure><p>也就是说可以用Termux登录任何一台提供SSH服务的服务器。</p><p>首先还是生成密钥对，公钥放在服务器的<code>authorized_keys</code>，私钥参考之前说过的方法导入到手机Termux。<br>新建一个shell脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/go2server.sh</span><br></pre></td></tr></table></figure><p>输入以下内容并保存：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设名为 id_rsa_server 的私钥文件并已经导入到 Termux 的 ~/.ssh/ 目录下</span></span><br><span class="line">ssh root@your.server.com -p 22 -i ~/.ssh/id_rsa_server</span><br></pre></td></tr></table></figure><p>以后直接就可以登录服务器了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x ~/go2server.sh <span class="comment"># 增加脚本执行权限</span></span><br><span class="line">$ ~/go2server.sh <span class="comment"># 运行脚本</span></span><br></pre></td></tr></table></figure><p>当然，这个操作的意义不是简单的套娃。<br>而是意味着从此以后只要手机能上网，就能登录任何一台服务器，相当于把Termux当成手机的SSH客户端用。</p><h2 id="Github-鉴权"><a href="#Github-鉴权" class="headerlink" title="Github 鉴权"></a>Github 鉴权</h2><h3 id="基础使用-1"><a href="#基础使用-1" class="headerlink" title="基础使用"></a>基础使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"邮箱地址"</span></span><br><span class="line">$ cat ~/.ssh/id_rsa.pub <span class="comment"># 把公钥放到 Git 账户的 SSH Key 即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 最后可以验证连通性 ##</span></span><br><span class="line">$ ssh -T git@github.com</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">$ ssh -T git@gitee.com</span><br></pre></td></tr></table></figure><h3 id="同时使用多个账户"><a href="#同时使用多个账户" class="headerlink" title="同时使用多个账户"></a>同时使用多个账户</h3><p>首先还是生成密钥对：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">'firstuser@mail.com'</span> -f ~/.ssh/github_id_rsa</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">'firstuser@mail.com'</span> -f ~/.ssh/gitee_id_rsa</span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">'seconduser@mail.com'</span> -f ~/.ssh/github_id_rsa_2</span><br></pre></td></tr></table></figure><p>运行<code>vim ~/.ssh/config</code>编辑配置文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># Default Github User(GithubUser firstuser@mail.com)</span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;github_id_rsa</span><br><span class="line"></span><br><span class="line"># Another Github User(GithubUser2 seconduser@mail.com)</span><br><span class="line">Host github.com-2</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;github_id_rsa_2</span><br><span class="line"></span><br><span class="line"># Default Gitee User(GiteeUser firstuser@mail.com)</span><br><span class="line">Host gitee.com</span><br><span class="line">HostName gitee.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;gitee_id_rsa</span><br></pre></td></tr></table></figure><p>默认账户没什么好说的，需要注意第二个github账户应该使用<code>git@github.com-2:GithubUser2/example.git</code>，重点是里面的<code>github.com-2</code>应该对应<code>config</code>配置文件里的<code>Host</code>自行替换。</p><p>设置完成后依次测试连通性：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br><span class="line">$ ssh -T git@github.com-2</span><br><span class="line">$ ssh -T git@gitee.com</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Git </tag>
            
            <tag> Termux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「硬件」树莓派食用手册#2 准备软件环境及相关配置</title>
      <link href="/hardware/RPi-2-Prepare-Software/"/>
      <url>/hardware/RPi-2-Prepare-Software/</url>
      
        <content type="html"><![CDATA[<p>本文默认使用「<a href="https://github.com/openfans-community-offical/Debian-Pi-Aarch64" target="_blank" rel="noopener">Debian Pi Aarch64</a>」以及root用户。<br>如果装的官方系统Raspbian仅供参考，请视实际情况自行调整。</p><a id="more"></a><h2 id="Debian-Pi-Aarch64-相关设置"><a href="#Debian-Pi-Aarch64-相关设置" class="headerlink" title="Debian Pi Aarch64 相关设置"></a>Debian Pi Aarch64 相关设置</h2><p>本节摘录自「<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#1-3%E5%90%84%E7%89%88%E6%9C%AC%E5%8A%9F%E8%83%BD%E6%AF%94%E8%BE%83" target="_blank" rel="noopener">Debian Pi Aarch64 官方文档</a>」</p><h3 id="Docker-容器"><a href="#Docker-容器" class="headerlink" title="Docker 容器"></a>Docker 容器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl start docker.service <span class="comment"># 手动开启</span></span><br><span class="line">$ systemctl <span class="built_in">enable</span> docker.service <span class="comment"># 启用开机启动</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop docker.service <span class="comment"># 手动停止</span></span><br><span class="line">$ systemctl <span class="built_in">disable</span> docker.service <span class="comment"># 禁用开机启动</span></span><br></pre></td></tr></table></figure><h3 id="Web-GUI-管理平台"><a href="#Web-GUI-管理平台" class="headerlink" title="Web GUI 管理平台"></a>Web GUI 管理平台</h3><p>默认服务端口：9090<br>访问地址：<code>https://[你的树莓派IP]:9090/</code><br>由于证书是本地部署的，直接访问的话浏览器必然提示安全证书有问题，错误代码一般带<code>CERTIFICATE</code>/<code>AUTHORITY</code>/<code>INVALID</code>。<br>Chrome如何设置请自行查询资料。（建议不要修改默认设置，会带来相应的安全隐患。）<br>Win10自带Edge，用Edge直接访问就行了，提示「此站点不安全」展开「详细信息」然后点击「继续转到网页」即可。<br>接着使用任何拥有管理权限的账户登录，和SSH密码登录一样。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl start cockpit.socket <span class="comment"># 手动开启</span></span><br><span class="line">$ systemctl <span class="built_in">enable</span> cockpit.socket <span class="comment"># 启用开机启动</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop cockpit.socket <span class="comment"># 手动停止</span></span><br><span class="line">$ systemctl <span class="built_in">disable</span> cockpit.socket <span class="comment"># 禁用开机启动</span></span><br></pre></td></tr></table></figure><h3 id="Web-SSH-客户端"><a href="#Web-SSH-客户端" class="headerlink" title="Web SSH 客户端"></a>Web SSH 客户端</h3><p>默认服务端口：4200<br>如果默认开启，建议关闭。<br>「Web GUI 管理平台」里面已经封装「命令行终端」功能了，完全可以作为「Web SSH 客户端」的替代品。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop shellinabox.service <span class="comment"># 手动停止</span></span><br><span class="line">$ systemctl <span class="built_in">disable</span> shellinabox.service <span class="comment"># 禁用开机启动</span></span><br></pre></td></tr></table></figure><h3 id="CecOS-CaaS-容器云"><a href="#CecOS-CaaS-容器云" class="headerlink" title="CecOS CaaS 容器云"></a>CecOS CaaS 容器云</h3><p>默认服务端口：8443<br>如果不知道是什么，或者不知道怎么用，建议直接关闭。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop cecos-caas.service <span class="comment"># 手动停止</span></span><br><span class="line">$ systemctl <span class="built_in">disable</span> cecos-caas.service <span class="comment"># 禁用开机启动</span></span><br></pre></td></tr></table></figure><h2 id="配置时区"><a href="#配置时区" class="headerlink" title="配置时区"></a>配置时区</h2><ol><li>执行<code>date</code>查看系统时间，如果慢了8个小时，说明是GMT时区</li><li>执行<code>dpkg-reconfigure tzdata</code>，选择<code>Asia</code>/<code>Shanghai</code>切换到CST（中国时区）</li></ol><h2 id="配置别名"><a href="#配置别名" class="headerlink" title="配置别名"></a>配置别名</h2><h3 id="bash"><a href="#bash" class="headerlink" title="bash"></a>bash</h3><p>运行<code>vim ~/.bashrc</code>编辑bash配置文件，比如<code>ll</code>并不是原生指令，如果使用的系统没有预设的话，需要自行编写别名。<br>比如最经典的：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alias ls='ls $LS_OPTIONS'</span><br><span class="line">alias ll='ls $LS_OPTIONS -l'</span><br><span class="line">alias l='ls $LS_OPTIONS -lA'</span><br></pre></td></tr></table></figure><p>修改完后<code>source ~/.bashrc</code>让新配置生效。</p><h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>以下均为个人习惯，关于Git配置别名详见<a href="https://www.liaoxuefeng.com/wiki/896043488029600/898732837407424" target="_blank" rel="noopener">廖雪峰的Git教程</a>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.st status</span><br><span class="line">$ git config --global alias.co checkout</span><br><span class="line">$ git config --global alias.ci commit</span><br><span class="line">$ git config --global alias.br branch</span><br><span class="line">$ git config --global alias.psm <span class="string">"push origin master"</span></span><br><span class="line">$ git config --global alias.plm <span class="string">"pull origin master"</span></span><br><span class="line">$ git config --global alias.unstage <span class="string">"reset HEAD"</span></span><br><span class="line">$ git config --global alias.last <span class="string">"log -1"</span></span><br><span class="line">$ git config --global alias.lg <span class="string">"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit"</span></span><br></pre></td></tr></table></figure><h2 id="狗狗网线-配置wifi"><a href="#狗狗网线-配置wifi" class="headerlink" title="狗狗网线 配置wifi"></a><del>狗狗网线</del> 配置wifi</h2><ol><li>执行<code>iwlist wlan0 scan</code>扫描附近的无线网来确认树莓派的网卡正常工作，回显的ESSID就是wifi名字</li><li>执行<code>vim /etc/wpa_supplicant/wpa_supplicant.conf</code>编辑wifi配置<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">country&#x3D;CN</span><br><span class="line">network&#x3D;&#123;</span><br><span class="line">    ssid&#x3D;&quot;路由器wifi名字&quot;</span><br><span class="line">    psk&#x3D;&quot;路由器wifi密码&quot;</span><br><span class="line">    priority&#x3D;1</span><br><span class="line">    id_str&#x3D;&quot;wifi-router&quot;</span><br><span class="line">&#125;</span><br><span class="line">network&#x3D;&#123;</span><br><span class="line">    ssid&#x3D;&quot;手机热点名字&quot;</span><br><span class="line">    psk&#x3D;&quot;手机热点密码&quot;</span><br><span class="line">    priority&#x3D;2</span><br><span class="line">    id_str&#x3D;&quot;wifi-hotspot&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>可以只配置一个，配置多个会根据优先级<code>priority</code>依次尝试连接</li><li>执行<code>systemctl restart networking</code>重启网络服务</li><li>执行<code>reboot</code>重启树莓派系统</li><li>此时SSH会话当然会断开，去路由器后台看看树莓派连上wifi了没</li><li>如果没有设置固定IP，建议为树莓派MAC地址绑定固定IP，方便以后每次直接连接不用花时间精力再查树莓派分配到哪个IP</li><li>重新连接后使用<code>ifconfig wlan0</code>可以查看新的IP</li></ol><h2 id="更换国内软件源"><a href="#更换国内软件源" class="headerlink" title="更换国内软件源"></a>更换国内软件源</h2><p>编辑软件源配置文件<code>vim /etc/apt/sources.list</code>。<br>阿里云：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;raspbian&#x2F;raspbian&#x2F; stretch main contrib non-free rpi</span><br><span class="line">deb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;raspbian&#x2F;raspbian&#x2F; stretch main contrib non-free rpi</span><br></pre></td></tr></table></figure><p>清华：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deb http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;debian&#x2F; buster main non-free contrib </span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;debian-security buster&#x2F;updates main </span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;debian&#x2F; buster-updates main non-free contrib </span><br><span class="line">deb http:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;debian&#x2F; buster-backports main non-free contrib</span><br></pre></td></tr></table></figure><p>建议用清华。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt update; apt upgrade</span><br><span class="line">$ apt-get dist-upgrade -y</span><br></pre></td></tr></table></figure><h2 id="利用虚拟机配置lnmp环境"><a href="#利用虚拟机配置lnmp环境" class="headerlink" title="利用虚拟机配置lnmp环境"></a>利用虚拟机配置lnmp环境</h2><p>本节摘录自「<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#4-2%E5%AE%9D%E5%A1%94%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BD%BF%E7%94%A8%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener">Debian Pi Aarch64 官方文档</a>」</p><h3 id="安装虚拟机"><a href="#安装虚拟机" class="headerlink" title="安装虚拟机"></a>安装虚拟机</h3><p>首先下载「<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#6%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" target="_blank" rel="noopener">宝塔虚拟机</a>」（<code>bt-panel_vm_5.9.1_pro_v2.tar</code>@2020.3.23）并移动到到树莓派。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ apt update ; apt install tar gzip zip unzip bzip2 xz-utils -y <span class="comment"># 下载解压软件</span></span><br><span class="line">$ tar -xvf bt-panel_vm_5.9.1_pro_v2.tar <span class="comment"># 解压虚拟机压缩包</span></span><br><span class="line">$ <span class="built_in">cd</span> bt-panel_vm_5.9.1_pro_v2 <span class="comment"># 切换工作目录</span></span><br><span class="line">$ xz -d -k bt.qcow2.disk.xz <span class="comment"># 解压虚拟磁盘镜像</span></span><br><span class="line">$ ./install <span class="comment"># 安装宝塔虚拟机</span></span><br><span class="line">$ ./bt_run <span class="comment"># 启动宝塔虚拟机</span></span><br><span class="line">$ ./install int <span class="comment"># 启用开机自动启动宝塔虚拟机</span></span><br></pre></td></tr></table></figure><p>看到<code>nohup: appending output to &#39;nohup.out&#39;</code>就成功后台运行宝塔虚拟机了，可以回车退出到前台。</p><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>终端运行<code>ssh -p 2222 root@树莓派IP地址</code>连接到虚拟机，初始账号<code>root</code>密码<code>raspberry</code>。<br>浏览器访问<code>http://树莓派IP地址:28888</code>进入宝塔面板，初始账号<code>openfans</code>密码<code>openfans</code>。</p><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>关闭虚拟机需要SSH登录到虚拟机执行<code>init 0</code>关闭，关闭后执行<code>./bt_prog</code>无输出就是正常关闭<br>否则<code>./bt_prog kill</code>强制关闭虚拟机，总之保证<code>./bt_prog</code>无输出就是关闭宝塔虚拟机成功<br>执行<code>./install uint</code>可以取消开机自动启动宝塔虚拟机</p><h2 id="使用frp实现内网穿透"><a href="#使用frp实现内网穿透" class="headerlink" title="使用frp实现内网穿透"></a>使用frp实现内网穿透</h2><h3 id="下载frp"><a href="#下载frp" class="headerlink" title="下载frp"></a>下载frp</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> FRP_VERSION=0.32.0 <span class="comment"># 可以先去 https://github.com/fatedier/frp/releases 看看最新版本是多少</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 以下是服务器(服务端 Server) ##</span></span><br><span class="line"><span class="comment"># 注意 Debian x64 的树莓派 应该使用 arm64 版本</span></span><br><span class="line">$ wget <span class="string">"https://github.com/fatedier/frp/releases/download/v<span class="variable">$&#123;FRP_VERSION&#125;</span>/frp_<span class="variable">$&#123;FRP_VERSION&#125;</span>_linux_arm64.tar.gz"</span> <span class="comment"># 下载</span></span><br><span class="line">$ tar xzvf frp_<span class="variable">$&#123;FRP_VERSION&#125;</span>_linux_arm64.tar.gz <span class="comment"># 解压</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 以下是树莓派(客户端 Client) ##</span></span><br><span class="line"><span class="comment"># 根据自己服务器类型选择frp版本 一般都是amd64</span></span><br><span class="line">$ wget <span class="string">"https://github.com/fatedier/frp/releases/download/v<span class="variable">$&#123;FRP_VERSION&#125;</span>/frp_<span class="variable">$&#123;FRP_VERSION&#125;</span>_linux_arm64.tar.gz"</span> <span class="comment"># 下载</span></span><br><span class="line">$ tar xzvf frp_<span class="variable">$&#123;FRP_VERSION&#125;</span>_linux_amd64.tar.gz <span class="comment"># 解压</span></span><br></pre></td></tr></table></figure><h3 id="服务器配置frp"><a href="#服务器配置frp" class="headerlink" title="服务器配置frp"></a>服务器配置frp</h3><p>运行<code>vim frps.ini</code>编辑Server的frps配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">privilege_token &#x3D; [私有凭证] # 相当于frp的密码 不设置也能用 但如果服务器不设置就开了frp 任何一个知道你服务器ip和frp端口的人都能连</span><br><span class="line">bind_port &#x3D; 7000 # frp默认的服务器端口</span><br><span class="line">vhost_http_prot &#x3D; 8080 # 如果内网穿透要转发http服务的话</span><br></pre></td></tr></table></figure><p>打开防火墙对应端口：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ firewall-cmd --permanent --add-port=7000/tcp <span class="comment"># 这里打开的端口是 frps.ini 中 配置的 bind_port</span></span><br><span class="line">$ firewall-cmd --permanent --add-port=8080/tcp <span class="comment"># 如果设置了 vhost_http_prot</span></span><br><span class="line">$ systemctl restart firewalld.service <span class="comment"># 重启防火墙服务</span></span><br><span class="line">$ firewall-cmd --permanent --query-port=7000/tcp <span class="comment"># 可以查询端口状态</span></span><br><span class="line">$ ./frps -c ./frps.ini <span class="comment"># 使用刚编辑好的配置文件 启动frp服务端</span></span><br></pre></td></tr></table></figure><p>注意：如果服务器有安全策略（阿里云/腾讯云etc），需要登录对应管理平台设置安全组放行相应端口。（主要是入方向，出方向应该都是默认全放通的）</p><h3 id="树莓派配置frp"><a href="#树莓派配置frp" class="headerlink" title="树莓派配置frp"></a>树莓派配置frp</h3><p>运行<code>vim frpc.ini</code>编辑Client的frpc配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">privilege_token &#x3D; [私有凭证]</span><br><span class="line">server_addr &#x3D; [服务器公网IP]</span><br><span class="line">server_port &#x3D; 7000</span><br><span class="line"></span><br><span class="line">[ssh]</span><br><span class="line">type &#x3D; tcp</span><br><span class="line">local_ip &#x3D; 127.0.0.1</span><br><span class="line">local_port &#x3D; 22</span><br><span class="line">remote_port &#x3D; 222 # 设置用公网SSH连接的端口 注意这个端口也要去服务器打开对应防火墙&#x2F;安全组的端口</span><br><span class="line"></span><br><span class="line">[web]</span><br><span class="line">type &#x3D; http</span><br><span class="line">local_port &#x3D; 80</span><br><span class="line">custom_domains &#x3D; [域名]</span><br></pre></td></tr></table></figure><p>启动frp客户端<code>./frpc -c ./frpc.ini</code>。</p><h2 id="设置默认使用Python3"><a href="#设置默认使用Python3" class="headerlink" title="设置默认使用Python3"></a>设置默认使用Python3</h2><ol><li><code>python --version</code>查看版本，虽然python2跟python3都安好了的，但默认的应该是2.7</li><li><code>rm /usr/bin/python</code>删掉之前的python链接</li><li><code>ln -s /usr/bin/python3.7 /usr/bin/python</code>新建python链接</li><li><code>python --version</code>查看版本，应该是3.7了吧</li></ol><h3 id="全新安装pip"><a href="#全新安装pip" class="headerlink" title="全新安装pip"></a>全新安装pip</h3><ol><li><code>wget https://bootstrap.pypa.io/get-pip.py --no-check-certificate</code>下载安装脚本</li><li><code>python get-pip.py</code>执行安装脚本</li><li><code>pip -V</code>查看pip版本</li></ol>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> Linux </tag>
            
            <tag> Debian </tag>
            
            <tag> 宝塔面板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《暗黑破坏神3》S20禁忌文献死灵法师Build</title>
      <link href="/game/Diablo3-S20-Necromancer-Build/"/>
      <url>/game/Diablo3-S20-Necromancer-Build/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>适用版本 20赛季（2.6.8）</p><blockquote><p>起赛季角色不用赛季buff不如玩非赛。</p><footer><strong>《52 Things You Must Know About Diablo 3》</strong><cite>沃兹吉·边德</cite></footer></blockquote><a id="more"></a><p>这个赛季的buff是萃取不限类型：</p><blockquote><p>第20赛季是“禁忌文献”赛季。许多冒险者都听闻了古老的奈非天神器“卡奈魔盒”中蕴藏着的神力。然而，没人能比声名显赫而又臭名昭著的赫拉迪姆佐敦·库勒更为熟知这股力量。库勒可以解锁并驾驭魔盒的力量，凭借这股力量来萃取并保存强大物品中的能量。在第20赛季中，我们会探索库勒的禁忌实验为你带来的力量。<br>卡奈魔盒中的槽位允许你装备三个额外的传奇威能，而在第20赛季期间，这些槽位将不受通常的类型限制。玩家一般可以在武器、护甲和首饰类型中各装备一种传奇威能，但第20赛季的玩家可以在三种类型中任意混合搭配！你可以装备两种武器威能和一种护甲威能。也可以选择装备三种首饰威能。选择尽在你手，我们也同样期待大家去尝试发掘全新的配装！</p></blockquote><p>别的职业不清楚，死灵萃取三镰刀怎么说？</p><p>本文施工完成于2020.3.3，抄的<a href="https://www.diablofans.com/members/636047-saqra1394" target="_blank" rel="noopener">Saqra</a>的成型build：</p><ul><li>「死疫船长博恩2+2+2尸矛斩杀」<a href="https://www.diablofans.com/builds/106640-znec-s20-2-6-8" target="_blank" rel="noopener">Znec S20 2.6.8</a> 作者推荐巅峰800+</li><li>「散件魂法带塔衣尸兄」<a href="https://www.diablofans.com/builds/106639-rath-golem-s20-2-6-8" target="_blank" rel="noopener">Rath Golem S20 2.6.8</a> 作者推荐巅峰1700+</li><li>「散件魂法带安魂死地」<a href="https://www.diablofans.com/builds/106637-rath-lotd-s20-2-6-8" target="_blank" rel="noopener">Rath LoTD S20 2.6.8</a> 作者推荐巅峰1700+</li><li>「散件新星」<a href="https://www.diablofans.com/builds/106642-necro-nova-s20-2-6-8" target="_blank" rel="noopener">Necro Nova S20 2.6.8</a> 作者推荐巅峰1650+</li><li>「散件魂法小米悬赏」<a href="https://www.diablofans.com/builds/106663-bounties-t16-s20-2-6-8" target="_blank" rel="noopener">Bounties &amp; T16 S20 2.6.8</a> 作者推荐巅峰1700+</li></ul><p>实际表现如何要等13号国服开赛季才知道 <del>我看视频感觉强度一般</del>，体验后再更新。</p><h2 id="散件魂法小米悬赏"><a href="#散件魂法小米悬赏" class="headerlink" title="散件魂法小米悬赏"></a>散件魂法小米悬赏</h2><p>不要断金币</p><h3 id="配装"><a href="#配装" class="headerlink" title="配装"></a>配装</h3><p>所有装备都需要远古/太古以获得<a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a>最高增伤。<br>首饰必带孔，没孔洗孔，传奇宝石比一两条词缀重要多了。<br>「<a href="https://ptr.d3planner.com/416074705" target="_blank" rel="noopener">完美配装参考</a>」</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/leorics-crown-70" target="_blank" rel="noopener">李奥瑞克的王冠</a></strong> 孔(必带，你把这个孔想成不用洗的12.5%CDR)/15%技能伤/6%暴击/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/razeths-volition-70" target="_blank" rel="noopener">拉泽斯的意志</a></strong> 8%CDR/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/requiem-cereplate" target="_blank" rel="noopener">安魂胸甲</a></strong> 球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/goldwrap-70" target="_blank" rel="noopener">金织带</a></strong> 球拾/护甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/swamp-land-waders-70" target="_blank" rel="noopener">沼地防水裤</a></strong> 20%物理伤/球拾/护甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/steuarts-greaves-70" target="_blank" rel="noopener">斯图亚特的护胫</a></strong> 15%技能伤/球拾/护甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/tasker-and-theo-70" target="_blank" rel="noopener">塔斯克与西奥</a></strong> 8%CDR/50%暴伤/10%暴击/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/nemesis-bracers-70" target="_blank" rel="noopener">复仇者护腕</a></strong> 20%物理伤/6%暴击/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/squirts-necklace-70" target="_blank" rel="noopener">斯奎特的项链</a></strong> 孔/100%暴伤/10%暴击/8%CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/circle-of-nailujs-evol-70" target="_blank" rel="noopener">奈鲁维的轮回</a></strong> 孔/8%CDR/50%暴伤/6%暴击/7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/krysbins-sentence-70" target="_blank" rel="noopener">克里斯宾的审判</a></strong> 孔/8%CDR/50%暴伤/6%暴击/7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/scythe-of-the-cycle-70" target="_blank" rel="noopener">轮回镰刀</a></strong> 10%CDR / 10%ED<br><strong><a href="http://d.163.com/db/cn/49513/equipment/lost-time-70" target="_blank" rel="noopener">失时</a></strong> 8%CDR/10%暴击/15%技能伤/20精魂上限</p><h3 id="萃取"><a href="#萃取" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/messerschmidts-reaver-70" target="_blank" rel="noopener">梅塞施密特的劫掠者</a></strong> 灭回版黄道<br><strong><a href="http://d.163.com/db/cn/49513/equipment/tragouls-corroded-fang-70" target="_blank" rel="noopener">塔格奥的蚀牙</a></strong> 诅咒200%增伤 两把镰刀带1萃1<br><strong><a href="http://d.163.com/db/cn/49513/equipment/avarice-band-70" target="_blank" rel="noopener">贪婪之戒</a></strong> 30码球拾 三个戒指带2萃1</p><h3 id="宝石"><a href="#宝石" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a></strong> 散件BD唯一指定宝石，没得换 <del>把梦魇对戒拍死在沙滩上的后浪</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/enforcer" target="_blank" rel="noopener">侍从宝石</a></strong> 宝宝增伤减伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/boon-of-the-hoarder" target="_blank" rel="noopener">囤宝者的恩惠</a></strong> 小米快乐石<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49511/equipment/flawless-royal-topaz" target="_blank" rel="noopener">黄宝石</a>（智力），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能"><a href="#技能" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/skeletal-mage" target="_blank" rel="noopener">骷髅法师</a></strong> <code>精魂灌注</code> 宝宝输出<br><strong><a href="http://d.163.com/db/cn/49513/skill/frailty" target="_blank" rel="noopener">脆弱</a></strong> <code>脆弱灵气</code> 15%血以下斩杀，技能范围能被<strong>球拾加成</strong><br><strong><a href="http://d.163.com/db/cn/49513/skill/devour" target="_blank" rel="noopener">吞噬</a></strong> <code>吞血食肉</code> 吃尸体回精魂回血（死疫2件套还送免费骨矛）<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-rush" target="_blank" rel="noopener">鲜血奔行</a></strong> <code>鲜血代谢</code> 2层充能位移<br><strong><a href="http://d.163.com/db/cn/49513/skill/bone-armor" target="_blank" rel="noopener">骨甲</a></strong> <code>血骨相连</code> 125%武器伤转护甲+相当于30%常驻减伤+击中增加秒回 生存技<br><strong><a href="http://d.163.com/db/cn/49513/skill/land-of-the-dead" target="_blank" rel="noopener">亡者领域</a></strong> <code>死寒之地</code> 爆发大招<br><strong><a href="http://d.163.com/db/cn/49513/skill/extended-servitude" target="_blank" rel="noopener">求死不能</a></strong> 宝宝持续时间延长<br><strong><a href="http://d.163.com/db/cn/49513/skill/fueled-by-death" target="_blank" rel="noopener">亡魂灌注</a></strong> 可以视为常驻30%加速<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-is-power" target="_blank" rel="noopener">鲜血之力</a></strong> 每卖一管血减20%全技能CD<br><strong><a href="http://d.163.com/db/cn/49513/skill/final-service" target="_blank" rel="noopener">绝命效忠</a></strong> 60sCD的春哥</p><h3 id="可选"><a href="#可选" class="headerlink" title="可选"></a>可选</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/pauldrons-of-the-skeleton-king-70" target="_blank" rel="noopener">骷髅王肩铠</a></strong> 抽奖春哥<br><strong><a href="http://d.163.com/db/cn/49513/equipment/homing-pads-70" target="_blank" rel="noopener">赋归肩垫</a></strong> 无敌炉石<br><strong><a href="http://d.163.com/db/cn/49513/equipment/haunted-visions" target="_blank" rel="noopener">鬼灵面容</a></strong> 分身持续时间翻倍<br><strong><a href="http://d.163.com/db/cn/49513/equipment/reapers-wraps" target="_blank" rel="noopener">夺魂者裹腕</a></strong> 球回+回能<br><strong><a href="http://d.163.com/db/cn/49513/equipment/hexing-pants-of-mr-yan-70" target="_blank" rel="noopener">杨先生的妖法裤</a></strong> 走A增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bone-ringer-70" target="_blank" rel="noopener">响骨</a></strong> / <strong><a href="http://d.163.com/db/cn/49513/equipment/iron-rose-70" target="_blank" rel="noopener">铁玫瑰</a></strong> 天坑副手词条能毕业就谢天谢地了特效无所谓</p><h2 id="散件魂法冲层"><a href="#散件魂法冲层" class="headerlink" title="散件魂法冲层"></a>散件魂法冲层</h2><p>根据回精魂方式不同有两种配装「<a href="https://ptr.d3planner.com/531726177" target="_blank" rel="noopener">塔衣大尸兄配装</a>」「<a href="https://ptr.d3planner.com/135988533" target="_blank" rel="noopener">安魂死地配装</a>」</p><h3 id="配装-1"><a href="#配装-1" class="headerlink" title="配装"></a>配装</h3><p>所有装备都需要远古/太古以获得<a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a>最高增伤。<br>首饰必带孔，没孔洗孔，传奇宝石比一两条词缀重要多了。<br>这里用的产尸流，即塔衣大尸兄血债血偿，变种为安魂死地亡者滋养。</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/leorics-crown-70" target="_blank" rel="noopener">李奥瑞克的王冠</a></strong> 15%技能伤/孔(必带，你把这个孔想成不用洗的12.5%CDR)<br><strong><a href="http://d.163.com/db/cn/49513/equipment/pauldrons-of-the-skeleton-king-70" target="_blank" rel="noopener">骷髅王肩铠</a></strong> 8%CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/tal-rashas-relentless-pursuit-70" target="_blank" rel="noopener">塔·拉夏的无情追捕</a></strong> 7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-witching-hour-70" target="_blank" rel="noopener">行巫时刻</a></strong> 7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/hexing-pants-of-mr-yan-70" target="_blank" rel="noopener">杨先生的妖法裤</a></strong><br><strong><a href="http://d.163.com/db/cn/49513/equipment/steuarts-greaves-70" target="_blank" rel="noopener">斯图亚特的护胫</a></strong> 15%技能伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/tasker-and-theo-70" target="_blank" rel="noopener">塔斯克与西奥</a></strong> 8%CDR/50%暴伤/10%暴击<br><strong><a href="http://d.163.com/db/cn/49513/equipment/reapers-wraps" target="_blank" rel="noopener">夺魂者裹腕</a></strong> 6%暴击<br><strong><a href="http://d.163.com/db/cn/49513/equipment/squirts-necklace-70" target="_blank" rel="noopener">斯奎特的项链</a></strong> 孔/100%暴伤/10%暴击<br><strong><a href="http://d.163.com/db/cn/49513/equipment/circle-of-nailujs-evol-70" target="_blank" rel="noopener">奈鲁维的轮回</a></strong> 孔/8%CDR/50%暴伤/6%暴击/7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/krysbins-sentence-70" target="_blank" rel="noopener">克里斯宾的审判</a></strong> 孔/8%CDR/50%暴伤/6%暴击/7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/scythe-of-the-cycle-70" target="_blank" rel="noopener">轮回镰刀</a></strong> 10%CDR / 10%ED<br><strong><a href="http://d.163.com/db/cn/49513/equipment/lost-time-70" target="_blank" rel="noopener">失时</a></strong> 8%CDR/15%技能伤/10%暴击/20精魂上限</p><h3 id="萃取-1"><a href="#萃取-1" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/messerschmidts-reaver-70" target="_blank" rel="noopener">梅塞施密特的劫掠者</a></strong> 灭回版黄道<br><strong><a href="http://d.163.com/db/cn/49513/equipment/tragouls-corroded-fang-70" target="_blank" rel="noopener">塔格奥的蚀牙</a></strong> 诅咒200%增伤 两把单手镰刀带1萃1<br><strong><a href="http://d.163.com/db/cn/49513/equipment/reilenas-shadowhook-70" target="_blank" rel="noopener">莱勒娜的影镰</a></strong> 精魂上限增伤</p><h3 id="宝石-1"><a href="#宝石-1" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a></strong> 散件BD唯一指定宝石，没得换 <del>把梦魇对戒拍死在沙滩上的后浪</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/enforcer" target="_blank" rel="noopener">侍从宝石</a></strong> 宝宝增伤减伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-trapped" target="_blank" rel="noopener">困者之灾</a></strong> 稳定增伤<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49511/equipment/flawless-royal-topaz" target="_blank" rel="noopener">黄宝石</a>（智力），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能-1"><a href="#技能-1" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/skeletal-mage" target="_blank" rel="noopener">骷髅法师</a></strong> <code>精魂灌注</code> 宝宝输出<br><strong><a href="http://d.163.com/db/cn/49513/skill/simulacrum" target="_blank" rel="noopener">血魂双分</a></strong> <code>血盈血魂</code> 影分身+精魂上限翻倍<br><strong><a href="http://d.163.com/db/cn/49513/skill/devour" target="_blank" rel="noopener">吞噬</a></strong> <code>饱餐</code> 吃尸体回精魂加血量上限<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-rush" target="_blank" rel="noopener">鲜血奔行</a></strong> <code>鲜血代谢</code> 2层充能位移<br><strong><a href="http://d.163.com/db/cn/49513/skill/bone-armor" target="_blank" rel="noopener">骨甲</a></strong> <code>血骨相连</code> 125%武器伤转护甲+相当于30%常驻减伤+击中增加秒回 生存技<br><strong><a href="http://d.163.com/db/cn/49513/skill/command-golem" target="_blank" rel="noopener">号令傀儡</a></strong> <code>寒冰傀儡</code> 变相提高全队10%暴击 <del>人称小冰晶</del><br><strong><a href="http://d.163.com/db/cn/49513/skill/overwhelming-essence" target="_blank" rel="noopener">精魂魄身</a></strong> +40精魂上限<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-for-blood" target="_blank" rel="noopener">血债血偿</a></strong> 每吃一个球抵消一次技能耗血<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-is-power" target="_blank" rel="noopener">鲜血之力</a></strong> 每卖一管血减20%全技能CD<br><strong><a href="http://d.163.com/db/cn/49513/skill/final-service" target="_blank" rel="noopener">绝命效忠</a></strong> 60sCD的春哥</p><h3 id="可选-1"><a href="#可选-1" class="headerlink" title="可选"></a>可选</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/andariels-visage-70" target="_blank" rel="noopener">安达莉尔的仪容</a></strong> 20%物理伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/swamp-land-waders-70" target="_blank" rel="noopener">沼地防水裤</a></strong> 20%物理伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/razeths-volition-70" target="_blank" rel="noopener">拉泽斯的意志</a></strong> 产尸肩 骷髅法师死亡产尸<br><strong><a href="http://d.163.com/db/cn/49513/equipment/haunted-visions" target="_blank" rel="noopener">鬼灵面容</a></strong> 分身持续时间翻倍<br><strong><a href="http://d.163.com/db/cn/49513/equipment/requiem-cereplate" target="_blank" rel="noopener">安魂胸甲</a></strong> 吃尸体回复翻倍且保存溢出<br><strong><a href="http://d.163.com/db/cn/49513/equipment/vigilante-belt-70" target="_blank" rel="noopener">行侠腰带</a></strong> 8%CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bone-ringer-70" target="_blank" rel="noopener">响骨</a></strong> / <strong><a href="http://d.163.com/db/cn/49513/equipment/iron-rose-70" target="_blank" rel="noopener">铁玫瑰</a></strong> 天坑副手词条能毕业就谢天谢地了特效无所谓<br><strong><a href="http://d.163.com/db/cn/49513/skill/land-of-the-dead" target="_blank" rel="noopener">亡者领域</a></strong> <code>死寒之地</code> 替换 <strong><a href="http://d.163.com/db/cn/49513/skill/command-golem" target="_blank" rel="noopener">号令傀儡</a></strong><br><strong><a href="http://d.163.com/db/cn/49513/skill/life-from-death" target="_blank" rel="noopener">亡者滋养</a></strong> 替换 <strong><a href="http://d.163.com/db/cn/49513/skill/blood-for-blood" target="_blank" rel="noopener">血债血偿</a></strong></p><h2 id="散件新星"><a href="#散件新星" class="headerlink" title="散件新星"></a>散件新星</h2><p>实话说还没玩过死灵新星，这赛季试试。</p><h3 id="配装-2"><a href="#配装-2" class="headerlink" title="配装"></a>配装</h3><p>所有装备都需要远古/太古以获得<a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a>最高增伤。<br>首饰必带孔，没孔洗孔，传奇宝石比一两条词缀重要多了。<br>「<a href="https://ptr.d3planner.com/222527360" target="_blank" rel="noopener">完美配装参考</a>」</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/leorics-crown-70" target="_blank" rel="noopener">李奥瑞克的王冠</a></strong> 孔(必带，你把这个孔想成不用洗的12.5%CDR)/15%技能伤/6%暴击<br><strong><a href="http://d.163.com/db/cn/49513/equipment/pauldrons-of-the-skeleton-king-70" target="_blank" rel="noopener">骷髅王肩铠</a></strong> 20%范围伤/护甲/8%CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/aquila-cuirass-70" target="_blank" rel="noopener">天鹰斗衣</a></strong> 护甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/dayntees-binding-70" target="_blank" rel="noopener">但提的束缚</a></strong> 护甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/swamp-land-waders-70" target="_blank" rel="noopener">沼地防水裤</a></strong> 20%毒伤/护甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/illusory-boots-70" target="_blank" rel="noopener">虚幻长靴</a></strong> 15%技能伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/stone-gauntlets-70" target="_blank" rel="noopener">岩石护手</a></strong> 20%范围伤/50%暴伤/10%暴击/8%CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/ancient-parthan-defenders-70" target="_blank" rel="noopener">古帕萨卫士护腕</a></strong> 20%毒伤/6%暴击<br><strong><a href="http://d.163.com/db/cn/49513/equipment/squirts-necklace-70" target="_blank" rel="noopener">斯奎特的项链</a></strong> 孔/100%暴伤/10%暴击/20%毒伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/convention-of-elements-70" target="_blank" rel="noopener">全能法戒</a></strong> 孔/20%范围伤/50%暴伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/krysbins-sentence-70" target="_blank" rel="noopener">克里斯宾的审判</a></strong> 孔/20%范围伤/50%暴伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/scythe-of-the-cycle-70" target="_blank" rel="noopener">轮回镰刀</a></strong>  24%范围伤 / 10%ED / 10%CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bone-ringer-70" target="_blank" rel="noopener">响骨</a></strong>15%技能伤/20%范围伤/ 8%CDR / 20精魂上限</p><h3 id="萃取-2"><a href="#萃取-2" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/tragouls-corroded-fang-70" target="_blank" rel="noopener">塔格奥的蚀牙</a></strong> 诅咒200%增伤 两把单手镰刀带1萃1<br><strong><a href="http://d.163.com/db/cn/49513/equipment/nayrs-black-death" target="_blank" rel="noopener">纳伊尔的黑镰</a></strong> 每个不同毒伤技能增加毒伤100%<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bloodtide-blade-70" target="_blank" rel="noopener">血潮利刃</a></strong> 25码内每个敌人使死亡新星增伤400%</p><h3 id="宝石-2"><a href="#宝石-2" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a></strong> 散件BD唯一指定宝石，没得换 <del>把梦魇对戒拍死在沙滩上的后浪</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-trapped" target="_blank" rel="noopener">困者之灾</a></strong> 稳定增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/pain-enhancer" target="_blank" rel="noopener">增痛宝石</a></strong> 暴击流血 流血加攻速<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49511/equipment/flawless-royal-ruby" target="_blank" rel="noopener">红宝石</a>（力量，为了护甲），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能-2"><a href="#技能-2" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/grim-scythe" target="_blank" rel="noopener">恐镰</a></strong> <code>恶咒镰刀</code> 回精魂<br><strong><a href="http://d.163.com/db/cn/49513/skill/death-nova" target="_blank" rel="noopener">死亡新星</a></strong> <code>疫病新星</code> 输出<br><strong><a href="http://d.163.com/db/cn/49513/skill/army-of-the-dead" target="_blank" rel="noopener">亡者大军</a></strong> <code>荒疫鬼手</code> 爆发大招<br><strong><a href="http://d.163.com/db/cn/49513/skill/simulacrum" target="_blank" rel="noopener">血魂双分</a></strong> <code>鲜血与白骨</code> 影分身+1<br><strong><a href="http://d.163.com/db/cn/49513/skill/bone-armor" target="_blank" rel="noopener">骨甲</a></strong> <code>白骨脱臼</code> 125%武器伤转护甲+相当于30%常驻减伤+击晕2s 生存技<br><strong><a href="http://d.163.com/db/cn/49513/skill/land-of-the-dead" target="_blank" rel="noopener">亡者领域</a></strong> <code>瘟疫之地</code> 爆发大招<br><strong><a href="http://d.163.com/db/cn/49513/skill/spreading-malediction" target="_blank" rel="noopener">弱点加深</a></strong> 每多一个诅咒过的敌人增伤1%<br><strong><a href="http://d.163.com/db/cn/49513/skill/eternal-torment" target="_blank" rel="noopener">永恒酷刑</a></strong>  诅咒永久持续<br><strong><a href="http://d.163.com/db/cn/49513/skill/rathmas-shield" target="_blank" rel="noopener">拉斯玛之盾</a></strong> 开大招无敌4s<br><strong><a href="http://d.163.com/db/cn/49513/skill/final-service" target="_blank" rel="noopener">绝命效忠</a></strong> 60sCD的春哥</p><h3 id="可选-2"><a href="#可选-2" class="headerlink" title="可选"></a>可选</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/st-archews-gage-70" target="_blank" rel="noopener">圣·阿契武的战书</a></strong> 被精英摸了加盾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/ice-climbers-70" target="_blank" rel="noopener">攀冰者</a></strong> 免疫冰冻定身<br><strong><a href="http://d.163.com/db/cn/49513/equipment/lost-time-70" target="_blank" rel="noopener">失时</a></strong> 这辈子想出一个能用的词缀毕业的副手</p><h2 id="死疫尸矛球拾加强版"><a href="#死疫尸矛球拾加强版" class="headerlink" title="死疫尸矛球拾加强版"></a>死疫尸矛球拾加强版</h2><p>「<a href="https://ptr.d3planner.com/654047678" target="_blank" rel="noopener">完美配装参考</a>」</p><h3 id="配装-3"><a href="#配装-3" class="headerlink" title="配装"></a>配装</h3><p>死疫博恩2+2+2（死疫肩手+船长裤鞋+博恩剑衣+<a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a>）<br>死疫使者的裹布：2件套吃尸体免费尸矛<br>克里森船长的饰衣：2件套6000秒回+20%CDR+20%减耗，3件套CDR转伤害+减耗转减伤<br>博恩的号令：2件套15%生命，3件套10%CDR+2%经验</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/leorics-crown-70" target="_blank" rel="noopener">李奥瑞克的王冠</a></strong> 球拾/孔(必带，你把这个孔想成不用洗的12.5%CDR)<br><strong><a href="http://d.163.com/db/cn/49513/equipment/pestilence-defense" target="_blank" rel="noopener">死疫护肩</a></strong> 8%CDR/球拾/全抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/borns-frozen-soul" target="_blank" rel="noopener">博恩的霜魂</a></strong> 球拾/全抗/3孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/vigilante-belt-70" target="_blank" rel="noopener">行侠腰带</a></strong> 8%CDR/全抗/球拾 为了CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-thrust" target="_blank" rel="noopener">克里森船长的推裤</a></strong> 球拾/全抗/2孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-waders" target="_blank" rel="noopener">克里森船长的涉水靴</a></strong> 球拾/全抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/pestilence-gloves" target="_blank" rel="noopener">死疫护手</a></strong> 8%CDR/球拾/7%攻速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/nemesis-bracers-70" target="_blank" rel="noopener">复仇者护腕</a></strong> 球拾/全抗 和力士带一萃一<br><strong><a href="http://d.163.com/db/cn/49513/equipment/rondals-locket-70" target="_blank" rel="noopener">隆达尔的坠匣</a></strong> 8%CDR / 7%攻速/孔 这三条必带 +8%减耗/6码球拾毕业<br><strong><a href="http://d.163.com/db/cn/49513/equipment/oculus-ring-70" target="_blank" rel="noopener">神目指环</a></strong> 8%CDR / 7%攻速/孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/briggs-wrath" target="_blank" rel="noopener">布里格斯之怒</a></strong> 8%CDR / 7%攻速/孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/borns-furious-wrath" target="_blank" rel="noopener">博恩的暴怒</a></strong> 10%CDR / 7%攻速/孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/stormshield-uniqueshield009x1-70" target="_blank" rel="noopener">暴风之盾</a></strong> 8%CDR</p><h3 id="萃取-3"><a href="#萃取-3" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/messerschmidts-reaver-70" target="_blank" rel="noopener">梅塞施密特的劫掠者</a></strong> 灭回版黄道<br><strong><a href="http://d.163.com/db/cn/49513/equipment/strongarm-bracers-70" target="_blank" rel="noopener">力士护腕</a></strong> 拉怪增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a></strong> 凑套装唯一指定戒指</p><h3 id="宝石-3"><a href="#宝石-3" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/gogok-of-swiftness" target="_blank" rel="noopener">迅捷勾玉</a></strong> CDR、攻速、闪避<br><strong><a href="http://d.163.com/db/cn/49513/equipment/iceblink" target="_blank" rel="noopener">闪耀冰晶</a></strong> 控怪、变相提高全队10%暴击 <del>等级只和减速效果有关，而且上限最多点到50</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/gem-of-efficacious-toxin" target="_blank" rel="noopener">剧毒宝石</a></strong> 10%增伤10%减伤<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（全抗），武器除了绿宝石（这套bd没有双暴）爱带啥带啥，大佬带的<a href="http://d.163.com/db/cn/49513/equipment/gem-of-ease" target="_blank" rel="noopener">自在宝石</a>（杀怪经验）</p><h3 id="技能-3"><a href="#技能-3" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/corpse-lance" target="_blank" rel="noopener">尸矛</a></strong> <code>脆裂碰触</code> 输出<br><strong><a href="http://d.163.com/db/cn/49513/skill/frailty" target="_blank" rel="noopener">脆弱</a></strong> <code>脆弱灵气</code> 15%血以下斩杀，技能范围能被<strong>球拾加成</strong><br><strong><a href="http://d.163.com/db/cn/49513/skill/devour" target="_blank" rel="noopener">吞噬</a></strong> <code>吞血食肉</code> 吃尸体回精魂回血（死疫2件套还送免费骨矛）<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-rush" target="_blank" rel="noopener">鲜血奔行</a></strong> <code>鲜血代谢</code> 2层充能位移<br><strong><a href="http://d.163.com/db/cn/49513/skill/bone-armor" target="_blank" rel="noopener">骨甲</a></strong> <code>血骨相连</code> 125%武器伤转护甲+相当于30%常驻减伤+击中增加秒回 生存技<br><strong><a href="http://d.163.com/db/cn/49513/skill/land-of-the-dead" target="_blank" rel="noopener">亡者领域</a></strong> <code>死寒之地</code> 爆发大招<br><strong><a href="http://d.163.com/db/cn/49513/skill/eternal-torment" target="_blank" rel="noopener">永恒酷刑</a></strong> <a href="http://d.163.com/db/cn/49513/skill/frailty" target="_blank" rel="noopener">脆弱</a>50%减耗+永久持续<br><strong><a href="http://d.163.com/db/cn/49513/skill/life-from-death" target="_blank" rel="noopener">亡者滋养</a></strong> 吃尸体可能出球<br><strong><a href="http://d.163.com/db/cn/49513/skill/blood-is-power" target="_blank" rel="noopener">鲜血之力</a></strong> 每卖一管血减20%全技能CD<br><strong><a href="http://d.163.com/db/cn/49513/skill/final-service" target="_blank" rel="noopener">绝命效忠</a></strong> 60sCD的春哥</p><h3 id="可选-3"><a href="#可选-3" class="headerlink" title="可选"></a>可选</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/ingeom" target="_blank" rel="noopener">寅剑</a></strong> 肥宅快乐剑，没啥好说的<br><strong><a href="http://d.163.com/db/cn/49513/equipment/lost-time-70" target="_blank" rel="noopener">失时</a></strong> 减速加速<br><strong><a href="http://d.163.com/db/cn/49513/equipment/dayntees-binding-70" target="_blank" rel="noopener">但提的束缚</a></strong> 50%减伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/aquila-cuirass-70" target="_blank" rel="noopener">天鹰斗衣</a></strong> 50%减伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/halcyons-ascent-70" target="_blank" rel="noopener">赫西恩之飞升</a></strong> 8s全屏控制</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 暗黑破坏神3 </tag>
            
            <tag> 配装 </tag>
            
            <tag> 死灵法师 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「运维」第14000605次重置博客</title>
      <link href="/operation/Blog-Last-Remastered/"/>
      <url>/operation/Blog-Last-Remastered/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我真的希望这是最后一次了。</p><a id="more"></a><p>我特别喜欢「清洗」这个概念。<br>不知道算控制欲过强还是安全感太低，我把大部分自己无法掌握且没有足够了解的事物都视为污渍、肮脏的杂质。<br>现实生活里我不得不克服，否则连呼吸都有心理障碍。<br>与之相对的，作为某种压抑后的释放，对于一些更为抽象的、更偏向概念性的东西，我这种偏执就会显现出来。</p><blockquote><p>有一句话我说过很多次：我可能不是真的洁癖，但我是真的矫情。<br>这句话是真的，至今都是。</p></blockquote><p>比方说博客，如果我一个月没更新，博客里每个字看起来都变得陌生；任何一个我曾经亲手加上去的细节我都会思考如果重新开始能否重现。<br>文章是否都好好校对过，能不能更新出更好的版本？实现的方法是否足够优雅，是否有苟且的可耻妥协？<br>我这个人很多时候想得多，很多时候又很懒，当堆积的质疑达到一个阈值，我会想「好烦，算了」。<br>算了，想那么多干什么，全部推掉重来不就好了？我真是天才。</p><p>为了避免下一次无谓的重置，这次记录尽量详尽一点。Let’s go。</p><h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><h3 id="框架-主题"><a href="#框架-主题" class="headerlink" title="框架/主题"></a>框架/主题</h3><p>依旧选择Hexo + NexT，首先是足够好用，其次我也习惯了。<br>反正都重建了，顺便<code>npm install -g hexo-cli</code>更新到最新版本：「Hexo 4.2 / Hexo-cli 3.1 / NexT 7.7.1」（2020年2月26日）。</p><h3 id="架构-部署"><a href="#架构-部署" class="headerlink" title="架构/部署"></a>架构/部署</h3><p><code>hexo init</code>初始化的时候可以看到：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init new-blog</span><br><span class="line">INFO  Cloning hexo-starter https:&#x2F;&#x2F;github.com&#x2F;hexojs&#x2F;hexo-starter.git</span><br><span class="line">Cloning into &#39;D:\Workspace\Git\new-blog&#39;...</span><br><span class="line">remote: Enumerating objects: 30, done.</span><br><span class="line">remote: Counting objects: 100% (30&#x2F;30), done.</span><br><span class="line">remote: Compressing objects: 100% (24&#x2F;24), done.</span><br><span class="line">Receiviremote: Total 161 (delta 12), reused 12 (delta 4), pack-reused 131</span><br><span class="line">Receiving objects: 100% (161&#x2F;161), 31.79 KiB | 4.54 MiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (74&#x2F;74), done.</span><br><span class="line">Submodule &#39;themes&#x2F;landscape&#39; (https:&#x2F;&#x2F;github.com&#x2F;hexojs&#x2F;hexo-theme-landscape.git) registered for path &#39;themes&#x2F;landscape&#39;</span><br><span class="line">Cloning into &#39;D:&#x2F;Workspace&#x2F;Git&#x2F;new-blog&#x2F;themes&#x2F;landscape&#39;...</span><br><span class="line">remote: Enumerating objects: 9, done.</span><br><span class="line">remote: Counting objects: 100% (9&#x2F;9), done.</span><br><span class="line">remote: Compressing objects: 100% (9&#x2F;9), done.</span><br><span class="line">remote: Total 1063 (delta 1), reused 1 (delta 0), pack-reused 1054</span><br><span class="line">Receiving objects: 100% (1063&#x2F;1063), 3.22 MiB | 2.16 MiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (582&#x2F;582), done.</span><br><span class="line">Submodule path &#39;themes&#x2F;landscape&#39;: checked out &#39;73a23c51f8487cfcd7c6deec96ccc7543960d350&#39;</span><br></pre></td></tr></table></figure><p>官方自带的主题<code>themes/landscape</code>是作为submodule子模块clone到本地的。<br>但clone下来只是作为文件（而不是git仓库）初始化框架，因此<code>new-blog</code>（假如是用<code>hexo init new-blog</code>初始化）文件夹内是没有git仓库的，本地的<code>/themes/landscape</code>就是单纯的文件夹。<br>如果我们在使用NexT主题的同时还要对框架本身做版本管理，就会出现一个问题：如何处理主题目录<code>/themes/next</code>？<br>如果<code>git clone https://github.com/theme-next/hexo-theme-next themes/next</code>按照标准流程安装主题，<code>themes/next</code>本身就是一个git仓库，不能直接add到主仓库里。<br>如果<code>git submodule add https://github.com/theme-next/hexo-theme-next themes/next</code>也不行，子模块commit到主仓库只是一个指向原主题仓库的指针，如果本地对主题仓库的内容有修改，是没办法直接push到主仓库的。<br>显然不可能原封不动的直接引用源仓库，就算不做任何二次开发，最少也要修改其中的<code>/themes/next/_config.yml</code>（主题配置文件）。<br>如果一定要用submodule这种方案，当然也有解决办法，可以fork一个主题仓库进行二次开发，然后主仓库引用自己fork的版本。这样如果要更新，拉取新版本后本地合并代码就行了。（<a href="https://segmentfault.com/a/1190000009928515" target="_blank" rel="noopener">参考</a>）</p><p>我本来准备这样做，中途突然发现一个问题：我现在真的不是为了折腾而折腾吗？<br>我费时费力费心这样做能得到什么？更方便地使用github action自动部署？<br>hexo没有自带<a href="https://hexo.io/zh-cn/docs/one-command-deployment#Git" target="_blank" rel="noopener">git部署</a>？本地环境hexo-cli编译不动？我馋github action提供的虚拟机？<br>何必呢？解耦开发版本和生产版本，建两个仓库，一个写作一个展示不好吗？<br>写作仓库部署到展示仓库，展示仓库就算不用github pages也可以再用github action部署到vps/oss，还实现了对public单独的版本控制。</p><p>至于主题目录<code>/themes/next</code>我用了一个不算优雅但足够实用的方法，新建一个<code>/themes/next/.meta/</code>文件夹，把<code>/themes/next/.git</code>和<code>/themes/next/.github</code>放到里面，接着在<code>/.gitignore</code>里面排除掉<code>.meta</code>，之后就能在主仓库里管理主题目录了。<br>没个十年半载的我也想不起要更新主题，等下次要更新的时候把<code>.git</code>和<code>.github</code>从<code>.meta</code>里拉出来，拉取合并完再放回<code>.meta</code>就行。</p><h2 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h2><h3 id="准备好环境"><a href="#准备好环境" class="headerlink" title="准备好环境"></a>准备好环境</h3><ul><li><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> (next主题需要最低10.9.0)</li><li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a></li></ul><h3 id="安装hexo-cli"><a href="#安装hexo-cli" class="headerlink" title="安装hexo-cli"></a>安装hexo-cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><h3 id="安装next主题"><a href="#安装next主题" class="headerlink" title="安装next主题"></a>安装next主题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><h3 id="配置站点"><a href="#配置站点" class="headerlink" title="配置站点"></a>配置站点</h3><p>分别编辑根目录和NexT目录下的<code>_config.yml</code>文件，详情参考官方文档「<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo</a>」「<a href="https://theme-next.org/docs/theme-settings/" target="_blank" rel="noopener">NexT</a>」</p><h3 id="使用-Github-Action-自动部署"><a href="#使用-Github-Action-自动部署" class="headerlink" title="使用 Github Action 自动部署"></a>使用 Github Action 自动部署</h3><p>实现「结构/部署」一章中的设计：</p><ol><li>分别建立「写作」和「展示」两个仓库，本地只对「写作仓库」进行操作</li><li>「写作仓库」每次push触发第一轮<code>Github Action</code>自动使用<code>hexo generate</code>编译准备好的<code>source</code>(博客内容)和<code>themes</code>(博客主题)，并将编译出来的<code>public</code>(博客静态文件)push到「展示仓库」</li><li>「展示仓库」每次push触发第二轮<code>Github Action</code>将静态文件自动部署到vps(我博客放在国内vps上)或者oos</li></ol><p>如果是用<code>Github pages</code>来展示博客则不需要第三步，第二步把编译好的<code>public</code>(静态网页文件)push到<code>Github pages</code>所在仓库就已经完成部署了。<br>这种方案第一次配置固然繁琐，但配置好之后就是纯粹的享受了，本地只需要专注于写作(校对可以使用hexo-admin，产出内容过程建议还是放在本地，不然万一编译出错心态会崩的，我崩过，大家随意)和测试(<code>hexo server</code>预览效果)，更新博客只需要push一次，后续的部署工作会全自动完成。<br>同时两个仓库实现了「写作仓库（博文/主题修改）」和「展示仓库（静态网页文件）」相互独立的版本控制：</p><ul><li>「写作仓库」记录了每次博文和主题的更新，方便回溯和比较每次细微的修改。</li><li>「展示仓库」记录了每次编译好的静态网页的更新，可以把博客恢复到任何一个(自动部署完成的)版本。</li></ul><h4 id="建立写作仓库"><a href="#建立写作仓库" class="headerlink" title="建立写作仓库"></a>建立写作仓库</h4><p>结构如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Blog-Repo-Writing&#x2F;</span><br><span class="line"> ├── .git&#x2F;             # git仓库元信息</span><br><span class="line"> ├── .github&#x2F;</span><br><span class="line"> │ ├── workflows&#x2F;      # 此目录下所有 workflow文件(*.yml) 都会被 Github Action 检测到并自动执行</span><br><span class="line"> │ │ └── build.yml     # 第一轮 Github Action workflow(自动部署)文件 在Writing仓库执行 编译public并提交到Display仓库</span><br><span class="line"> │ └── second_action&#x2F;  # 文件夹叫什么无所谓 甚至 sync.yml 放在别的地方都可以 只要能被git管理到</span><br><span class="line"> │   └── sync.yml      # 第二轮 Github Action workflow(自动部署)文件 在Display仓库执行 将public同步到其他位置</span><br><span class="line"> ├── scaffolds&#x2F;        # Hexo页面模版</span><br><span class="line"> ├── source&#x2F;           # Hexo博客内容</span><br><span class="line"> ├── themes&#x2F;           # Hexo主题</span><br><span class="line"> ├── .gitignore        # git版本管理排除列表</span><br><span class="line"> ├── _config.yml       # Hexo项目配置文件</span><br><span class="line"> ├── package.json      # Node.js模块(就是Hexo)依赖包等元信息</span><br><span class="line"> └── package-lock.json # Node.js模块元信息 - 依赖包锁定版本</span><br></pre></td></tr></table></figure><h4 id="建立展示仓库"><a href="#建立展示仓库" class="headerlink" title="建立展示仓库"></a>建立展示仓库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Blog-Repo-Display&#x2F;</span><br><span class="line"> └── [Null] # 每次第一轮部署完成后 public里有什么这里就有什么</span><br></pre></td></tr></table></figure><h4 id="使用-Github-Action"><a href="#使用-Github-Action" class="headerlink" title="使用 Github Action"></a>使用 Github Action</h4><blockquote><p>注意：Github Action 要的workflow文件(*.yml)只要放在<code>/.github/workflows/</code>目录下就会被检测到并自动执行，因此第二轮部署需要的文件应该放在别的位置<br>这里我在并列的位置建了一个<code>/.github/second_action/</code>文件夹来放，也可以放其他任何能被git管理到的位置  </p></blockquote><p><strong>试图像「Github Pages的cname文件」那样直接把<code>.github/workflows/sync.yml</code>放在<code>source</code>内一起提交是不行的！</strong><br>确实可以提交到仓库，但之后Github Action执行<code>hexo generate</code>的时候会忽略<code>.</code>开头的隐藏文件/文件夹。</p><p>Github Action的具体用法此处不再赘述，需要进一步了解的话自行查阅资料。</p><p>在写作仓库执行第一轮自动部署：编译public并push到展示仓库。<code>build.yml</code>内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">name: Hexo CI - Build</span><br><span class="line"></span><br><span class="line"># 每次 master 分支有 push 操作就执行下列任务</span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">    - master</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  build:</span><br><span class="line">    # 申请 linux 虚拟机</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">    # 下载仓库(这里是写作仓库)内容到虚拟机</span><br><span class="line">    - name: 1. Checkout Repo</span><br><span class="line">      uses: actions&#x2F;checkout@v2</span><br><span class="line">    # 安装 Node.js</span><br><span class="line">    - name: 2. Setup Node.js</span><br><span class="line">      uses: actions&#x2F;setup-node@v1</span><br><span class="line">    # 安装 Hexo 及相关依赖包</span><br><span class="line">    - name: 3. Install Hexo</span><br><span class="line">      run: |</span><br><span class="line">        npm install hexo-cli -g</span><br><span class="line">        npm install</span><br><span class="line">    # 生成 public 静态网页文件</span><br><span class="line">    - name: 4. Generate Public Files</span><br><span class="line">      run: |</span><br><span class="line">        hexo clean</span><br><span class="line">        hexo generate</span><br><span class="line">    # 将准备好的第二轮自动部署文件复制到 public 内 一起提交</span><br><span class="line">    - name: 5. Copy Github Action Workflow File</span><br><span class="line">      run: |</span><br><span class="line">        mkdir -p public&#x2F;.github&#x2F;workflows&#x2F;</span><br><span class="line">        cp .github&#x2F;second_action&#x2F;sync.yml public&#x2F;.github&#x2F;workflows&#x2F;sync.yml</span><br><span class="line">    # 将 public 文件夹 push 到展示仓库</span><br><span class="line">    - name: 6. Push Changes</span><br><span class="line">      uses: peaceiris&#x2F;actions-gh-pages@v2.5.1</span><br><span class="line">      env:</span><br><span class="line">        ACTIONS_DEPLOY_KEY: $&#123;&#123; secrets.REPO_TOKEN &#125;&#125; # 你的展示仓库的部署私钥 记得添加密钥对的时候要勾write权限 否则push不上去</span><br><span class="line">        EXTERNAL_REPOSITORY: Cyanashi&#x2F;Rakuyo-Blog-Display # 你的展示仓库</span><br><span class="line">        PUBLISH_BRANCH: master</span><br><span class="line">        PUBLISH_DIR: .&#x2F;public</span><br></pre></td></tr></table></figure><p>在写作仓库执行第一轮自动部署：将本仓库内容（即public）同步到其他位置。<code>sync.yml</code>内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">name: Hexo CI - Sync</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">    - master</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  sync:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">    - uses: actions&#x2F;checkout@v2</span><br><span class="line">    # 用 rsync 将本仓库同步到vps</span><br><span class="line">    # oss用不着我再说了 网上一堆教程教「github action部署oss」</span><br><span class="line">    - name: Deploy via Rsync</span><br><span class="line">      uses: burnett01&#x2F;rsync-deployments@4.0</span><br><span class="line">      with:</span><br><span class="line">        # 仓库和vps只有一方有 而且不想每次同步时自动删除的文件&#x2F;文件夹（比如网站图标&#x2F;伪静态配置&#x2F;SSL证书验证文件）应该在这里排除掉</span><br><span class="line">        switches: -avzr --delete --exclude&#x3D;.git --exclude&#x3D;.github --exclude&#x3D;.well-known</span><br><span class="line">        path: .&#x2F;</span><br><span class="line">        # vps的位置 比如 &#x2F;www&#x2F;wwwroot&#x2F;thisisablog</span><br><span class="line">        remote_path: $&#123;&#123; secrets.DEPLOY_TARGET &#125;&#125;</span><br><span class="line">        # vps的地址 建议使用域名 更换ip重新解析就行不必再来仓库修改 注意不要加http&#x2F;https的协议前缀</span><br><span class="line">        remote_host: $&#123;&#123; secrets.DEPLOY_HOST &#125;&#125;</span><br><span class="line">        # 用户名 此处不再赘述如何新建git用户&#x2F;给予指定目录权限&#x2F;建立ssh登录密钥对 懒得折腾直接用root好了</span><br><span class="line">        remote_user: $&#123;&#123; secrets.DEPLOY_USER &#125;&#125;</span><br><span class="line">        # ssh key 私钥 公钥在你的vps上</span><br><span class="line">        remote_key: $&#123;&#123; secrets.DEPLOY_KEY &#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="在vps自建git仓库利用hooks自动部署"><a href="#在vps自建git仓库利用hooks自动部署" class="headerlink" title="在vps自建git仓库利用hooks自动部署"></a>在vps自建git仓库利用hooks自动部署</h3><p>仅供参考<br>（参加Github Action测试后就不再用这种憨憨方式了，但用肯定是还能用的）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">$ adduser git <span class="comment">#新建git用户</span></span><br><span class="line">$ mkdir -vp /home/git/.ssh <span class="comment">#新建.ssh文件夹</span></span><br><span class="line"><span class="comment">#「~/.ssh/id_rsa.pub」-&gt;「/home/git/.ssh/authorized_keys」把本地的公钥复制到服务器上</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># **很！重！要！**</span></span><br><span class="line">$ <span class="built_in">cd</span> /home/git &amp;&amp; chown -R git:git .ssh <span class="comment">#把.ssh文件夹的拥有者改为git用户</span></span><br><span class="line"><span class="comment"># 注意这里是个大坑</span></span><br><span class="line"></span><br><span class="line">$ vim /etc/ssh/sshd_config <span class="comment">#编辑sshd配置文件使能公钥授权登录</span></span><br><span class="line"><span class="comment"># 如下：</span></span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line">AuthorizedKeysFile .ssh/authorized_keys</span><br><span class="line"><span class="comment"># (可选)保险起见`systemctl restart sshd`或者直接`reboot`刷新sshd？</span></span><br><span class="line"></span><br><span class="line">$ mkdir -vp /var/repo &amp;&amp; <span class="built_in">cd</span> /var/repo <span class="comment">#建立仓库存放目录并切换到此目录</span></span><br><span class="line">$ git init --bare blog.git <span class="comment">#初始化裸仓库</span></span><br><span class="line">$ chown -R git:git blog.git <span class="comment">#把仓库的拥有者改为git用户</span></span><br><span class="line">$ vim /etc/passwd <span class="comment">#编辑git权限</span></span><br><span class="line"><span class="comment"># 把</span></span><br><span class="line">git:x:1003:1003::/home/git:/bin/bash</span><br><span class="line"><span class="comment"># 改成</span></span><br><span class="line">git:x:1003:1003::/home/git:/usr/bin/git-shell</span><br><span class="line"></span><br><span class="line">$ mkdir -vp /var/repo/blog.git/hooks <span class="comment">#建立钩子存放目录</span></span><br><span class="line">$ vim /var/repo/blog.git/hooks/post-receive <span class="comment">#编辑钩子</span></span><br><span class="line"><span class="comment"># 输入</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">git --work-tree=/www/wwwroot/blog --git-dir=/var/repo/blog.git checkout -f</span><br><span class="line"><span class="comment"># 并保存</span></span><br><span class="line"></span><br><span class="line">$ chmod +x /var/repo/blog.git/hooks/post-receive <span class="comment">#设置钩子执行权限</span></span><br></pre></td></tr></table></figure><p>编辑本地hexo项目的<code>_config.yml</code>文件末尾的<code>deploy</code>条目</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/zh-cn/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@yourserver.com:/var/repo/blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><h3 id="安装后台"><a href="#安装后台" class="headerlink" title="安装后台"></a>安装后台</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save hexo-admin</span><br></pre></td></tr></table></figure><h3 id="本地调试"><a href="#本地调试" class="headerlink" title="本地调试"></a>本地调试</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server --debug</span><br><span class="line">浏览器打开 http://localhost:4000/ 预览</span><br><span class="line">浏览器打开 http://localhost:4000/admin/ 进入后台界面</span><br></pre></td></tr></table></figure><h3 id="在线部署"><a href="#在线部署" class="headerlink" title="在线部署"></a>在线部署</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean &amp;&amp; hexo generate --deploy</span><br></pre></td></tr></table></figure><blockquote><p>使用Github Action就不用上面这种方式了，每次push都会自动部署</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT </tag>
            
            <tag> Git </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「开发」直播源抓取工具及其实现思路</title>
      <link href="/develop/Get-Stream-Link/"/>
      <url>/develop/Get-Stream-Link/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>下面是本话唠的废话，只想看方法往下面拖到实现思路一章，只想要成果拉到最后。</p></blockquote><p>我这个人比较孤独，为了避免自闭，我没事就会挂个直播在后台，漫无目的闲聊的人声可以给我一定的安全感。<br>除了听个响之外，喜欢的主播整活了也可以顺手切过去看。</p><a id="more"></a><p>但这样就有一个问题，长期在后台挂着直播，对我手上这台 5年高龄的渣本 来说不能算毫无压力，而是20%左右的CPU占用和1/8的内存占用。<br>并不算多，但如果我后台还挂着别的东西，多开几个狂吃内存的IDE（比如PhpStorm啦、PyCharm啦、GoLand啦），再开几个游戏……<br>当然Chrome肯定要分一部分锅，不过除此之外嘛，有确说实，直播网站就是卡。</p><p>原因包括但不限于：</p><ul><li>推流解码</li><li>弹幕渲染</li><li>见缝插针永远关不干净的广告</li><li>你可能一辈子都用不到的花里胡哨的功能</li><li>屏蔽不完的礼物特效</li><li>你甚至都没有意识到它存在的，未知用途悄悄运行的神秘JS</li></ul><h3 id="关于弹幕"><a href="#关于弹幕" class="headerlink" title="关于弹幕"></a>关于弹幕</h3><p>看过比赛应该都发现了这一点，比赛的时候是最明显的，不是我主观臆测，弹幕数据量大到一个程度后就是会卡。<br>而且现在十条弹幕九条复读机，夸张吗？我不觉得，我觉得这个比例太保守了。<br>尤其现在出了弹幕热词这个功能，满屏牛头不对马嘴的弹幕真的极度影响观赏体验。<br>其实要说理解的话完全可以理解，就三个字，人从众。<br>一个轻度的观众，可能连着看一年都不会发几条弹幕；退一步说，即使他get到某个点想发条弹幕，看着空荡荡的屏幕心里也会隐隐有抗拒感。<br>这年头应该没多少人愿意做出头鸟吧，即便是在（一般来说算是）匿名发言的网络上。</p><h3 id="关于弹幕热词"><a href="#关于弹幕热词" class="headerlink" title="关于弹幕热词"></a>关于弹幕热词</h3><p>弹幕热词盘活了弹幕池，一方面不用打字（构思表达）只需要点一下就够了，另一方面大量已存在的弹幕利用从众心理降低了大部分观众对发弹幕的抗拒感。<br>这个功能降低了观众发弹幕的心理建设成本，相当于提高了观众的活跃度和互动程度；换成资本方的话说，=用户粘性=流量=利润。<br>对主播来说，=增加互动=粉丝转化率（路转粉）=人气/热度（随便你怎么叫）=流量=利润。</p><blockquote><p>我不是说主播都是向钱看，关键在于但凡是个全职主播，这就是他营生的饭碗。<br>人不恰饭，就会死。<br>不过你要说他给别人带来快乐之后，自己有没有得到快乐，有没有成就感，那肯定是有的。<br>多多少少都会有的，即使他是莫得感情的恰饭机器。</p></blockquote><p>对观众来说，=参与感=快乐。弹幕互动就是直播最大的乐趣，不承认就是不客观。<br>所以这其实是三方三赢的一件事。</p><p>但是我拒绝。理解是可以理解，但我不接受，我不是这个功能的受众。<br>对我个人来说，所谓的热词弹幕是污染弹幕池，是严重影响我观赏体验的垃圾玩意。<br>我可能不是真的洁癖，但我是真的矫情。<br>弹幕给爷爬。</p><h3 id="关于广告"><a href="#关于广告" class="headerlink" title="关于广告"></a>关于广告</h3><p>没深入了解过营销，张口就来的门外汉随便说说。<br>哪里有广告？没看到啊？<br>广告分为硬广和软广没问题吧，软广包含推广和引流没问题吧。<br>哪里都是广告。<br>如果这里有一个东西，你不是冲着它来的，而且它和你来这里的目的没有任何关联，它就是广告。</p><h3 id="关于花里胡哨的功能"><a href="#关于花里胡哨的功能" class="headerlink" title="关于花里胡哨的功能"></a>关于花里胡哨的功能</h3><p>一个直播间，光签到可能就有四五个入口，我真的搞不懂到底在签个什么鬼。</p><h3 id="关于礼物特效"><a href="#关于礼物特效" class="headerlink" title="关于礼物特效"></a>关于礼物特效</h3><p>我讨厌一切礼物<strong>特效</strong>，会喜欢的大概只有主播和送礼物的水友本人吧。主播是因为真的有收益和劳动成果得到了认同，水友是优越感和为爱好做出贡献后的自我满足（一时想不到更委婉的措辞，如有冒犯不好意思）。<br>我来看直播，我只在乎节目效果，主播收了多少礼我又没有一毛钱分成。<br>主播火不火，是他自己该操心的问题。好看不火，我可能会惋惜，如果举手之劳就能帮到主播，顺手帮个小忙，与人为善，没毛病。<br>但我不会发挥我本来就不多的主观能动性去身体力行地为，说白了，素未谋面的陌生人，不求回报地奉献。</p><blockquote><p>同理，我一直无法理解追星。当然了，我没办法理解别人，也不能奢求别人理解我。世界这么大，各行其是，互不干扰，挺好的。<br>主播和明星对粉丝来说，本质上都是相隔千里的陌生人。你喜欢的<strong>绝对</strong>不可能是其本人，而是对方在屏幕上塑造的人设。<br>至于广为流传的人设和本人的人格是否一致，有多少一致，是另外一说。<br>我特别喜欢斗鱼7号房秋老师的一句话：「网上才有qyqx，现实里没有」。</p></blockquote><p>话说回来，打赏礼物是当事人你情我愿的事情，第三方肯定没有置喙的余地。<br>但你非要逼着我看，这算个什么事。尤其是从上方飘过去的特别醒目的那种特效，真的烦。<br>退一万步讲，你要是本直播间的礼物就算了，你别的直播间的礼物也跑这里发特效，几个意思啊。<br>虎牙甚至长期有这种全站广播，虎牙做到流水第一的直播平台，星秀收益压了游戏一头，也许就是靠这个吧。<br>拿钱砸排场的纨绔就是比我们破看游戏的赏得多，没什么好说的。<br>可能刷喇叭是真的比较爽吧，社交游戏，社交游戏。（拱手）<br>转念一想也是，炫富就是快乐，不见得优越感能带来多少快乐，反正有钱是真的快乐。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>综上所述，我希望有纯粹的直播观看体验，目前最好的解决方案是直接用本地播放器播放直播源。</p><blockquote><p>那我为什么不看直接看录播？我懒得换p。</p></blockquote><h2 id="思路实现"><a href="#思路实现" class="headerlink" title="思路实现"></a>思路实现</h2><p>播放器没什么好说的，我也是用的PotPlayer。<br>虽然作者吃相，额，有些不雅（这人已经被钉在开源界的耻辱柱上了，前略，天国的KMPlayer），不过近几年的PotPlayer对一般群众来说，各方面综合是最好用的（至少比大部分内置播放器好用吧）。<br>如果你是爱好影音播放的发烧友，「VLC天下第一」「MPC-HC是天」之类一套一套的肯定比我懂得多，也没必要搁这听我这个半吊子吹牛批。</p><p>重点就在直播源上了。</p><h3 id="斗鱼"><a href="#斗鱼" class="headerlink" title="斗鱼"></a>斗鱼</h3><p><strong>十分感谢</strong><br>「<a href="https://www.52pojie.cn/home.php?mod=space&uid=588295" target="_blank" rel="noopener">lyntal</a>分享的<a href="https://www.52pojie.cn/forum.php?mod=redirect&goto=findpost&ptid=1021094&pid=27896671" target="_blank" rel="noopener">现成接口</a>」和「<a href="https://www.sinsyth.com/" target="_blank" rel="noopener">西恩赛斯</a>提供的斗鱼解析API」免去了我再写一遍爬虫的工作，虽然写轮子很爽，但重复劳动太多就不爽了<br>以及「<a href="https://www.52pojie.cn/thread-957638-1-1.html" target="_blank" rel="noopener">【直播源综合教程】斗鱼直播真实地址解析，直播源抓取方法，自抓直播源分享长期有效</a>」一文详细解释了斗鱼长期直播源的解析方式</p><p>首先我们访问<code>https://web.sinsyth.com/lxapi/douyujx.x?roomid=斗鱼直播间房间号</code>获得json格式的解析结果，如果房间未开播则返回：</p><blockquote><p>本文大部分代码为了方便阅读已做格式化处理，可能与原始数据有出入，下同。</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"strjson"</span>,</span><br><span class="line">    <span class="attr">"Rendata"</span>: &#123;</span><br><span class="line">        <span class="attr">"tname"</span>: <span class="string">"Unbroadcast"</span>,</span><br><span class="line">        <span class="attr">"time"</span>: <span class="string">"当前时间戳"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"info"</span>: <span class="string">"Live broadcasting has been closed"</span>,</span><br><span class="line">    <span class="attr">"state"</span>: <span class="string">"NO"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>得，不用抓取了，抓了无法播放也没用。</p><p>如果房间是正常直播状态，则返回（用杨树直播间举个例子）：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"type"</span>:<span class="string">"strjson"</span>,<span class="attr">"Rendata"</span>:&#123;<span class="attr">"media_type"</span>:<span class="string">"live"</span>,<span class="attr">"data"</span>:&#123;<span class="attr">"vid"</span>:<span class="string">"703747"</span>,<span class="attr">"roomName"</span>:<span class="string">"\u5c0f\u6811\u82d7 \u65b0\u5e74\u5feb\u4e50\uff01\uff01(\uff3e\uff0d\uff3e)V"</span>,<span class="attr">"nickname"</span>:<span class="string">"\u4e3b\u64ad\u6768\u6811"</span>,<span class="attr">"avatar"</span>:<span class="string">"https:\/\/apic.douyucdn.cn\/upload\/avanew\/face\/201801\/30\/11\/e4a5a931f99fe8b6224d0fe1a54311cc_big.jpg?rltime"</span>,<span class="attr">"roomimg"</span>:<span class="string">"https:\/\/rpic.douyucdn.cn\/asrpic\/200128\/703747_2053.png\/dy1"</span>,<span class="attr">"roominfo"</span>:<span class="string">"\u65e5\u62f1\u4e00\u5352\u65e0\u6709\u5c3d\uff0c\u529f\u4e0d\u5510\u6350\u7ec8\u5165\u6d77 \u6bcf\u5929\u56db\u70b9\u76f4\u64ad \u5468\u4e09\u4f11\u606f"</span>&#125;,<span class="attr">"link"</span>:<span class="string">"http:\/\/hdl1a.douyucdn.cn\/live\/703747rziSwf5jUt_2000p.flv?wsAuth=dc8269b82ed106a0df2a093be9cecca2&amp;token=cpn-androidmpro-0-703747-9df7fb858f23299ab8c9d917322c0ab70297c47401386b27&amp;logo=0&amp;expire=0&amp;did=0921a95fc22478805d8c161bf3db6378&amp;origin=all&amp;vhost=play2"</span>,<span class="attr">"time"</span>:<span class="number">1580216008</span>&#125;,<span class="attr">"info"</span>:<span class="string">"Check-OK"</span>,<span class="attr">"state"</span>:<span class="string">"SUCCESS"</span>&#125;</span><br></pre></td></tr></table></figure><p>这段有点长，格式化后用图片展示：<br><img src="https://i.loli.net/2020/01/28/6EBa17RNXS2gYrt.png" alt="斗鱼解析API.png"><br>原数据中的中文是unicode编码，图中是转码后的结果。</p><p>可以看到包括主播名字/头像、直播间名字/公告/即时画面等信息。<br>我们需要的只是<code>$response-&gt;Rendata-&gt;link</code>这个字段的值，在本例中，就是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;hdl1a.douyucdn.cn&#x2F;live&#x2F;703747rziSwf5jUt_2000p.flv?wsAuth&#x3D;dc8269b82ed106a0df2a093be9cecca2&amp;token&#x3D;cpn-androidmpro-0-703747-9df7fb858f23299ab8c9d917322c0ab70297c47401386b27&amp;logo&#x3D;0&amp;expire&#x3D;0&amp;did&#x3D;0921a95fc22478805d8c161bf3db6378&amp;origin&#x3D;all&amp;vhost&#x3D;play2</span><br></pre></td></tr></table></figure><p>这个url（我这里贴出来的是转义后的结果，所以没有反斜杠了），就是时间加密后的临时直播源。<br>我们要做的是把他做成——不敢说永久——至少长期有效的直播源，免得没看一会又要重新抓取。</p><ol><li>首先把<code>hdl1a</code>（不一定是这个，也可能是<code>hl1a</code>或者别的什么，总之换掉它）这个加密后的二级域名替换成斗鱼的真实cdn域名<code>tx2play1</code></li><li>找到<code>.flv?</code>这个字段，截断它，后面是根据时间加密的参数，全部删掉</li><li><code>2000p</code>是清晰度设置，2200年了，还有谁家是4M小水管吗，没有吗，没有那就看原画，删掉它</li></ol><p>长期直播源get。</p><p>现在回顾一下，我们做了什么？<br>其实就是把中间<code>.douyucdn.cn/live/703747rziSwf5jUt</code>这段取出来，前面加上<code>http://tx2play1</code>，后面加<code>.m3u8</code>，拿直播源，就这么简单。（当然是建立在前人的成果上，再次感谢<a href="https://www.sinsyth.com/" target="_blank" rel="noopener">西恩赛斯</a>提供的接口和<a href="https://www.52pojie.cn/home.php?mod=space&uid=889200" target="_blank" rel="noopener">zhmxubing</a>提供的解析思路）<br>需要特别注意的一点，<strong>最后拿到的网址一定是HTTP而不是HTTPS协议</strong>。（只有B站的直播源是HTTPS，有钱就是可以为所欲为）</p><h3 id="虎牙"><a href="#虎牙" class="headerlink" title="虎牙"></a>虎牙</h3><p><strong>十分感谢</strong><br>「<a href="https://www.52pojie.cn/thread-986101-1-1.html" target="_blank" rel="noopener">虎牙直播源提取/分类/可选清晰度/开源[更新] </a>」提供的思路（.e源码是二进制真的秀，为了看源码我还专门装了易语言5.8，进去一堆箭头把我看傻了）<br>然后我照着在服务器上用PHP实现了一遍，这里贴出来，有兴趣自行查看，没兴趣请跳过这段代码往下看，后来我找到了一种更便捷的方法。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检测开播状态(通过直播间页面content暴力搜索唯一的state字段) 简单粗暴 不优雅 但有效</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isHuyaLiving</span><span class="params">($room_id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $curl = <span class="keyword">new</span> Curl();</span><br><span class="line">    $curl-&gt;setOpt(CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);</span><br><span class="line">    $curl-&gt;get(<span class="string">"https://www.huya.com/"</span> . $room_id);</span><br><span class="line">    $flag_content = ltrim(stristr($curl-&gt;response, <span class="string">"\"state\":\""</span>), <span class="string">"\"state\":\""</span>);</span><br><span class="line">    $curl-&gt;close();</span><br><span class="line">    <span class="keyword">return</span> stristr($flag_content, <span class="string">"\""</span>, <span class="keyword">true</span>) == <span class="string">"ON"</span> ? <span class="keyword">true</span> : <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//同理 获取整个直播间页面之后遍历内容</span></span><br><span class="line"><span class="comment">//下面整段代码只是为了抓取一万个接口中的一万条数据中的其中一条</span></span><br><span class="line"><span class="comment">//现在大家对「爬虫为什么这么吃资源」应该有形象的认识了</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">parseHuya</span><span class="params">($room_id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;isHuyaLiving($room_id)) &#123;</span><br><span class="line">        $curl = <span class="keyword">new</span> Curl();</span><br><span class="line">        $curl-&gt;setOpt(CURLOPT_FOLLOWLOCATION, <span class="number">1</span>);</span><br><span class="line">        $curl-&gt;get(<span class="string">"https://www.huya.com/"</span> . $room_id);</span><br><span class="line">        $info_content = ltrim(stristr($curl-&gt;response, <span class="string">"var hyPlayerConfig = "</span>), <span class="string">"var hyPlayerConfig = "</span>);</span><br><span class="line">        $curl-&gt;close();</span><br><span class="line">        $json_str = stristr($info_content, <span class="string">"&#125;;"</span>, <span class="keyword">true</span>) . <span class="string">"&#125;"</span>;</span><br><span class="line">        $hyPlayerConfig = json_decode($json_str, <span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//抓取真实推流url</span></span><br><span class="line">        <span class="comment">//注意 拿到的直播源是个数组 可能是为了有比赛时「同一直播间不同第一视角」那种需求</span></span><br><span class="line">        $streams = $hyPlayerConfig[<span class="string">'stream'</span>][<span class="string">'data'</span>][<span class="number">0</span>][<span class="string">'gameStreamInfoList'</span>];</span><br><span class="line">        <span class="comment">//按理我们也应该用一个数组存 这里没用是暂时没那个需求 什么事都不可能一蹴而就的 先跑起来</span></span><br><span class="line">        $url = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//但处理还是当成数组处理的 方便以后二次开发</span></span><br><span class="line">        <span class="keyword">foreach</span> ($streams <span class="keyword">as</span> $k =&gt; $stream) &#123;</span><br><span class="line">            <span class="comment">//遍历所有直播源并处理成长期直播源</span></span><br><span class="line">            <span class="keyword">if</span> ($stream[<span class="string">'sCdnType'</span>] == <span class="string">"AL"</span>) &#123;</span><br><span class="line">                $url = $stream[<span class="string">'sFlvUrl'</span>] . <span class="string">"/"</span> . $stream[<span class="string">'sStreamName'</span>] . <span class="string">"."</span> . $stream[<span class="string">'sFlvUrlSuffix'</span>] . <span class="string">"?"</span>;</span><br><span class="line">                $url = str_replace(<span class="string">"amp;"</span>, <span class="string">""</span>, $url);</span><br><span class="line">                $url = str_replace(<span class="string">"backsrc"</span>, <span class="string">"huyalive"</span>, $url);</span><br><span class="line">                $url = str_replace(<span class="string">"al.flv"</span>, <span class="string">"al.hls"</span>, $url);</span><br><span class="line">                $url = str_replace(<span class="string">"aldirect.flv"</span>, <span class="string">"aldirect.hls"</span>, $url);</span><br><span class="line">                $url = str_replace(<span class="string">"tx.flv"</span>, <span class="string">"tx.hls"</span>, $url);</span><br><span class="line">                $url = str_replace(<span class="string">".flv?"</span>, <span class="string">".m3u8"</span>, $url);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//这个循环出来 如果有多个直播源的话 $url应该是最后一个直播源</span></span><br><span class="line">        $raw_data = $hyPlayerConfig[<span class="string">'stream'</span>][<span class="string">'data'</span>][<span class="number">0</span>][<span class="string">'gameLiveInfo'</span>];</span><br><span class="line">        <span class="comment">//打包解析结果 把抓取到的直播间信息尽量包装成斗鱼接口那样 保持接口的一致性</span></span><br><span class="line">        $parse_result = [<span class="string">"type"</span> =&gt; <span class="string">"strjson"</span>, <span class="string">"Rendata"</span> =&gt; [<span class="string">"media_type"</span> =&gt; <span class="string">"live"</span>, <span class="string">"data"</span> =&gt; [</span><br><span class="line">            <span class="string">"roomName"</span> =&gt; $raw_data[<span class="string">'roomName'</span>],</span><br><span class="line">            <span class="string">"nickname"</span> =&gt; $raw_data[<span class="string">'nick'</span>],</span><br><span class="line">            <span class="string">"avatar"</span> =&gt; $raw_data[<span class="string">'avatar180'</span>],</span><br><span class="line">            <span class="string">"roomimg"</span> =&gt; $raw_data[<span class="string">'screenshot'</span>],</span><br><span class="line">            <span class="string">"roominfo"</span> =&gt; $raw_data[<span class="string">'introduction'</span>]</span><br><span class="line">        ], <span class="string">"link"</span> =&gt; $url, <span class="string">"time"</span> =&gt; time()], <span class="string">"info"</span> =&gt; <span class="string">"Check-OK"</span>, <span class="string">"state"</span> =&gt; <span class="string">"SUCCESS"</span>];</span><br><span class="line">        <span class="comment">//存入数据库 略</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $parse_result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>十分感谢</strong><br>「<a href="https://github.com/wbt5/real-url" target="_blank" rel="noopener">real-url</a>」和「<a href="https://github.com/weimo123/live-real-url" target="_blank" rel="noopener">live-real-url</a>」两个开源项目提供的更为便捷的思路</p><p>两个项目关于获取虎牙直播源的逻辑非常近似，可以视为同一种思路。<br>我们先看Python版：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_real_url</span><span class="params">(rid)</span>:</span></span><br><span class="line">    room_url = <span class="string">'https://m.huya.com/'</span> + str(rid)</span><br><span class="line">    header = &#123;</span><br><span class="line">    <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>,</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Mobile Safari/537.36'</span></span><br><span class="line">    &#125;</span><br><span class="line">    response = requests.get(url=room_url, headers=header)</span><br><span class="line">    pattern = <span class="string">r"hasvedio: '([\s\S]*.m3u8)"</span></span><br><span class="line">    result = re.findall(pattern, response.text, re.I)</span><br><span class="line">    <span class="keyword">if</span> result:</span><br><span class="line">        real_url = result[<span class="number">0</span>]</span><br><span class="line">        real_url = re.sub(<span class="string">r'_1200[\s\S]*.m3u8'</span>, <span class="string">'.m3u8'</span>, result[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        real_url = <span class="string">'未开播或直播间不存在'</span></span><br><span class="line">    <span class="keyword">return</span> real_url</span><br></pre></td></tr></table></figure><p>再看JAVA版：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Pattern PATTERN = Pattern.compile(<span class="string">"(?&lt;=hasvedio: ')(.*\\.m3u8)"</span>);</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">get_real_url</span><span class="params">(String rid)</span> </span>&#123;</span><br><span class="line">    String room_url = <span class="string">"https://m.huya.com/"</span> + rid;</span><br><span class="line">    String response = HttpRequest.create(room_url)</span><br><span class="line">            .setContentType(HttpContentType.FORM)</span><br><span class="line">            .putHeader(<span class="string">"User-Agent"</span>, <span class="string">"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Mobile Safari/537.36"</span>)</span><br><span class="line">            .get().getBody();</span><br><span class="line">    Matcher matcher = PATTERN.matcher(response);</span><br><span class="line">    <span class="keyword">if</span> (!matcher.find()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    String result = matcher.group();</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isBlank(result)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"未开播或直播间不存在"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result.replaceAll(<span class="string">"_\\d&#123;3,4&#125;\\.m3u8"</span>, <span class="string">".flv"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同样都是利用<code>User-Agent</code>伪装手机去访问手机版虎牙，然后正则匹配<code>hasvedio</code>这个字段的值，不用费老半天劲再组装，匹配出来直接就是直播源。<br>而且我猜测手机版页面应该是比电脑版要小的，那就相当于提高了处理效率，减少了响应时间。<br>提升的这部分也许没办法直观感受到，但打个比方，现在是爬一个直播源，假如我们要爬某个分区前一百个直播源呢，两百个呢，所有分区呢？</p><p>当然前一种思路我亲手测试也是可行的，解题思路永远不嫌少，这个方法在这里不是最优解，换个问题未必也不是。</p><h3 id="Bilibili"><a href="#Bilibili" class="headerlink" title="Bilibili"></a>Bilibili</h3><p>B站的直播源就很神奇了，抓取难度处于困难和简单的叠加态。为什么这么说？</p><p>假如现在你就是爬虫（人形爬虫，听起来很<del>好ch</del> 可怕的样子），虽然你没有任何编程基础，你要做的是：<br>（不必照着做，如果只是想要B站直播源，后面有更简单的方式，这里是介绍一种比较通用的、手动获取直播源的方式）</p><ol><li>打开你要抓取直播源的直播间</li><li>F12打开「开发者工具」</li><li>切到「Network」标签</li><li>看到左上角的红点了吗，不是它，它的右边有个「Clear」按钮，点一下清空之前记录的数据</li><li>F5刷新</li><li>等待10s左右，直到时间轴图像里有「长长的一条蓝线贯通左右」</li><li>拖动鼠标选中一段「只有这条蓝线」的区域</li><li>下面出现数个XHR，不用在意XHR是什么，滚轮滚到最上面，有一个<code>live_</code>开头的</li><li>点击它，弹出详情，你第一眼看到的，也就是「Header」标签的「General」项的「Request URL」，内容类似<code>https://cn-jswx2-cmcc-live-02.bilivideo.com/live-bvc/xxxxxx/live_xxxx_xxxxxxx_xxxx.flv?后面是一堆参数略</code></li><li>只取<code>live_xxxx_xxxxxxx_xxxx</code>这一段，在前面加<code>https://cn-hbxy-cmcc-live-01.live-play.acgvideo.com/live-bvc/</code>，后面加<code>.m3u8</code>，完成</li></ol><p>很简单吧。</p><p>现在换成服务器自动化流程。<br>我做不到。</p><p>故技重施，curl直播间页面，B站只会给「出错了」的提示页面。<br>使用B站的官方接口，获取开播状态没什么问题，但是，两个接口获取到的<code>durl</code>（直播源）都是<code>null</code>。<br>header改了个遍，<code>User-Agent</code>改成手机，改成正经浏览器，因为本地的postman都能拿到数据我甚至假装过postman。<br>当然IP和来源都伪装过了，但就是拿不到，这玩意debug都很难找到方向。<br>不太清楚B站的反爬在业界内算不算强的，不过打我这个菜鸡是绰绰有余了。<br>所以目前我自己的API没有实现b站的直播源。<br>查了很多资料得知大概率是IP问题，因为一些国外IP也是同样的情况（拿不到durl这个字段）。<br>所以也许不是反爬有多厉害，是IP黑名单强？<br>我的腾讯云装的windows，于是我把脚本拿去服务器上简单试了一下。<br>同一时间同一直播间，本地没有任何问题，服务器上的会卡在某个阶段，具体哪个步骤懒得debug了。<br>我的网站放在阿里云，刚刚说过了也取不到关键值。<br>初步猜测重要数据接口把来自主流机房的IP的拉黑了，这部分有空我会持续跟进。<br>虽然我买不起群晖，但我可以把吃灰的树莓派翻出来啊。<br>实在没办法了，老老实实上代理IP池也不是不行。<br>只要你有一颗爱折腾的心，办法总比困难多。<br>说话回来，这样大家对「大型爬虫为什么都要上分布式」也有一个形象的认识了，一是提高负载能力，二是反反爬。</p><p>当然我们本地PC，家用的宽带，本地的软件，这样的情况直接从B站官方接口拿数据是没问题的。<br>访问<code>https://api.live.bilibili.com/room/v1/Room/room_init?id=直播间房间号</code>，返回的json-&gt;data-&gt;live_status就是当前直播状态，1开播0没有，我们叫它接口1。<br>访问<code>https://api.live.bilibili.com/room/v1/Room/playUrl?cid=直播间房间号&amp;platform=h5&amp;otype=json&amp;quality=4</code>，返回的json-&gt;data-&gt;durl就是各个画质的直播源，我们叫它接口2。<br>访问<code>https://api.live.bilibili.com/xlive/web-room/v1/index/getRoomPlayInfo?room_id=直播间房间号&amp;play_url=1&amp;mask=1&amp;qn=0&amp;platform=web</code>，可以看到返回的json-&gt;data里既有<code>live_status</code>这个字段，还有个<code>play_url</code>字段，<code>durl</code>也在这个<code>play_url</code>里面，我们叫它接口3。<br>对比三个接口的数据，我们很容易就能得出「接口3」就是「接口1」+「接口2」的结论。<br>（其实从<code>room_init</code>、<code>playUrl</code>、<code>getRoomPlayInfo</code>三个域名上就能初步猜测，不过大胆假设完还要小心求证嘛）</p><p>然后就看你的需求了，如果你只是想做一个开播提醒工具，tg机器人也好，qq机器人也好，微信公众号也好，邮件也好甚至短信也好，使用接口1就行了（反正接口2、3也没有更多的直播间标题等信息，还是要继续找其他接口）。</p><p>如果你想做一个开播查询工具，开播了就放没播就提示的话，用接口3避免了两次请求两个接口的繁琐步骤。</p><p>如果你只是单纯的想要直播源，打开浏览器访问接口2（<code>https://api.live.bilibili.com/room/v1/Room/playUrl?cid=直播间房间号&amp;platform=h5&amp;otype=json&amp;quality=4</code>），Ctrl + F 搜索<code>live_</code>，有四个结果（不用选，四个都是一样的），取<code>live_</code>到<code>.m3u8</code>这一段，在前面加上<code>https://cn-hbxy-cmcc-live-01.live-play.acgvideo.com/live-bvc/</code>，B站直播源get。<br>而且从「即使直播间没开播，接口2依然能够获取durl（接口3不行durl值为null）」这个现象来看，B站的直播源很可能是接近永久（没事不会变化）的长期直播源。<br>B站直播整活不太行，24小时直播的影视频道还是挺有价值的，当成没广告的电影台看没什么问题。而且类型相对集中，比方说你喜欢恐怖片，有些直播间就只放恐怖片。<br>电视剧、相声、电台同理，虽然不知道现在还有没有。</p><h2 id="成品"><a href="#成品" class="headerlink" title="成品"></a>成品</h2><p>好了，三个直播站的直播源获取方式都介绍完了，那么有没有一个可以检测三个站开播状态，如果开播则返回直播源，并且既可以选择直接用指定的本地播放器播放，也可以选择将直播源生成asx文件的小工具呢？<br>巧了，我这里还真有一个，免费（废话都开源了），安全可靠，兼容性强。</p><p><img src="https://i.loli.net/2020/01/30/5Ai14H2kRKf3VQu.png" alt="启动截图.png"></p><p><img src="https://i.loli.net/2020/01/30/KJ48Uc5g6uvGiza.png" alt="获取直播源成功.png"></p><p>用powershell写的，只要你是win10，不需要安装任何依赖，点开就能跑。<br>本质是脚本文件，用编辑器打开就能看到所有源码，不放心的话用电子显微镜一行一行检查都行。</p><p>本来是纯命令行，想想都用powershell写了，不说上wpf，整两个对话框不过分吧。<br>写着写着发现本来就没几个的功能完全可以都搬到对话框里完成，用起来居然还意外的顺手（至少比命令行舒服多了）。</p><h3 id="食用方法"><a href="#食用方法" class="headerlink" title="食用方法"></a>食用方法</h3><p>具体的基本用法打开工具一看就懂，此处不再赘述。<br>（小工具虽然很简陋，也有勉强还算友好的用户界面。）<br>这里介绍一下进阶用法。</p><h4 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Start-Process</span> powershell <span class="literal">-ArgumentList</span> <span class="string">"D:\Workspace\Powershell\project\live\GetStreamLink.ps1 [播放器路径] [直播间地址]"</span></span><br><span class="line"><span class="comment"># 两个参数可以互换位置</span></span><br><span class="line">./GetStreamLink.ps1 [播放器路径] [直播间地址]</span><br><span class="line"><span class="comment"># 和</span></span><br><span class="line">./GetStreamLink.ps1 [直播间地址] [播放器路径]</span><br><span class="line"><span class="comment"># 都是一样的</span></span><br></pre></td></tr></table></figure><h4 id="默认直播间"><a href="#默认直播间" class="headerlink" title="默认直播间"></a>默认直播间</h4><p>如果你觉得用命令行还是太麻烦的话可以配置默认直播间。<br>初次运行脚本后会生成配置文件<code>config.xml</code>，里面的<code>&lt;default&gt;&lt;/default&gt;</code>标签里有对<code>&lt;url&gt;&lt;/url&gt;</code>，在里面填上直播间地址之后，如果不带参数地打开程序，就会自动指定配置文件里的网址，而不必再手动输入。</p><blockquote><p>缺点是目前只能指定一个，暂时没有做顺序列表的预定<br><del>site和room_id是为了以后扩展更方便的输入方式（比如只需要输直播间房间号）用的，现在没用</del> 2020.2.10已更新v1.0.4</p></blockquote><h4 id="asx文件的玩法"><a href="#asx文件的玩法" class="headerlink" title="asx文件的玩法"></a>asx文件的玩法</h4><p>asx其实就是一个功能特化的xml配置文件，它的默认打开方式是播放器，打开就会播放预先设定好的流媒体，乍一看非常神奇。<br>随便用什么文本编辑器打开这个文件，可以看到类似xml的结构，构成非常简单。<br>每个<code>&lt;entry /&gt;</code>标签里面都是一个独立的流媒体源，<code>&lt;title /&gt;</code>是名字，<code>&lt;ref /&gt;</code>里面是url，一看就明白。<br>所以你可以手动把<code>&lt;title /&gt;</code>改成你喜欢的名字，这样在播放器里哪个是哪个会更加一目了然。<br>另外同一个asx文件是可以包含若干个<code>&lt;entry /&gt;</code>标签的，也就是说你可以手动编辑文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;asx version&#x3D;&quot;3.0&quot;&gt;</span><br><span class="line">    &lt;entry&gt;</span><br><span class="line">        &lt;title&gt;直播间1&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;ref href&#x3D;&quot;#直播间1的url&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;entry&gt;</span><br><span class="line">    &lt;entry&gt;</span><br><span class="line">        &lt;title&gt;直播间2&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;ref href&#x3D;&quot;#直播间2的url&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;entry&gt;</span><br><span class="line">    &lt;entry&gt;</span><br><span class="line">        &lt;title&gt;电台3&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;ref href&#x3D;&quot;#电台3的url&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;entry&gt;</span><br><span class="line">&lt;&#x2F;asx&gt;</span><br></pre></td></tr></table></figure><p>接下来只需要打开一个文件，所有流媒体源都被添加进来了，之后可以在播放器里选择播放哪个。<br>最后，asx文件和一切脚本文件一样，写好内容之后保存退出，把<code>新建文本文档.txt</code>重命名成<code>现在你是直播源了.asx</code>也能用。</p><h3 id="下载方式"><a href="#下载方式" class="headerlink" title="下载方式"></a>下载方式</h3><p>「<a href="https://www.lanzous.com/b00z75oeb#密码52pojie" target="_blank" rel="noopener">蓝奏 密码52pojie</a>」「<a href="https://pan.baidu.com/s/1NvU8hYqptOiRE3qW6OzGqw#提取码52pj" target="_blank" rel="noopener">度盘 提取码52pj</a>」<br>「<a href="https://github.com/Cyanashi/AutoTaskScripts/blob/master/Common/GetStreamLink/GetStreamLink.ps1" target="_blank" rel="noopener">Github Repo Fragment</a>」复制粘贴到本地新建文本文档，修改后缀名为.ps1即可</p><p>欢迎反映BUG或提出改进意见~</p><p><strong>顺便提下用法，解压之后是.ps1文件（powershell脚本），win10当成exe直接执行就行</strong><br>控制台和提示框都是中文，输出信息也尽量详尽，我实在不知道还要怎么说明了……</p><blockquote><p>顺手编译了个exe版，因为编译后控制台输出中文乱码，暂时没找到解决方案，所以控制台没有输出<br>而且不会创建配置文件，所以会缺失部分进阶功能（好像对用不到进阶的用户来说反而更好了？）<br>仍然推荐ps1版，毕竟如果没有逆向基础，我在exe里塞了什么东西你也不知道<br>随便用个文本编辑器打开就看得到源码的东西用起来也更放心不是？</p></blockquote><p>Tips：<br>Q：我不需要原画，我就是喜欢2000/4000（码率？）画质，行不行？<br>A：行，<code>_2000p</code>这一段可以保留，也可以自行替换成<code>_4000p</code>（大概代表蓝光4M？）。<br>Q：一定要改成<code>.m3u8</code>格式才可以吗？<br>A：不是，它不是格不格式的问题，<del>它真的是那种</del> 它本质就是一个url，你把它看成一个网址，这个网址一直在推送视频流数据出来。现在我们拿个桶来接水，你用不一样的水龙头，它出来的水会不一样吗。你想改成<code>.xs</code>也好，就<code>.flv</code>不动也罢，水源已经找到了，想怎么接水你高兴就好。<br>Q：好乱啊，这么多启动方式如果同时使用，到底谁先谁后？<br>A：优先级从上至下：使用命令行参数启动，配置文件设置了default-&gt;url，启动时剪切板有合法的直播间地址，配置文件同时设置了default-&gt;site/room_id，前面说的都没有直接启动才会弹出输入框要求输入。</p><h3 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h3><p><strong>2020.1.31 更新v1.0.3</strong></p><ul><li>[新增]如果剪切板已有直播间地址，则打开工具后不再询问直接使用该地址进行解析</li><li>[修复]某些斗鱼直播间去掉清晰度后缀后会无法播放，因此获取到的斗鱼直播源统一加上<code>_4000p</code>的清晰度后缀</li><li>[优化]优化了提取直播间房间号的正则表达式</li><li>[优化]优化了部分判断逻辑 重命名部分函数使得含义更易理解</li><li>[优化]获取到的网页对象不再解析DOM树以提高运行效率（感谢<a href="https://www.52pojie.cn/forum.php?mod=redirect&goto=findpost&ptid=1096152&pid=29671211" target="_blank" rel="noopener">strmoon的建议</a>）</li></ul><p><strong>2020.2.10 更新v1.0.4</strong></p><ul><li>[新增]如果配置文件设定了直播站，可以直接输入房间号进行解析；如果配置文件同时设定了直播站和房间号，则直接进行解析</li><li>[新增]支持了网易cc的临时直播源，感谢「<a href="https://www.52pojie.cn/forum.php?mod=redirect&goto=findpost&ptid=1096152&pid=29771971" target="_blank" rel="noopener">天川天音的提议</a>」和「<a href="https://www.52pojie.cn/thread-1056116-1-1.html" target="_blank" rel="noopener">网易CC直播源抓取分析过程</a>」一文提供的思路</li><li>[修复]以各种方式启动后的直播间地址部分处理逻辑错误</li></ul><p><strong>2020.3.5 更新v1.0.5</strong></p><ul><li>[修复]虎牙直播源失效</li></ul><p><strong>2020.3.26 更新v1.0.6</strong></p><ul><li>[修复]顺手修复了之前有人提过的无法识别带空格的播放器路径（like <code>D:\Pot Player\PotPlayerMini64.exe</code>）的bug，这个确实蛮蠢的</li><li>今天整理仓库顺便加的就不更新了，日后有重要修复或新功能再更新</li></ul><p><strong>2020.4.6 重构v1.1.0</strong></p><ul><li>重构了整个脚本</li><li>[新增]现在可以设置成功获取直播源之后的默认行为了</li><li>[修复]重写了正则来优化输入校验逻辑 修复了以前解析后的url带直播站关键字会被错误地识别为直播间的问题</li><li>[优化]配置文件格式从臃肿的xml替换为简洁易懂的json</li><li>[优化]优化了读取输入的直播间优先级顺序 以期更符合常识逻辑</li><li>[优化]所有信息以utf8直接输出 不再做任何转换</li><li>[优化]容错处理 取消了侵入式的也许会令人迷惑的提示框 以期些许提升用户体验（现在只要弹框就是获取成功了 不成功不弹框）</li></ul><p>初始化直播间输入的优先级：</p><ol><li>先检查命令行是否有输入</li><li>剪切板是否有正确格式的直播间网址</li><li>是否配置了默认直播间url地址</li><li>是否配置了默认房间号（配置了就和默认直播站组装，如果直播站没有设置则默认为斗鱼）</li><li>启动脚本的时候以上都没有，要求用户输入</li></ol><h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><ul><li><input disabled="" type="checkbox"> 修复已知BUG：如果直播间处于下播后的轮播状态，可能会误判正在直播而尝试无效抓取（点名批评斗鱼暴雪直播间）</li><li><input disabled="" type="checkbox"> 新增<a href="https://www.52pojie.cn/home.php?mod=space&uid=620257" target="_blank" rel="noopener">tan01</a>建议的功能：支持自定义和保存直播间信息和直播源（个人暂时没这个需求懒得写hhh，闲下来再说）</li></ul>]]></content>
      
      
      <categories>
          
          <category> 开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 直播 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「运维」Hexo博客NexT主题启用Algolia搜索</title>
      <link href="/operation/Blog-Enable-Algolia-Search/"/>
      <url>/operation/Blog-Enable-Algolia-Search/</url>
      
        <content type="html"><![CDATA[<p>这玩意用起来有点小坑。但真要说也不是特别坑，主要是比较考验搜索能力。<br>目前遍布网络的都是比较旧的文档，参考价值相当有限。最后还是在 <a href="https://jixiaocan.github.io/2017/03/10/hello-hexo/#%E5%9C%A8-NexT-%E4%B8%BB%E9%A2%98%E4%B8%AD%E4%BD%BF%E7%94%A8-Algolia" target="_blank" rel="noopener">xiaocan的博客</a> 里找到了解决方案。</p><a id="more"></a><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>首先你要有一个Hexo博客，我配置时的版本是<code>Hexo v3.9.0</code>和<code>NexT.Pisces v7.6.0</code>。  </p><h3 id="第一步、新建Algolia账号"><a href="#第一步、新建Algolia账号" class="headerlink" title="第一步、新建Algolia账号"></a>第一步、新建Algolia账号</h3><p>我直接Github登录的，然而还是非得填完手机号地址公司名之类的不可，一路next到让你建立index才算注册完成。 </p><h3 id="第二步、新建index取名"><a href="#第二步、新建index取名" class="headerlink" title="第二步、新建index取名"></a>第二步、新建index取名</h3><p>取什么随便，但要记住这个名字，后面要用。  </p><h3 id="第三步、新建一个API-Key"><a href="#第三步、新建一个API-Key" class="headerlink" title="第三步、新建一个API Key"></a>第三步、新建一个API Key</h3><h4 id="重点来了"><a href="#重点来了" class="headerlink" title="重点来了"></a>重点来了</h4><p>那个什么「Search-Only API Key」，<strong>忘了它吧</strong>。我们直接新建一个API Key。  </p><p><img src="https://i.loli.net/2019/12/12/dUEgOIcSF8G5N6t.png" alt="新建API Key"><br>右上角「New API Key」，然后设置，除了第一行是描述，其他行都是「空着不填=无限制」，直接看最后一行。  </p><p><img src="https://i.loli.net/2019/12/12/YEzjlmGtkFPqcyW.png" alt="修改访问控制列表"><br>这个Key就是你的「API Key」。<br>也就是Hexo的 <code>_config.yml</code> 里填的<code>apiKey</code>，一会设置的环境变量<code>HEXO_ALGOLIA_INDEXING_KEY</code>，都是它。</p><h3 id="第四步、配置Hexo"><a href="#第四步、配置Hexo" class="headerlink" title="第四步、配置Hexo"></a>第四步、配置Hexo</h3><p>编辑<strong>Hexo</strong>的配置文件 <code>_config.yml</code>，新增</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">algolia:</span></span><br><span class="line">  <span class="attr">applicationID:</span> <span class="string">'你在 algolia 的 Application ID'</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="string">'第三步里新建的 API Key'</span></span><br><span class="line">  <span class="attr">adminApiKey:</span> <span class="string">'你在 algolia 的 Admin API Key'</span></span><br><span class="line">  <span class="attr">indexName:</span> <span class="string">'第二步里新建的 index 名字'</span></span><br><span class="line">  <span class="attr">chunkSize:</span> <span class="number">5000</span></span><br></pre></td></tr></table></figure><h3 id="第五步、安装-amp-配置-amp-运行hexo-algolia"><a href="#第五步、安装-amp-配置-amp-运行hexo-algolia" class="headerlink" title="第五步、安装&amp;配置&amp;运行hexo-algolia"></a>第五步、安装&amp;配置&amp;运行hexo-algolia</h3><p>打开一个Bash，推荐Git，运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save hexo-algolia</span><br><span class="line">$ <span class="built_in">set</span> HEXO_ALGOLIA_INDEXING_KEY=你的apiKey  <span class="comment"># 如果你不是 windows, 把 set 换成 export</span></span><br><span class="line"><span class="comment"># 这个 apiKey 就是第三步里新建的 API Key</span></span><br><span class="line">$ hexo algolia</span><br></pre></td></tr></table></figure><p>理论上就OK了，成功的回显参考</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INFO  [hexo-algolia] Testing HEXO_ALGOLIA_INDEXING_KEY permissions.</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  [hexo-algolia] 23 records to index (post, page).</span><br><span class="line">INFO  [hexo-algolia] Indexing chunk 1 of 1 (23 records)</span><br><span class="line">INFO  [hexo-algolia] Indexing done.</span><br></pre></td></tr></table></figure><p><strong>假如</strong>回显类似</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INFO  [hexo-algolia] Testing HEXO_ALGOLIA_INDEXING_KEY permissions.</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  [hexo-algolia] 22 records to index (post, page).</span><br><span class="line">INFO  [hexo-algolia] Indexing chunk 1 of 1 (22 records)</span><br><span class="line">ERROR [hexo-algolia] Not enough rights to update an object near line:1 column:630</span><br><span class="line">INFO  [hexo-algolia] Indexing done.</span><br></pre></td></tr></table></figure><p>请回到<a href="#重点来了">第三步</a>，确认你是否照着做了。</p><h3 id="插入吐槽"><a href="#插入吐槽" class="headerlink" title="插入吐槽"></a>插入吐槽</h3><blockquote><p><code>ERROR [hexo-algolia] Not enough rights to update an object near line</code>真的卡得我头大<br>搜到的教程文档基本上都是远古版本，偶尔提到了ACL（访问控制列表），好，我知道是ACL，那么ACL在哪呢<br>目前（19.12.12）algolia自动生成的<code>Search-Only API Key</code>是没办法修改ACL的，有且只有搜索权限<br><strong>必须新建一个API Key才能编辑ACL</strong></p></blockquote><p>主要坑就是这个ACL，还有就是「设定环境变量」这一步有些文档写得真的令人迷惑，后来才发现是一字不动抄的<a href="http://theme-next.iissnan.com/third-party-services.html#algolia-search" target="_blank" rel="noopener">iissnan的文档</a>。</p><h3 id="第六步、配置NexT"><a href="#第六步、配置NexT" class="headerlink" title="第六步、配置NexT"></a>第六步、配置NexT</h3><p>编辑<strong>NexT</strong>的配置文件 <code>_config.yml</code>，搜索<code>algolia_search</code>，根据自己情况修改</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Algolia Search</span></span><br><span class="line"><span class="comment"># For more information: https://www.algolia.com</span></span><br><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">10</span>  <span class="comment"># 每页的搜索结果</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">"从文章中搜索"</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">"没有搜索到关于 $&#123;query&#125; 的任何结果"</span></span><br><span class="line">    <span class="attr">hits_stats:</span> <span class="string">"在 $&#123;time&#125; ms 内搜索到了 $&#123;hits&#125; 个结果"</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> NexT </tag>
            
            <tag> Algolia </tag>
            
            <tag> 搜索 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《暗黑破坏神3》S19永恒之战野蛮人Build</title>
      <link href="/game/Diablo3-S19-Barbarian-Build/"/>
      <url>/game/Diablo3-S19-Barbarian-Build/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>刚开始玩，之后根据实际体验慢慢补充。<br>主要数据来自《<a href="http://bbs.d.163.com/?mod=viewthread&tid=173795038" target="_blank" rel="noopener">【血雨腥风】2.67荒原被动撕裂指南</a>》</p><a id="more"></a><h2 id="配装"><a href="#配装" class="headerlink" title="配装"></a>配装</h2><p>荒原6件套<br>废土之怒：2件套痛割dps增加500%延长至15s，4件套旋风斩引导和结束后3s获得50%减伤+手动痛风增伤两倍，6件套旋风斩生成龙卷风+旋风斩&amp;痛割增伤10000%</p><p>我也不知道为啥不要旋风斩技能伤，别问，问就是旋风斩有鸡儿伤害手动痛割走起</p><p><strong><a href="http://d.163.com/db/cn/49511/equipment/helm-of-the-wastes" target="_blank" rel="noopener">荒原头盔</a></strong> 6%暴击/力量/体能、物抗 次要恐惧直接分解<br><strong><a href="http://d.163.com/db/cn/49511/equipment/pauldrons-of-the-wastes" target="_blank" rel="noopener">荒原肩甲</a></strong> 15%技能伤/力量/8%CDR/全抗<br><strong><a href="http://d.163.com/db/cn/49511/equipment/cuirass-of-the-wastes" target="_blank" rel="noopener">荒原胸甲</a></strong> 15%技能伤/3孔/力量/体能/精英减伤、近减/物抗/远减/其他单抗<br><strong><a href="http://d.163.com/db/cn/49511/equipment/lamentation-70" target="_blank" rel="noopener">悲恸</a></strong> 150%特效/力量/体能/全抗、怒回<br><strong><a href="http://d.163.com/db/cn/49511/equipment/tasset-of-the-wastes" target="_blank" rel="noopener">荒原腿甲</a></strong> 2孔/力量/体能/全抗、物抗<br><strong><a href="http://d.163.com/db/cn/49511/equipment/sabaton-of-the-wastes" target="_blank" rel="noopener">荒原长靴</a></strong> 力量/体能/全抗、物抗<br><strong><a href="http://d.163.com/db/cn/49511/equipment/gauntlet-of-the-wastes" target="_blank" rel="noopener">荒原护手</a></strong> 10%暴击/50%暴伤/8%CDR/20%范围伤/力量 没有四攻手双暴也能用，要啥自行车<br><strong><a href="http://d.163.com/db/cn/49513/equipment/morticks-brace" target="_blank" rel="noopener">莫提克的手腕</a></strong> 20%物理伤/6%暴击/力量/全抗&amp;远减或体能&amp;物抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-flavor-of-time-70" target="_blank" rel="noopener">时光流韵</a></strong> 孔/20%物理伤/10%暴击/100%暴伤/均伤/力量<br><strong><a href="http://d.163.com/db/cn/49513/equipment/convention-of-elements-70" target="_blank" rel="noopener">全能法戒</a></strong> 200%特效/孔/8%暴击/50%暴伤/均伤/8%CDR 天生暴击和孔，暴伤/均伤/CDR三选二，暴伤和均伤优先<br><strong><a href="http://d.163.com/db/cn/49513/equipment/band-of-might-70" target="_blank" rel="noopener">力量指环</a></strong> 80%特效/孔/8%暴击/8%CDR/50%暴伤/均伤</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/little-rogue" target="_blank" rel="noopener">小流氓</a></strong> &amp; <strong><a href="http://d.163.com/db/cn/49513/equipment/the-slanderer" target="_blank" rel="noopener">挑衅者</a></strong><br><strong><a href="http://d.163.com/db/cn/49513/equipment/bulkathoss-warrior-blood-70" target="_blank" rel="noopener">布尔凯索的勇士之血</a></strong> &amp; <strong><a href="http://d.163.com/db/cn/49513/equipment/bulkathoss-solemn-vow-70" target="_blank" rel="noopener">布尔凯索的庄严之誓</a></strong><br>对剑双刀二选一，10%ED/力量/体能，选一把武器出CDR，保证全身4-5条CDR</p><h2 id="萃取"><a href="#萃取" class="headerlink" title="萃取"></a>萃取</h2><p><strong><a href="http://d.163.com/db/cn/49511/equipment/ambos-pride-70" target="_blank" rel="noopener">安铂的骄傲</a></strong> 核心，旋风斩出痛割<br><strong><a href="http://d.163.com/db/cn/49511/equipment/mantle-of-channeling-70" target="_blank" rel="noopener">导能披肩</a></strong> 引导增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/obsidian-ring-of-the-zodiac-70" target="_blank" rel="noopener">黄道黑曜石之戒</a></strong> 实际上是全能/黄道/力量指环三个戒指里剩下没戴的那个萃取</p><h3 id="宝石"><a href="#宝石" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-trapped" target="_blank" rel="noopener">困者之灾</a></strong> 稳定增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/taeguk" target="_blank" rel="noopener">太极石</a></strong> 引导增伤/叠甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-stricken" target="_blank" rel="noopener">受罚者之灾</a></strong> 杀王<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（全抗），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h2 id="技能"><a href="#技能" class="headerlink" title="技能"></a>技能</h2><p><strong><a href="http://d.163.com/db/cn/49513/skill/whirlwind" target="_blank" rel="noopener">旋风斩</a></strong> <code>沐血旋风</code> 核心，转转乐<br><strong><a href="http://d.163.com/db/cn/49513/skill/ancient-spear" target="_blank" rel="noopener">上古之矛</a></strong> <code>怒掷</code> 拉怪<br><strong><a href="http://d.163.com/db/cn/49513/skill/rend" target="_blank" rel="noopener">痛割</a></strong> <code>感染</code> 主要输出，不用主动按也有伤害，要的是符文。但高层手动上的痛割可以触发范围伤<br><strong><a href="http://d.163.com/db/cn/49513/skill/ground-stomp" target="_blank" rel="noopener">大地践踏</a></strong> <code>足扭乾坤</code> 聚怪<br><strong><a href="http://d.163.com/db/cn/49513/skill/battle-rage" target="_blank" rel="noopener">战斗怒火</a></strong> <code>化敌为友</code> 常驻增伤/暴击回血<br><strong><a href="http://d.163.com/db/cn/49513/skill/wrath-of-the-berserker" target="_blank" rel="noopener">狂暴者之怒</a></strong> <code>屠戮</code> 常驻增伤<br><strong><a href="http://d.163.com/db/cn/49513/skill/ruthless" target="_blank" rel="noopener">残酷</a></strong> 斩杀增伤 <del>战士传统艺能</del><br><strong><a href="http://d.163.com/db/cn/49513/skill/nerves-of-steel" target="_blank" rel="noopener">钢铁神经</a></strong> 春哥<br><strong><a href="http://d.163.com/db/cn/49513/skill/boon-of-bulkathos" target="_blank" rel="noopener">布尔凯索的庇佑</a></strong> 必点，这个被动减了一啪啦核心技能的CD，蛮子不用堆（太多）CDR的原因<br><strong><a href="http://d.163.com/db/cn/49513/skill/rampage" target="_blank" rel="noopener">狂暴</a></strong> 稳定增伤</p><h2 id="可选"><a href="#可选" class="headerlink" title="可选"></a>可选</h2><p><strong><a href="http://d.163.com/db/cn/49511/equipment/ambos-pride-70" target="_blank" rel="noopener">安铂的骄傲</a></strong> 低层带法，萃<a href="http://d.163.com/db/cn/49511/equipment/the-furnace-70" target="_blank" rel="noopener">焚炉</a>，然后副手可以带<strong><a href="http://d.163.com/db/cn/49513/equipment/sun-keeper-70" target="_blank" rel="noopener">日光守卫</a></strong>/<strong><a href="http://d.163.com/db/cn/49513/equipment/doombringer-70" target="_blank" rel="noopener">末日使者</a></strong></p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/stone-gauntlets-70" target="_blank" rel="noopener">岩石护手</a></strong> 站不住萃取这个</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/obsidian-ring-of-the-zodiac-70" target="_blank" rel="noopener">黄道黑曜石之戒</a></strong> 实在没有能用的全能或者力量指环的话，8%暴击8%CDR将就用吧，也只能拿来过度。黄道天生固定四属性，攻速减耗都废了，最后只能萃取 <del>（看了一眼天梯第一）你有太古黄道当我没说</del></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 暗黑破坏神3 </tag>
            
            <tag> 配装 </tag>
            
            <tag> 野蛮人 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《暗黑破坏神3》S19永恒之战巫医Build</title>
      <link href="/game/Diablo3-S19-WitchDoctor-Build/"/>
      <url>/game/Diablo3-S19-WitchDoctor-Build/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>巫医强啊，巫医他强就强在：同一层大米，他可以秒boss；<br>也可以被路边不知道哪里来的<del>一般通过小怪</del> 不知名阿猫阿狗随随便便一个平A秒掉。<br>更别说地面技能，更别说舔/跳/吸/标枪哥/吹箫哥，以及属实恶毒的小蜜蜂/地狱妖女/施虐狂魔/魅魔/恶毒妖妇等等等等。</p><a id="more"></a><blockquote><p>顺便一提，恶毒妖妇好像是物理加奥术……不是所有长得像火球的东西都是火焰伤。<br>但物抗不够火抗来凑也没毛病，S19把一些小怪平A改成了火伤。<del>当然物抗依旧一如既往的保值</del></p></blockquote><p>一下出春哥，两下等复活，这就是巫医。<br>但只要给我站住了，就没有我一波鱼箭解决不了的事，如果有，就再来一波。<br>这就是巫医。</p><p>如果你发现本层小怪一下居然秒不了你，说明你把自己的上限预估得太低了。<del>一般往上加个10层没什么问题</del><br>你玩了巫医，这个游戏就不再是你熟悉的刷子破坏神3了，你可以把这个游戏当成i wanna或者马造工艺图来玩。<br>巫医冲层是要尽快找出口下层保进度的，跟需要交学费的所有游戏一样，第一优先级是找check point。<br>不然很容易死到原地30秒心态爆炸，就算最后磨过去了点不了宝石也对不起这张票对不对。</p><p>吹比到此为止，讲回正题。<br>只玩了祖吹，只说祖吹。我相信实践是检验真理的唯一标准。</p><p><img src="http://cdn.ews.ink/image/blog/Diablo3-WitchDoctor-Rank.png" alt="2019.11.30单通105"><br>2019年11月30日凌晨达成单通105层。<br>28号晚上建的号，两天就能打到这里，好像值得吹一波。<br>其实仔细一想蛮丢人的，开服整整一周了105居然还能排进前100，这个职业得多惨淡。<br>不过有一说一，如此随便就能打到105至少证明巫医强度确实不低。</p><p>奥吉德肩膀手腕每样做了60个左右出了词缀不错的远古，完美行侠，91暴伤6攻速867智力（洗了孔）旅者。<br>全身就这四个远古，但是其他装备词缀都还可以。<del>我这个脸黑中透白，说一声偷渡成功不过分8。</del><br>1k2巅峰，站街80w面板9k智力5k体能，攻速1.93，暴击41.5，暴伤287，范围伤79。</p><p>第一次玩巫医失误有点多，但是面板摆在这里，硬堆伤害还真让我堆过去了。<br>过的那把第一层老鼠洞给爷恶心惨了，虽然没准备撕票，也做好了不点宝石纯当练手的准备。<br>结果一路死过去拖尸到下层，烂木林+沙漠，算是苦尽甘来。即便没有一个塔，易于聚怪的地形和怪堆分布还是爽到。<br>我体感巫医单刷的话沙漠比烂木林还舒服，烂木林碰到散开站的女妖+标枪哥的包围圈还没塔就不是那么开心的事了。</p><p>玩巫医确实搞人，冲层很容易炸心态，我打完105是完全不想再提升手法装备去更高层了。<br>甚至赌图缩减105用时都不愿意，真的心累。</p><blockquote><p>我基于个人判断认为接下来的收获很难再足以回报我的付出了，所以见好就收。<br>也说不定有空了会捡起来继续玩下去。游戏而已，还是随性点好，过于功利真没必要。<br>我玩游戏突出一个自由，从心所欲不逾矩。胜负心太强就没意思了，犯规更没意思。</p></blockquote><h3 id="配装"><a href="#配装" class="headerlink" title="配装"></a>配装</h3><p>祖尼奥吉德5+2（祖套包括戒指副手5件套+奥吉德肩腕+<a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a>）<br>祖尼玛萨之魂：2件套鬼娃持续到死+鬼娃CD减80%，4件套每只鬼娃自己和宠物减伤3%，6件套宠物对耗蓝技命中的目标伤害提高15000%持续8s<br>奥吉德的权利：2件套15%减伤+30%增伤，3件套30%精英减伤+30%精英伤</p><p>遇事不决无脑堆肉，什么百分比生命体能护甲都安排上。<br>需要注意全抗不用特意去堆，不像武僧，智力职业不缺全抗。<br>还有就是百分比生命是高级需求，是建立在已经有<strong>高体能</strong>的基础上的。<br>血量本来就不高就不要一味追求百分比生命加成了（全身有头上的紫宝石就够了）。</p><p>假设你现在有10w血量，你马上要挨打了，挨一顿暴打。<br>「直接增加2w血量」和「增加当前15%的血量」，只能二选一你选哪个？从常识角度看就很容易理解。<br><del>然后不管选哪个都会被秒ww不过就算增加1%的存活率也好啊</del></p><p>「<strong><a href="https://www.d3planner.com/402536628" target="_blank" rel="noopener">完美属性示例</a></strong>」</p><blockquote><p>完美是个人看法，有自己的理解当然很棒，请自行其是<br>如果愿意交流沟通查缺补漏互相印证再欢迎不过<br>找我争天老大谁老二就算了，我奏是个弟弟我没兴趣</p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/equipment/carnevil-70" target="_blank" rel="noopener">邪毒狂欢</a></strong> 6%暴击/智力<br><strong><a href="http://d.163.com/db/cn/49511/equipment/aughilds-power" target="_blank" rel="noopener">奥吉德的力量</a></strong> 15%技能伤/20%范围伤/智力 技能伤指鬼娃，不是食人鱼</p><blockquote><p>食人鱼伤害确实不低，但伤害大头还是在鱼完之后的宝宝吹箭雨<br><del>天不生我祖套吹，万古巫医当狗杀。箭来</del></p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/equipment/zunimassas-marrow" target="_blank" rel="noopener">祖尼玛萨之髓</a></strong> 15%技能伤/3孔/智力<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-witching-hour-70" target="_blank" rel="noopener">行巫时刻</a></strong> 15%技能伤/7%攻速/50%暴伤/智力<br><strong><a href="http://d.163.com/db/cn/49511/equipment/depth-diggers-70" target="_blank" rel="noopener">深渊挖掘裤</a></strong> 100%特效/15%技能伤/2孔/智力 如果拿到有好特效没有技能伤的裤子，可以考虑放弃双孔洗成技能伤<br><strong><a href="http://d.163.com/db/cn/49511/equipment/zunimassas-trail-70" target="_blank" rel="noopener">祖尼玛萨之途</a></strong> 智力/体能/全抗/护甲 词缀实属老实，太古必毕业，没啥变数</p><blockquote><p>不过次要有物抗就再好不过了，别的职业是讲收益，物抗好过元素单抗。<br>你不是好不好的问题，你是直接没有物理防御。小孩子才做选择，大人根本没有。<br>智力职业不外如是。毕竟1力量/敏捷=1护甲，10智力=1全抗（全元素抗性）。</p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/equipment/zunimassas-finger-wraps-70" target="_blank" rel="noopener">祖尼玛萨之手</a></strong> 10%暴击/50%暴伤/7%攻速/智力 没有四攻手有个双暴就能用，要啥自行车<br><strong><a href="http://d.163.com/db/cn/49511/equipment/aughilds-search" target="_blank" rel="noopener">奥吉德的搜捕</a></strong> 20%毒伤/6%暴击/智力<br><strong><a href="http://d.163.com/db/cn/49511/equipment/the-travelers-pledge-70" target="_blank" rel="noopener">旅者之誓</a></strong> 孔/100%暴伤/10%暴击/20%毒伤/7%攻速/智力/20%范围伤 S19好久不见的老朋友，当然说归说，项链妹有一个省油的灯，该卡你的瓶颈还是卡得你说不出话<br><strong><a href="http://d.163.com/db/cn/49511/equipment/the-compass-rose-70" target="_blank" rel="noopener">罗盘玫瑰</a></strong> 孔/8%暴击/50%暴伤/均伤/7%攻速/智力/20%范围伤<br><strong><a href="http://d.163.com/db/cn/49511/equipment/zunimassas-pox-70" target="_blank" rel="noopener">祖尼玛萨之疾</a></strong> 孔/8%暴击/50%暴伤/均伤/7%攻速/智力/20%范围伤<br><strong><a href="http://d.163.com/db/cn/49511/equipment/the-dagger-of-darts-70" target="_blank" rel="noopener">箭镖匕刃</a></strong> 500%特效/7%攻速/10%ED/智力/24%范围伤<br><strong><a href="http://d.163.com/db/cn/49511/equipment/zunimassas-string-of-skulls-70" target="_blank" rel="noopener">祖尼玛萨的头骨串</a></strong> 25%技能伤/10%暴击/20%范围伤/8%精英伤/智力</p><p>为什么不要CDR？因为有被动技能<strong><a href="http://d.163.com/db/cn/49513/skill/grave-injustice" target="_blank" rel="noopener">剥削死者</a></strong>。只要聚怪够好杀怪够快，连巅峰的10%CDR都不点又如何，我一样无缝食人鱼。<br>次要有物抗出物抗，有球拾出球拾。</p><h3 id="萃取"><a href="#萃取" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49511/equipment/echoing-fury-70" target="_blank" rel="noopener">怒火回荡</a></strong> 杀怪可以叠5层的攻速buff（狂暴：攻击和移动速度提高）<br><strong><a href="http://d.163.com/db/cn/49511/equipment/mask-of-jeram-70" target="_blank" rel="noopener">杰拉姆的面具</a></strong> 宝宝增伤200%<br><strong><a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a></strong> 5+2唯一指定戒指，最大化利用特效</p><h3 id="宝石"><a href="#宝石" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49511/equipment/simplicitys-strength" target="_blank" rel="noopener">至简之力</a></strong> 吹箭增伤还回血，简单粗暴<br><strong><a href="http://d.163.com/db/cn/49511/equipment/bane-of-the-stricken" target="_blank" rel="noopener">受罚者之灾</a></strong> 看看你的<a href="http://d.163.com/db/cn/49511/equipment/carnevil-70" target="_blank" rel="noopener">帽子</a>，为什么堆攻速有B数了吗<br><strong><a href="http://d.163.com/db/cn/49511/equipment/enforcer" target="_blank" rel="noopener">侍从宝石</a></strong> 宝宝的增伤减伤（90%减伤xmsl）<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49511/equipment/flawless-royal-amethyst" target="_blank" rel="noopener">紫宝石</a>（百分比生命），护甲<a href="http://d.163.com/db/cn/49511/equipment/flawless-royal-topaz" target="_blank" rel="noopener">黄宝石</a>（智力），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能"><a href="#技能" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49511/skill/poison-dart" target="_blank" rel="noopener">剧毒飞镖</a></strong> <code>脊刺飞镖</code> 主要伤害来源，祖套6件套150倍增伤就来自这套combo——食人鱼+吹箭</p><blockquote><p>带物理吹箭是为了回蓝，即使只有鱼耗蓝（害挺多的，一次250，我站街总蓝量才1k2整，不计回蓝只够四次<br>有<strong><a href="http://d.163.com/db/cn/49513/skill/grave-injustice" target="_blank" rel="noopener">剥削死者</a></strong>杀怪刷CD，怪够多的情况下连放食人鱼不是问题<br>真的不缺毒符文那点伤害，别让蓝耗成为你的瓶颈</p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/skill/piranhas" target="_blank" rel="noopener">食人鱼</a></strong> <code>食人鱼旋风</code> 本套bd核心，本身伤害可观，持续4s延长了祖套的增伤buff，还给怪上了额外15%的易伤debuff，最后自带聚怪<br><strong><a href="http://d.163.com/db/cn/49511/skill/spirit-walk" target="_blank" rel="noopener">灵魂行走</a></strong> <code>游魂</code> 穿怪<br><strong><a href="http://d.163.com/db/cn/49511/skill/soul-harvest" target="_blank" rel="noopener">灵魂收割</a></strong> <code>困魂压魄</code> 提升护甲，减速周围<br><strong><a href="http://d.163.com/db/cn/49511/skill/horrify" target="_blank" rel="noopener">惧灵</a></strong> <code>骇人仪容</code> 提升大量护甲并控场3s，因为<a href="http://d.163.com/db/cn/49513/skill/grave-injustice" target="_blank" rel="noopener">剥削死者</a>的原因基本可以保证全程覆盖，<strong>巨幅增加生存能力</strong></p><blockquote><p><del>大概是从一张纸变成一百张纸这样子</del><br>开玩笑，真的会硬很多，穿怪都可以不要一定要把这个点出来</p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/skill/fetish-army" target="_blank" rel="noopener">鬼娃大军</a></strong> <code>利刃军团</code> 不好意思，我人多<br><strong><a href="http://d.163.com/db/cn/49511/skill/spirit-vessel" target="_blank" rel="noopener">灵魂容器</a></strong> 春哥<br><strong><a href="http://d.163.com/db/cn/49511/skill/fetish-sycophants" target="_blank" rel="noopener">鬼娃跟班</a></strong> 不好意思，我越打人越多<br><strong><a href="http://d.163.com/db/cn/49513/skill/grave-injustice" target="_blank" rel="noopener">剥削死者</a></strong> 终极加强版灭回，回血回蓝就算了还<strong>减CD</strong>你怕不怕，最重要的是，生效距离能被<strong>球拾加成</strong><br><strong><a href="http://d.163.com/db/cn/49513/skill/swampland-attunement" target="_blank" rel="noopener">沼泽调谐</a></strong> 周围怪越多抗性越高，具体20码内每只120物/火/毒/冰抗，生效距离同上<strong>吃球拾</strong></p><h3 id="可选"><a href="#可选" class="headerlink" title="可选"></a>可选</h3><blockquote><p>反正伸头是一刀，缩头也是一刀，横竖都是一刀的事，不如……</p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/equipment/squirts-necklace-70" target="_blank" rel="noopener">斯奎特的项链</a></strong> <strong><a href="http://d.163.com/db/cn/49511/equipment/convention-of-elements-70" target="_blank" rel="noopener">全能法戒</a></strong> 恶向胆边生的产物，要输出不要命选手可以考虑<br>欧皇还可以考虑<strong><a href="http://d.163.com/db/cn/49511/equipment/the-flavor-of-time-70" target="_blank" rel="noopener">时光流韵</a></strong>（我是说多米诺水平的欧皇） <del>然后指着盾塔过活</del></p><blockquote><p>顶级欧皇还不怕死就是可以为所欲为<br>这就是金字塔尖的强者吗，恐怖如斯<br>等我有空做个图[为所欲为.gif]</p></blockquote><p><strong><a href="http://d.163.com/db/cn/49511/skill/big-bad-voodoo" target="_blank" rel="noopener">巫毒狂舞</a></strong> <code>鬼魂恩泽</code> 替换<strong><a href="http://d.163.com/db/cn/49511/skill/horrify" target="_blank" rel="noopener">惧灵</a></strong>，加速增伤减伤回血一体神技。但是<strong>并不推荐</strong>带，即使有<a href="http://d.163.com/db/cn/49513/skill/grave-injustice" target="_blank" rel="noopener">剥削死者</a>CD也略长，需要非常非常熟悉巫医的推图节奏</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 暗黑破坏神3 </tag>
            
            <tag> 配装 </tag>
            
            <tag> 巫医 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《暗黑破坏神3》随从配装以及团结用法</title>
      <link href="/game/Diablo3-Kormac-and-Unity/"/>
      <url>/game/Diablo3-Kormac-and-Unity/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我只带骑士，别问我魔女盗贼怎么用，我只能回答<del>无可奉告</del> 不知道不清楚不了解。</p><a id="more"></a><h2 id="追随者配装"><a href="#追随者配装" class="headerlink" title="追随者配装"></a>追随者配装</h2><p><strong>圣殿骑士</strong>-<strong>寇马克</strong><br><strong><a href="http://d.163.com/db/cn/49513/equipment/enchanting-favor-70" target="_blank" rel="noopener">情缘</a></strong> 16%格挡几率<br><strong><a href="http://d.163.com/db/cn/49513/equipment/eunjangdo" target="_blank" rel="noopener">银桩刀</a></strong> 20%特效/闪电伤害/7%攻速/10%CDR 只要他的攻速足够快，残血的boss就动不了<br><strong><a href="http://d.163.com/db/cn/49513/equipment/freeze-of-deflection-70" target="_blank" rel="noopener">折射成冰</a></strong> 1.5特效/11%格挡几率/10%CDR 格挡有几率冰冻，骑士唯一指定副手<br><strong><a href="http://d.163.com/db/cn/49513/equipment/dovu-energy-trap-70" target="_blank" rel="noopener">多弗的法能陷阱</a></strong> 25%特效/7%攻速/8%CDR 增加昏迷时间 <del>沙（致死量）</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-lantern-70" target="_blank" rel="noopener">正义灯戒</a></strong> 16%格挡几率/7%攻速/8%CDR 特效无所谓，要的是格挡几率<br><strong><a href="http://d.163.com/db/cn/49513/equipment/oculus-ring-70" target="_blank" rel="noopener">神目指环</a></strong> 85%特效/7%攻速/8%CDR 增伤<br><strong>技能</strong>：<strong>干涉</strong>/<strong>震慑</strong>/<strong>冲锋</strong>/<strong>鼓舞</strong>（右右左左）<br>随从的减速妨碍到你聚怪的话，第二行就点左边的秒回（<strong>震慑</strong>换成<strong>忠诚</strong>）。</p><p>以上是自用仅供参考，可换：</p><ul><li><strong><a href="http://d.163.com/db/cn/49513/equipment/thunderfury-blessed-blade-of-the-windseeker-70" target="_blank" rel="noopener">雷霆之怒，逐风者的祝福之刃</a></strong> 闪电伤害/7%攻速/10%CDR 特效无所谓，要的是电击传染</li><li><strong><a href="http://d.163.com/db/cn/49513/equipment/azurewrath-70" target="_blank" rel="noopener">碧蓝怒火</a></strong> 闪电伤害/7%攻速/10%CDR 特效无所谓，要的是击飞</li><li><strong><a href="http://d.163.com/db/cn/49513/equipment/the-ess-of-johan-70" target="_blank" rel="noopener">兵要护符</a></strong> 7%攻速/8%CDR/80%特效 特效其实无所谓，要的是拉怪，减速聊胜于无</li><li><strong><a href="http://d.163.com/db/cn/49513/equipment/wyrdward-70" target="_blank" rel="noopener">命运守护</a></strong> 35%特效/7%攻速/8%CDR 电伤几率晕人</li><li><strong><a href="http://d.163.com/db/cn/49513/equipment/bulkathoss-wedding-band-70" target="_blank" rel="noopener">布尔凯索的婚戒</a></strong> 7%攻速/8%CDR 些微增加输出，聊胜于无</li></ul><p>曾经一段时间很喜欢风剑+命运守护+多弗的群晕，后来发现小怪控了并没有多大提升，不如带银妆刀按住boss才是正理。</p><h2 id="装备词缀"><a href="#装备词缀" class="headerlink" title="装备词缀"></a>装备词缀</h2><p>词缀只有攻速+CDR有用。<br>不用想太多，随从装备两条基本原则：<strong>必带不死饰品，然后放弃所有防御词缀。</strong><br>不是团不团结的问题，就算不带团结，随从空有百万血量，没护甲没全抗（除了饰品就五件装备，给你五件太古能堆多少）没有套装效果没主动/被动技能combo，挨打基本不用结算坚韧的减伤，1亿伤害扣9999万血就完事了。<br>剧情小米悬赏（真的有连悬赏都单人的独狼吗，怕不是钢铁加鲁鲁）不清楚，高层摸到就是死。<br>所以不用考虑随从有多少输出和坚韧，就一纯工具人，机制如此，没什么办法。</p><h2 id="团结用法"><a href="#团结用法" class="headerlink" title="团结用法"></a>团结用法</h2><h3 id="词缀理解"><a href="#词缀理解" class="headerlink" title="词缀理解"></a>词缀理解</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/unity-70" target="_blank" rel="noopener">团结</a></strong><br>主要词缀（有且仅有四条）：</p><blockquote><ul><li>（<strong>必然自带</strong>）12%-15%精英伤</li><li>1个宝石镶孔</li><li>[60,80]-[120,160]均伤 &lt;远古[88,105]-[168,210]&gt;</li><li>416-500主属性「力量/敏捷/智力」 &lt;远古550-650&gt;</li><li>416-500体能 &lt;远古550-650&gt;</li><li>91-100全抗 &lt;远古110-130&gt;</li><li>373-397护甲 &lt;远古436-516&gt;</li><li>10%-15%生命</li><li>6448-7678秒回 &lt;远古8445-10000&gt;</li><li>7737-9214击回 &lt;远古10135-11975&gt;</li><li>5%-7%攻速</li><li>4.5%-6%暴击</li><li>26%-50%暴伤</li><li>5%-8%CDR</li><li>10%-20%范围伤</li><li>5%-8%减耗</li></ul></blockquote><p>可洗次要词缀（有且仅有一条）：</p><blockquote><ul><li>141-160单抗「物理/火焰/冰霜/毒性/奥术(神圣)/闪电」 &lt;远古176-210&gt;</li><li>20%-40%减控</li><li>4252-5942灭回 &lt;远古6536-7725&gt;</li><li>20001-29713球回 &lt;远古32684-38625&gt;</li><li>32%-35%金币</li><li>2401-2880荆棘伤 &lt;远古2881-3500&gt;</li><li>140-200经验 &lt;远古220-260&gt;</li></ul></blockquote><p>必然自带次要词缀：</p><blockquote><ul><li>（当前佩戴者）受到的所有伤害由<strong>该（种）物品的（所有）佩戴者</strong>分担。</li></ul></blockquote><p>仔细读三遍特效，还问得出「能不能只让随从带团结」这种话吗？<br>不是自不自私的问题，如果是「谁带团结谁给全队分担伤害」，那么dps只要无脑输出就行了，奶带个团结堆CDR刷黄道提高无敌覆盖率，这游戏也太简单了吧。</p><p>所以团结的特效本质是：带了团结的人——这里我们称之为团结者——<br>「<strong>当有某个『团结者』受到伤害时，伤害由所有『团结者』共同分担。</strong>」</p><h3 id="真正用法"><a href="#真正用法" class="headerlink" title="真正用法"></a>真正用法</h3><p><strong>首先要自己和随从都带上团结，才能触发特效。</strong><br>自己挨打，有50%伤害会分担给追随者，但追随者有不死饰品，追随者血量减到0，但是并不会死亡。<br>（自己一直挨打，追随者就一直空血。）<br>追随者挨打，结算伤害时追随者虽然没死（因为不死饰品），但已经是空血了，伤害无法结算（血量已经为0了你还想怎么样，扣成负数吗，又不是炉石），所以自己分担不到追随者的伤害。<br>就算<strong>偶尔</strong>追随者血量不为0，分担伤害就分担伤害呗，自己的坚韧摆在这里，同一层的怪，已经被分担了50%的伤害，再结算一次减伤还扛不住吗。<br><strong>于是你就有了50%的常驻固定减伤。</strong></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 暗黑破坏神3 </tag>
            
            <tag> 追随者 </tag>
            
            <tag> 团结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《暗黑破坏神3》S19永恒之战武僧Build</title>
      <link href="/game/Diablo3-S19-Monk-Build/"/>
      <url>/game/Diablo3-S19-Monk-Build/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>个人理解，仅供参考。<br>数据和思路基于前人的努力，尤其感谢在PTR一天25小时高强度开荒的大佬们。<br>本文一共三套BD，散钟/猴王冰冲/正义电冲。</p><a id="more"></a><p>参考资料：</p><ul><li>版主的《<a href="http://bbs.d.163.com/?mod=viewthread&tid=173783290" target="_blank" rel="noopener">【光照八荒】2.66版本武僧散件敲钟攻略</a>》</li><li>琉璃的《<a href="http://bbs.d.163.com/?mod=viewthread&tid=173795214" target="_blank" rel="noopener">【流云桥下，冰风怒扫】2.6.7猴王冰奔（风雷冲）玩法入门</a>》</li><li>《<a href="http://bbs.d.163.com/?mod=viewthread&tid=173772470" target="_blank" rel="noopener">2.66版本博恩船长奶僧BD推荐</a>》</li><li>以及其他<del>天梯肝魔</del> 热心网友的分享经验</li></ul><h2 id="散件火钟"><a href="#散件火钟" class="headerlink" title="散件火钟"></a>散件火钟</h2><p>敲钟一般默认火钟（光照八荒），没什么好说的。</p><blockquote><p>我本想不拘一格发散思路，但360度无死角分裂覆盖全屏还有830%还是火焰伤实在是太香了。</p></blockquote><p>敲钟档位有兴趣自行了解「<a href="http://bbs.d.163.com/?mod=viewthread&tid=173543598" target="_blank" rel="noopener">档位详情</a>」。</p><h3 id="配装"><a href="#配装" class="headerlink" title="配装"></a>配装</h3><p>所有装备都需要远古/太古以获得<a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a>最高增伤。<br>首饰必带孔，没孔洗孔，传奇宝石比一两条词缀重要多了。</p><p><strong><a href="http://d.163.com/db/cn/49511/equipment/tzo-krins-gaze-70" target="_blank" rel="noopener">祖科林的凝视</a></strong> 150%技能伤/孔(必带，你把这个孔想成不用洗的12.5%CDR)/6%暴击、单抗 没打错，祖科林就是有百分之壹佰伍的<a href="http://d.163.com/db/cn/49513/skill/wave-of-light" target="_blank" rel="noopener">金钟破</a>技能伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/lefebvres-soliloquy-70" target="_blank" rel="noopener">列斐伏尔的劝诫</a></strong> 50%特效/8%CDR/20%范围伤、单抗 有追求上8%减耗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/cindercoat-70" target="_blank" rel="noopener">燃火外套</a></strong> 20%火伤/3孔/全抗+远减或者精英减伤+单抗 主要是火伤和3孔(234点全抗)，其他甚至包括特效其实都无所谓，我体感这套BD不缺内力<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-witching-hour-70" target="_blank" rel="noopener">行巫时刻</a></strong> 7%攻速/50%暴伤/敏捷/体能、单抗 速刷换行侠<br><strong><a href="http://d.163.com/db/cn/49513/equipment/swamp-land-waders-70" target="_blank" rel="noopener">沼地防水裤</a></strong> 20%火伤/2孔/智力(10智力=1全抗)/体能/全抗 建个1级巫医小号做黄装升级获得<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-crudest-boots-70" target="_blank" rel="noopener">粗糙至极靴</a></strong> 15%技能伤/敏捷/体能、单抗 为了风相<a href="http://d.163.com/db/cn/49513/skill/mystic-ally" target="_blank" rel="noopener">幻身诀</a>的常驻回内+4/s<br><strong><a href="http://d.163.com/db/cn/49513/equipment/magefist-70" target="_blank" rel="noopener">法师之拳</a></strong> 10%暴击/50%暴伤/20%范围伤/8%CDR/敏捷、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bindings-of-the-lesser-gods-70" target="_blank" rel="noopener">蒙尘者绑腕</a></strong> 200%特效/20%火伤/6%暴击、单抗或者远减<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-flavor-of-time-70" target="_blank" rel="noopener">时光流韵</a></strong> 孔/8%CDR(必带)/20%火伤/10%暴击/100%暴伤/20%范围伤 天坑，将就能用就行<br><strong><a href="http://d.163.com/db/cn/49513/equipment/unity-70" target="_blank" rel="noopener">团结</a></strong> 孔/8%暴击/50%暴伤/均伤/15%精英伤 随从也要带<a href="http://d.163.com/db/cn/49513/equipment/unity-70" target="_blank" rel="noopener">团结</a>并带<strong>不死圣物</strong>（骑士情缘魔女烟熏香炉，重要，否则随从挨打你会被秒）然后你就有<a href="/walkthrough/Diablo3-Kormac-and-Unity/" target="_blank">50%常驻减伤</a>了<br><strong><a href="http://d.163.com/db/cn/49513/equipment/convention-of-elements-70" target="_blank" rel="noopener">全能法戒</a></strong> 孔/200%特效/8%暴击/50%暴伤/均伤/20%范围伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/kyoshiros-blade" target="_blank" rel="noopener">京四郎之刃</a></strong> 250%特效/10%CDR/24%范围伤 毕业敏捷洗10%ED<br><strong><a href="http://d.163.com/db/cn/49513/equipment/rabid-strike-70" target="_blank" rel="noopener">狂击</a></strong> 10%CDR/24%范围伤 两件武器选一件出击回</p><h3 id="萃取"><a href="#萃取" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/incense-torch-of-the-grand-temple-70" target="_blank" rel="noopener">大殿香烛</a></strong> 敲钟唯一指定武器萃取，没得换<br><strong><a href="http://d.163.com/db/cn/49513/equipment/pintos-pride-70" target="_blank" rel="noopener">平托的骄傲</a></strong> 跟蒙尘护腕带一萃一<br><strong><a href="http://d.163.com/db/cn/49513/equipment/obsidian-ring-of-the-zodiac-70" target="_blank" rel="noopener">黄道黑曜石之戒</a></strong> 跟全能带一萃一，但应该没有人萃全能8，毕竟搞个好点的全能基本上全职业全BD用到AFK</p><h3 id="宝石"><a href="#宝石" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/legacy-of-dreams" target="_blank" rel="noopener">梦之遗礼</a></strong> 散件BD唯一指定宝石，没得换 <del>把梦魇对戒拍死在沙滩上的后浪</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-trapped" target="_blank" rel="noopener">困者之灾</a></strong> 稳定增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/zeis-stone-of-vengeance" target="_blank" rel="noopener">贼神的复仇之石</a></strong> 最高增伤，但搭配困者的话注意要卡好距离<br><strong><a href="http://d.163.com/db/cn/49513/equipment/enforcer" target="_blank" rel="noopener">侍从宝石</a></strong> 40%左右常驻增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-stricken" target="_blank" rel="noopener">受罚者之灾</a></strong> 冲层必带 <del>不然拿头杀王</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/boon-of-the-hoarder" target="_blank" rel="noopener">囤宝者的恩惠</a></strong> 小米快乐石<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（全抗），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能"><a href="#技能" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/wave-of-light" target="_blank" rel="noopener">金钟破</a></strong> <code>光照八荒</code> 输出<br><strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong> <code>流沙覆</code> 黑人，常驻50%减伤和回内+20/s<br><strong><a href="http://d.163.com/db/cn/49513/skill/dashing-strike" target="_blank" rel="noopener">疾风击</a></strong> <code>光辉如炬</code> 位移<br><strong><a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a></strong> <code>聚力爆破</code> 搭配蒙尘护腕给怪上易伤<br><strong><a href="http://d.163.com/db/cn/49513/skill/mystic-ally" target="_blank" rel="noopener">幻身诀</a></strong> <code>风相幻身</code> 主动回内100和常驻回内+4/s（搭配粗糙鞋+8/s）<br><strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-salvation" target="_blank" rel="noopener">救赎真言</a></strong> <code>身轻如燕</code> 常驻坚韧<br><strong><a href="http://d.163.com/db/cn/49513/skill/seize-the-initiative" target="_blank" rel="noopener">先发制人</a></strong> 反斩杀线上+攻速<br><strong><a href="http://d.163.com/db/cn/49513/skill/beacon-of-ytar" target="_blank" rel="noopener">伊塔之辉</a></strong> 常驻20%CDR，可以说不管什么BD必带了<br><strong><a href="http://d.163.com/db/cn/49513/skill/harmony" target="_blank" rel="noopener">天人合一</a></strong> 40%单抗转全抗<br><strong><a href="http://d.163.com/db/cn/49513/skill/near-death-experience" target="_blank" rel="noopener">濒死体验</a></strong> 60sCD的春哥</p><h3 id="可选"><a href="#可选" class="headerlink" title="可选"></a>可选</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/ingeom" target="_blank" rel="noopener">寅剑</a></strong> 肥宅快乐剑，没啥好说的<br><strong><a href="http://d.163.com/db/cn/49513/equipment/vigilante-belt-70" target="_blank" rel="noopener">行侠腰带</a></strong> 为了CDR<br><strong><a href="http://d.163.com/db/cn/49513/equipment/squirts-necklace-70" target="_blank" rel="noopener">斯奎特的项链</a></strong> 七伤拳，强者的余裕<br><strong><a href="http://d.163.com/db/cn/49513/equipment/nemesis-bracers-70" target="_blank" rel="noopener">复仇者护腕</a></strong> 带开塔手的话萃平托放弃蒙尘，带蒙尘是为了近身<a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a>增伤然后搭配<a href="http://d.163.com/db/cn/49513/equipment/rabid-strike-70" target="_blank" rel="noopener">狂击</a>的免费复制打出combo<br><strong><a href="http://d.163.com/db/cn/49513/equipment/goldwrap-70" target="_blank" rel="noopener">金织带</a></strong> 本赛季(S19)连杀特效动不动掉一地金币，A是A不动我的<br><strong><a href="http://d.163.com/db/cn/49513/equipment/avarice-band-70" target="_blank" rel="noopener">贪婪之戒</a></strong> 小米快乐戒，叠满30码的球拾</p><h2 id="猴王冰冲"><a href="#猴王冰冲" class="headerlink" title="猴王冰冲"></a>猴王冰冲</h2><p>手感类似奥陨，叠层炸buff。<br>伤害和硬度都十分可观，我站街70w面板6000w坚韧，战斗状态单刷20亿坚韧，有两个蛮子吼盾墙40亿坚韧。<br>伤害也非常可观，上限极高，后面可以牺牲减伤换取增伤进一步提高强度。</p><h3 id="配装-1"><a href="#配装-1" class="headerlink" title="配装"></a>配装</h3><p>猴王船长5+2（猴王包括项链5件套+船长腰鞋+<a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a>）<br>猴王战甲：2件套<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>常驻50%减伤，4件套每秒炸<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>层数*1000%武器伤，6件套<a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>伤害增加<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>层数*1500%<br>克里森船长的饰衣：2件套6000秒回+20%CDR+20%减耗，3件套CDR转伤害+减耗转减伤</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/sunwukos-crown" target="_blank" rel="noopener">孙武空的箍冠</a></strong> 15%技能伤/6%暴击/敏捷、单抗/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/mantle-of-channeling-70" target="_blank" rel="noopener">导能披肩</a></strong> 25%特效/8%CDR/8%减耗/20%范围伤、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/sunwukos-soul" target="_blank" rel="noopener">孙武空的灵魂</a></strong> 3孔/敏捷/体能/11%精英减伤或15%生命、单抗/单减<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-silk-girdle" target="_blank" rel="noopener">克里森船长的丝带</a></strong> 敏捷/体能/全抗/15%生命、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/sunwukos-leggings" target="_blank" rel="noopener">孙武空的护腿</a></strong> 2孔/敏捷/体能/全抗、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-waders" target="_blank" rel="noopener">克里森船长的涉水靴</a></strong> 15%技能伤/敏捷/体能、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/sunwukos-paws" target="_blank" rel="noopener">孙武空的灵掌</a></strong> 10%暴击/50%暴伤/8%CDR/8%减耗/20%范围伤、单抗 优先双暴，然后CDR减耗范围伤三选二<br><strong><a href="http://d.163.com/db/cn/49513/equipment/cesars-memento-70" target="_blank" rel="noopener">凯撒的回忆</a></strong> 800%特效/6%暴击/20%冰伤、单抗 优先保证特效高于750%，不然说啥都不要<br><strong><a href="http://d.163.com/db/cn/49513/equipment/sunwukos-shines" target="_blank" rel="noopener">孙武空的戏法</a></strong> 孔/10%暴击/100%暴伤/20%冰伤/8%CDR/20%范围伤 优先保证双暴再追求冰伤，然后才是其他，项链一般都是天坑<br><strong><a href="http://d.163.com/db/cn/49513/equipment/obsidian-ring-of-the-zodiac-70" target="_blank" rel="noopener">黄道黑曜石之戒</a></strong> 8%暴击/8%CDR/8%减耗/孔 天生固定四属性，把攻速洗成孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/convention-of-elements-70" target="_blank" rel="noopener">全能法戒</a></strong> 孔/200%特效/8%暴击/50%暴伤/8%CDR/均伤/20%范围伤 天生暴击和孔，找一个自带暴伤/CDR/均伤/范围伤四者其一的全能，把敏捷洗成另外需要的即可<br><strong><a href="http://d.163.com/db/cn/49513/equipment/won-khim-lau-70" target="_blank" rel="noopener">流云桥</a></strong> 600%特效/高白字/10%CDR/10%减耗/24%范围伤 优先保证特效高于550%，不然说啥都不要<br><strong><a href="http://d.163.com/db/cn/49513/equipment/vengeful-wind" target="_blank" rel="noopener">复仇之风</a></strong> 高白字/10%CDR/10%减耗/24%范围伤 特效无所谓，垫底都行，反正没指望<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>的伤害</p><blockquote><p>感觉回血回不上又嫌弃<a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a>不想带的话可以尝试在武器上出一条击回。</p></blockquote><p><strong>及格线</strong>：你需要至少有<strong>至少55%的CDR</strong>以及<strong>至少52%的减耗</strong>，才能愉快玩耍本BD。</p><blockquote><p>友情提示：<strong><a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-topaz" target="_blank" rel="noopener">黄宝石</a></strong>打在头上是减耗。</p></blockquote><h3 id="萃取-1"><a href="#萃取-1" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/balance-70" target="_blank" rel="noopener">平衡</a></strong> <a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>唯一指定武器<br><strong><a href="http://d.163.com/db/cn/49513/equipment/stone-gauntlets-70" target="_blank" rel="noopener">岩石护手</a></strong> 刚玩可以带飓风肩（<a href="http://d.163.com/db/cn/49513/equipment/lefebvres-soliloquy-70" target="_blank" rel="noopener">列斐伏尔的劝诫</a>）容错高一点<br><strong><a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a></strong> 5+2唯一指定戒指，最大化利用特效</p><h3 id="宝石-1"><a href="#宝石-1" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-trapped" target="_blank" rel="noopener">困者之灾</a></strong> 稳定增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/taeguk" target="_blank" rel="noopener">太极石</a></strong> 引导增伤/叠甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-powerful" target="_blank" rel="noopener">强者之灾</a></strong> 精英伤<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-topaz" target="_blank" rel="noopener">黄宝石</a>（减耗），护甲<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（全抗），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能-1"><a href="#技能-1" class="headerlink" title="技能"></a>技能</h3><p>这里特别提一下，有时候<a href="http://d.163.com/db/cn/49513/equipment/won-khim-lau-70" target="_blank" rel="noopener">流云桥</a>的免费飓风拉到大体积怪物会导致打断<a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>。</p><p><strong><a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a></strong> <code>冰风扫掠</code> 主要输出，固定叠5层/s，攻速提升爆炸伤害但不用刻意堆<br><strong><a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a></strong> <code>疗伤清风</code> 搭配<a href="http://d.163.com/db/cn/49513/equipment/won-khim-lau-70" target="_blank" rel="noopener">流云桥</a>的免费回血，不用手动按，选出来是为了奶符文<br><strong><a href="http://d.163.com/db/cn/49513/skill/blinding-flash" target="_blank" rel="noopener">眩目闪</a></strong> <code>信仰之光</code> 搭配凯撒护腕给怪上易伤+给自己增伤，防止控制递减，在爆发（全能转到冰）前一秒打<br><strong><a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a></strong> <code>心性超脱</code> 16sCD的4s无敌，搭配高CDR和黄道实现高覆盖率，准备炸层时留一下在爆发同时开<br><strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong> <code>流沙覆</code> 黑人，常驻50%减伤和回内+20/s<br><strong><a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a></strong> <code>心灵风暴</code> 本套BD核心，搭配猴王套超高增伤+常驻回内+8/s<br><strong><a href="http://d.163.com/db/cn/49513/skill/seize-the-initiative" target="_blank" rel="noopener">先发制人</a></strong> 反斩杀线上+攻速<br><strong><a href="http://d.163.com/db/cn/49513/skill/beacon-of-ytar" target="_blank" rel="noopener">伊塔之辉</a></strong> 常驻20%CDR，可以说不管什么BD必带了<br><strong><a href="http://d.163.com/db/cn/49513/skill/harmony" target="_blank" rel="noopener">天人合一</a></strong> 40%单抗转全抗<br><strong><a href="http://d.163.com/db/cn/49513/skill/the-guardians-path" target="_blank" rel="noopener">以攻为守</a></strong> 常驻35%几率闪避</p><h3 id="可选-1"><a href="#可选-1" class="headerlink" title="可选"></a>可选</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/lefebvres-soliloquy-70" target="_blank" rel="noopener">列斐伏尔的劝诫</a></strong> 由于<a href="http://d.163.com/db/cn/49513/equipment/won-khim-lau-70" target="_blank" rel="noopener">流云桥</a>送的免费<a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a>，约等于常驻50%减伤<br>其实冰冲本质相当于加强版的天谴，同理<strong><a href="http://d.163.com/db/cn/49513/equipment/hexing-pants-of-mr-yan-70" target="_blank" rel="noopener">杨先生的妖法裤</a></strong>和<strong><a href="http://d.163.com/db/cn/49513/equipment/strongarm-bracers-70" target="_blank" rel="noopener">力士护腕</a></strong>也能带。</p><p><strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-salvation" target="_blank" rel="noopener">救赎真言</a></strong> <code>身轻如燕</code> 可以选择把<a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a>的回血换成常驻坚韧</p><blockquote><p>但是如果真言选出来<strong>绝对不能手动按</strong>！！<br>本来内力就吃紧，手动放必空内！<br>老老实实吃常驻的被动（由身轻如燕符文提供）全抗/闪避就完事了</p></blockquote><p>被动技能的话，<strong><a href="http://d.163.com/db/cn/49513/skill/seize-the-initiative" target="_blank" rel="noopener">先发制人</a></strong>（超高覆盖率的优秀增伤）以及<strong><a href="http://d.163.com/db/cn/49513/skill/beacon-of-ytar" target="_blank" rel="noopener">伊塔之辉</a></strong>（常驻20%CDR）不能动。<br><strong><a href="http://d.163.com/db/cn/49513/skill/harmony" target="_blank" rel="noopener">天人合一</a></strong>和<strong><a href="http://d.163.com/db/cn/49513/skill/the-guardians-path" target="_blank" rel="noopener">以攻为守</a></strong>可以换成以下选择：<br><strong><a href="http://d.163.com/db/cn/49513/skill/exalted-soul" target="_blank" rel="noopener">奇筋异骨</a></strong> 「内力上限+50 &amp; 回内+4/s」回内，这套BD真的还蛮缺内力的<br><strong><a href="http://d.163.com/db/cn/49513/skill/near-death-experience" target="_blank" rel="noopener">濒死体验</a></strong> 「受到致命伤害时恢复到35%状态并2s免控无敌」60sCD的春哥<br><strong><a href="http://d.163.com/db/cn/49513/skill/momentum" target="_blank" rel="noopener">劲力狂增</a></strong> 「每移动25码获得持续6s的20%增伤」最简单的增伤<br><strong><a href="http://d.163.com/db/cn/49513/skill/relentless-assault" target="_blank" rel="noopener">无情猛袭</a></strong> 「对受控目标伤害增加20%」覆盖率较低，点出来是配合<a href="http://d.163.com/db/cn/49513/skill/blinding-flash" target="_blank" rel="noopener">眩目闪</a>的<br><strong><a href="http://d.163.com/db/cn/49513/skill/mythic-rhythm" target="_blank" rel="noopener">神秘韵律</a></strong>  「打拳三下后增伤40%」最高的增伤，但触发条件很苛刻，需要主要技能（打拳之类的内力生成技）支持</p><h2 id="正义电冲"><a href="#正义电冲" class="headerlink" title="正义电冲"></a>正义电冲</h2><p>都来玩S19了怎能不试试全新的套装？<br>新套装什么效果啊，正义楷模是吧，让我康康。</p><p>劲风煞激活所有符文，<strong>2件套</strong>就？<del>尹娜流出了嫉妒的口，口胡，泪水</del><br>引导风雷冲时回内+<strong>50</strong>/s？<del>灵光悟才20，劲风煞保持3层才8，幻身点符文才4，加起来32就比你一条套装效果的一半多一点？</del><br>开着劲风煞引导风雷冲时，<strong>所有</strong>伤害提升<strong>15000%</strong>，150倍增伤？<del>猴套每层劲风煞1500%带复仇之风13层195倍增伤没错，可人家是单技能增伤啊</del></p><blockquote><p><strong>？</strong><br>新套装就你吗离谱</p></blockquote><p>话说回来，正义电冲手感类似阿克汉天谴，一路炸着走，碰到精英秦王绕柱一边转一边炸着走。<br>但是伤害比天谴高，移速比天谴快，聚怪比天谴强，算是加强版天谴S Pro Plus Max Mark II。</p><p>不过体感高层正义电冲表现是不如猴王冰冲的，主要体现在杀王上，个人感觉冰冲炸得比电冲快。<br>但电冲优点是dps稳定，容错率高。而且低层电冲比冰冲舒服太多了，人到怪死，甚至乐不思钟。</p><blockquote><p>讲真感觉散钟就算带寅剑都没电冲跑得快，常驻190%的移速太带劲了。</p></blockquote><h3 id="配装-2"><a href="#配装-2" class="headerlink" title="配装"></a>配装</h3><p>正义船长5+2（正义包括肩膀5件套+船长腰鞋+<a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a>）<br>正义楷模：2件套<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>获得所有符文+增加<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>层数*5%移速，4件套引导<a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>减伤50%+回内增加50/s，6件套开着<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>引导<a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>增伤15000%（？）+<a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>命中后扩大<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>范围<br>克里森船长的饰衣：2件套6000秒回+20%CDR+20%减耗，3件套CDR转伤害+减耗转减伤</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-decree" target="_blank" rel="noopener">正义之裁</a></strong> 15%技能伤/6%暴击/敏捷、单抗/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-mirrors" target="_blank" rel="noopener">正义之鉴</a></strong> 8%CDR/8%减耗/20%范围伤、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-lamellars" target="_blank" rel="noopener">正义之垒</a></strong> 3孔/敏捷/体能/11%精英减伤或15%生命、单抗/单减<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-silk-girdle" target="_blank" rel="noopener">克里森船长的丝带</a></strong> 敏捷/体能/全抗/15%生命、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-mountains" target="_blank" rel="noopener">正义之擎</a></strong> 2孔/敏捷/体能/全抗、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-waders" target="_blank" rel="noopener">克里森船长的涉水靴</a></strong> 15%技能伤/敏捷/体能、单抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-bazubands" target="_blank" rel="noopener">正义之握</a></strong> 10%暴击/50%暴伤/8%CDR/8%减耗/20%范围伤、单抗 优先双暴，然后CDR减耗范围伤三选二<br><strong><a href="http://d.163.com/db/cn/49513/equipment/cesars-memento-70" target="_blank" rel="noopener">凯撒的回忆</a></strong> 800%特效/6%暴击/20%冰伤、单抗 优先保证特效高于750%，不然说啥都不要<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-flavor-of-time-70" target="_blank" rel="noopener">时光流韵</a></strong> 孔/10%暴击/100%暴伤/20%电伤/8%CDR/20%范围伤 天坑，将就能用就行<br><strong><a href="http://d.163.com/db/cn/49513/equipment/obsidian-ring-of-the-zodiac-70" target="_blank" rel="noopener">黄道黑曜石之戒</a></strong> 8%暴击/8%CDR/8%减耗/孔 天生固定四属性，把攻速洗成孔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/convention-of-elements-70" target="_blank" rel="noopener">全能法戒</a></strong> 孔/200%特效/8%暴击/50%暴伤/8%CDR/均伤/20%范围伤 天生暴击和孔，找一个自带暴伤/CDR/均伤/范围伤四者其一的全能，把敏捷洗成另外需要的即可<br><strong><a href="http://d.163.com/db/cn/49513/equipment/won-khim-lau-70" target="_blank" rel="noopener">流云桥</a></strong> 600%特效/高白字/10%CDR/10%减耗/24%范围伤 优先保证特效高于550%，不然说啥都不要<br><strong><a href="http://d.163.com/db/cn/49513/equipment/vengeful-wind" target="_blank" rel="noopener">复仇之风</a></strong> 高白字/10%CDR/10%减耗/24%范围伤/800%特效 特效最好高点、满符文的<a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a>还是有点东西的</p><blockquote><p>78/s的回内为什么还要减耗？<br>要减伤（船长3件套效果-减耗转减伤）啊，这套BD强是真的强，脆也是真的脆……</p></blockquote><h3 id="萃取-2"><a href="#萃取-2" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/balance-70" target="_blank" rel="noopener">平衡</a></strong> <a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a>唯一指定武器<br><strong><a href="http://d.163.com/db/cn/49513/equipment/lefebvres-soliloquy-70" target="_blank" rel="noopener">列斐伏尔的劝诫</a></strong> 没啥事不要换，带不带飓风肩真的是两种bd <del>带了你就是强奥洗澡的猛男，没带你就是110层的51</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a></strong> 5+2唯一指定戒指，最大化利用特效</p><h3 id="宝石-2"><a href="#宝石-2" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-trapped" target="_blank" rel="noopener">困者之灾</a></strong> 稳定增伤<br><strong><a href="http://d.163.com/db/cn/49513/equipment/taeguk" target="_blank" rel="noopener">太极石</a></strong> 引导增伤/叠甲<br><strong><a href="http://d.163.com/db/cn/49513/equipment/bane-of-the-powerful" target="_blank" rel="noopener">强者之灾</a></strong> 精英伤<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（全抗），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-emerald" target="_blank" rel="noopener">绿宝石</a>（暴伤）</p><h3 id="技能-2"><a href="#技能-2" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/tempest-rush" target="_blank" rel="noopener">风雷冲</a></strong> <code>电流禁地</code> 主要输出<br><strong><a href="http://d.163.com/db/cn/49513/skill/cyclone-strike" target="_blank" rel="noopener">飓风破</a></strong> <code>狂风墙</code> 搭配凯撒护腕无限上易伤<br><strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-retribution" target="_blank" rel="noopener">惩戒真言</a></strong> <code>借力打力</code> 主动爆发，被动加攻速以及60码群体防反（单刷的话<a href="/walkthrough/Diablo3-Kormac-and-Unity/" target="_blank">给寇马克带格挡套</a>）<br><strong><a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a></strong> <code>心性超脱</code> 16sCD的4s无敌，搭配高CDR和黄道实现高覆盖率，准备炸层时留一下在爆发同时开<br><strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong> <code>流沙覆</code> 黑人，常驻50%减伤和回内+20/s<br><strong><a href="http://d.163.com/db/cn/49513/skill/sweeping-wind" target="_blank" rel="noopener">劲风煞</a></strong> <code>不带都行</code> 快乐源泉，具体效果自行查阅所有符文<br><strong><a href="http://d.163.com/db/cn/49513/skill/seize-the-initiative" target="_blank" rel="noopener">先发制人</a></strong> 反斩杀线上+攻速<br><strong><a href="http://d.163.com/db/cn/49513/skill/beacon-of-ytar" target="_blank" rel="noopener">伊塔之辉</a></strong> 常驻20%CDR，可以说不管什么BD必带了<br><strong><a href="http://d.163.com/db/cn/49513/skill/the-guardians-path" target="_blank" rel="noopener">以攻为守</a></strong> 常驻35%几率闪避，推荐带着配合<a href="http://d.163.com/db/cn/49513/skill/mantra-of-retribution" target="_blank" rel="noopener">惩戒真言</a><br><strong><a href="http://d.163.com/db/cn/49513/skill/harmony" target="_blank" rel="noopener">天人合一</a></strong> 40%单抗转全抗</p><h3 id="可选-2"><a href="#可选-2" class="headerlink" title="可选"></a>可选</h3><p>速刷低层换开塔手（<strong><a href="http://d.163.com/db/cn/49513/equipment/nemesis-bracers-70" target="_blank" rel="noopener">复仇者护腕</a></strong>），有人开塔就换杨裤（<strong><a href="http://d.163.com/db/cn/49513/equipment/hexing-pants-of-mr-yan-70" target="_blank" rel="noopener">杨先生的妖法裤</a></strong>）</p><p><strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-salvation" target="_blank" rel="noopener">救赎真言</a></strong> <code>身轻如燕</code> 实在站不住可以把<strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-retribution" target="_blank" rel="noopener">惩戒真言</a></strong>换掉，正义套有空可以主动放，用脚本全程保持都没问题</p><p><strong><a href="http://d.163.com/db/cn/49513/skill/near-death-experience" target="_blank" rel="noopener">濒死体验</a></strong> 保险起见可以带春哥，但冲层的话<strong><a href="http://d.163.com/db/cn/49513/skill/harmony" target="_blank" rel="noopener">天人合一</a></strong>应该比春哥稳定</p><h2 id="博恩剑盾奶"><a href="#博恩剑盾奶" class="headerlink" title="博恩剑盾奶"></a>博恩剑盾奶</h2><p>没想到吧，我还会玩奶。</p><p>这有啥不会的？不就：<br>无限<strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong>/<strong><a href="http://d.163.com/db/cn/49513/skill/breath-of-heaven" target="_blank" rel="noopener">回天息</a></strong>/<strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-healing" target="_blank" rel="noopener">治愈真言</a></strong>，带了<strong><a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a></strong>无限<strong><a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a></strong>。<br>定点<strong><a href="http://d.163.com/db/cn/49513/skill/inner-sanctuary" target="_blank" rel="noopener">金轮阵</a></strong>，小怪<strong><a href="http://d.163.com/db/cn/49513/skill/crippling-wave" target="_blank" rel="noopener">断筋诀</a></strong>，BOSS<strong><a href="http://d.163.com/db/cn/49513/skill/deadly-reach" target="_blank" rel="noopener">冲心拳</a></strong>（没带<strong><a href="http://d.163.com/db/cn/49513/skill/deadly-reach" target="_blank" rel="noopener">冲心拳</a></strong>还是<strong><a href="http://d.163.com/db/cn/49513/skill/crippling-wave" target="_blank" rel="noopener">断筋诀</a></strong>）。</p><p>有导航（特指TurboHUD的雷电宏）就更不用说了，再开个无限左键（打拳放左键）的脚本。<br><strong>冲层就能阻止我看小说吗？就这？</strong></p><h3 id="配装-3"><a href="#配装-3" class="headerlink" title="配装"></a>配装</h3><p>尹娜船长博恩3+2+2（尹娜头衣手+船长腰裤+博恩剑肩+<a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a>）<br>尹娜的真言：2件套幻身和真言的被动效果翻倍，4件套获得四种真言的基础被动<br>克里森船长的饰衣：2件套6000秒回+20%CDR+20%减耗，3件套CDR转伤害+减耗转减伤<br>博恩的号令：2件套15%生命，3件套10%CDR+2%经验</p><p><strong><a href="http://d.163.com/db/cn/49513/equipment/innas-radiance-70" target="_blank" rel="noopener">尹娜的光华</a></strong> 敏捷/全抗/15%生命、内力/球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/borns-privilege" target="_blank" rel="noopener">博恩的殊荣</a></strong> 8%CDR/8%减耗/全抗/15%生命、球拾/球回<br><strong><a href="http://d.163.com/db/cn/49513/equipment/innas-vast-expanse-70" target="_blank" rel="noopener">尹娜的寰宇胸襟</a></strong> 3孔/全抗/15%生命/11%精英减伤、球拾/球回<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-silk-girdle" target="_blank" rel="noopener">克里森船长的丝带</a></strong> 敏捷/体能/全抗/15%生命、球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/captain-crimsons-thrust" target="_blank" rel="noopener">克里森船长的推裤</a></strong> 2孔/敏捷/体能/全抗、球拾<br><strong><a href="http://d.163.com/db/cn/49513/equipment/illusory-boots-70" target="_blank" rel="noopener">虚幻长靴</a></strong> 敏捷/体能/全抗/护甲、球回<br><strong><a href="http://d.163.com/db/cn/49513/equipment/innas-hold-70" target="_blank" rel="noopener">尹娜的掌控</a></strong> 8%CDR/8%减耗/攻速、球拾/物抗<br><strong><a href="http://d.163.com/db/cn/49513/equipment/spirit-guards" target="_blank" rel="noopener">灵魂守卫</a></strong> 60%特效/敏捷/体能/全抗/护甲、远减<br><strong><a href="http://d.163.com/db/cn/49513/equipment/the-flavor-of-time-70" target="_blank" rel="noopener">时光流韵</a></strong> 孔/8%CDR/8%减耗/7%攻速/全抗、球回 天坑，将就能用就行<br><strong><a href="http://d.163.com/db/cn/49513/equipment/oculus-ring-70" target="_blank" rel="noopener">神目指环</a></strong> 孔/8%CDR/8%减耗/7%攻速、球回<br><strong><a href="http://d.163.com/db/cn/49513/equipment/justice-lantern-70" target="_blank" rel="noopener">正义灯戒</a></strong> 孔/55%特效/16%格挡/8%CDR/8%减耗/7%攻速、50%减控<br><strong><a href="http://d.163.com/db/cn/49513/equipment/borns-furious-wrath" target="_blank" rel="noopener">博恩的暴怒</a></strong> 10%CDR/10%减耗/7%攻速/体能<br><strong><a href="http://d.163.com/db/cn/49513/equipment/stormshield-uniqueshield009x1-70" target="_blank" rel="noopener">暴风之盾</a></strong> 11%格挡/8%CDR/8%减耗/7%攻速/全抗、球回/单减</p><p><strong>装备词条的优先级：冷却缩减＞减耗＞球回＞攻速</strong></p><p><strong>CDR</strong>跟船长套的<strong>CDR转伤害</strong>没关系，别想太多。 <del>还伤害，看看你5位数的面板心里没点逼数吗</del><br>奶妈的CDR有多重要想必不用我再废话了。奶量增益减益都来自技能，技能有CD；那么你CD有多短，你就有多强。</p><p><strong>减耗</strong>通过船长套的<strong>减耗转减伤</strong>变成你的坚韧（即角色的防御能力）。<br>为什么要坚韧？剑盾奶极脆，一般来说，硬度甚至<strong>远远不如</strong>你奶的那些<strong>dps</strong>。<br>条件1：活人才有dps，同理，活人才有hps。<br>条件2：输出不死是因为有奶妈治疗。<br>推论：奶妈活着，输出才能活着。<br>结论：你活着，队伍才有dps。</p><blockquote><p>当然，以上推论前提是在队伍硬度不溢出敌方攻击强度的情况下。<br>硬度溢出怎么办？那还奶锤子，提刀上啊。</p></blockquote><p><strong>球回</strong>与奶量挂钩，吃球回加成的技能有：</p><ul><li><strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-healing" target="_blank" rel="noopener">治愈真言</a></strong> （盾吸收量）15%</li><li><strong><a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a></strong> （盾吸收量）40%</li><li><strong><a href="http://d.163.com/db/cn/49513/skill/breath-of-heaven" target="_blank" rel="noopener">回天息</a></strong> 30%</li><li><strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong> 5%（请悉知带了<code>疗伤雾</code>的<strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong>效果是让你每个技能都带奶，5%真的不少了）</li></ul><p><del>看来吃球回的并不多嘛，也就是三分之二的技能而已。</del></p><p><strong>攻速</strong>是为了打拳频率，带了<code>排山倒海</code>的<strong><a href="http://d.163.com/db/cn/49513/skill/crippling-wave" target="_blank" rel="noopener">断筋诀</a></strong>第三下效果是「360度AOE（方圆17码内）冰冻1s并减少敌方30%移速20%攻速3s」。<br>减移速攻速算是常驻debuff，跟攻速没啥关系，你攻速再低一秒一拳三秒也能打三拳吧。<br>追求攻速是为了冰冻效果，攻速越快，怪能动的时间越少，队友越安全。<br>同时配合<strong><a href="http://d.163.com/db/cn/49513/equipment/gem-of-efficacious-toxin" target="_blank" rel="noopener">剧毒宝石</a></strong>上毒dot「（毒dot本身的伤害忽略不计，你是武僧不是巫医）敌方受到的伤害增加10%，造成的伤害降低10%」，换言之，你给<strong>全队</strong>带来了<strong>10%的增伤</strong>和<strong>10%的减伤</strong>。<br>以及<strong><a href="http://d.163.com/db/cn/49513/equipment/iceblink" target="_blank" rel="noopener">闪耀冰晶</a></strong>的debuff「你的冰霜技能（带<code>排山倒海</code>的<strong><a href="http://d.163.com/db/cn/49513/skill/crippling-wave" target="_blank" rel="noopener">断筋诀</a></strong>）<strong>额外</strong>降低敌方25%移速，并且受到暴击的几率提高10%」，换言之，你给<strong>全队</strong>增加了<strong>10%的暴击率</strong>。</p><h3 id="萃取-3"><a href="#萃取-3" class="headerlink" title="萃取"></a>萃取</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/flying-dragon-70" target="_blank" rel="noopener">翔龙</a></strong> 打拳有几率攻速翻倍 <del>我就是拳皇</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/nemesis-bracers-70" target="_blank" rel="noopener">复仇者护腕</a></strong> 开塔<br><strong><a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a></strong> 5+2唯一指定戒指，最大化利用特效</p><h3 id="宝石-3"><a href="#宝石-3" class="headerlink" title="宝石"></a>宝石</h3><p><strong><a href="http://d.163.com/db/cn/49513/equipment/gogok-of-swiftness" target="_blank" rel="noopener">迅捷勾玉</a></strong> CDR、攻速、闪避 <del>奶僧的完美宝石，点到150没毛病</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/iceblink" target="_blank" rel="noopener">闪耀冰晶</a></strong> 控怪、变相提高全队10%暴击 <del>等级只和减速效果有关，而且上限最多点到50</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/gem-of-efficacious-toxin" target="_blank" rel="noopener">剧毒宝石</a></strong> 10%增伤10%减伤 <del>点到25出特效就够了，再点没意义，你就是dot加成50000%武器伤又有多少伤害呢</del><br><strong><a href="http://d.163.com/db/cn/49513/equipment/esoteric-alteration" target="_blank" rel="noopener">转煞秘石</a></strong> 太脆就换掉<strong><a href="http://d.163.com/db/cn/49513/equipment/gem-of-efficacious-toxin" target="_blank" rel="noopener">剧毒宝石</a></strong>增加坚韧<br><strong>普通宝石</strong> 头<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（CDR），护甲<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-diamond" target="_blank" rel="noopener">钻石</a>（全抗），武器<a href="http://d.163.com/db/cn/49513/equipment/flawless-royal-amethyst" target="_blank" rel="noopener">紫宝石</a>（击回）</p><h3 id="技能-3"><a href="#技能-3" class="headerlink" title="技能"></a>技能</h3><p><strong><a href="http://d.163.com/db/cn/49513/skill/crippling-wave" target="_blank" rel="noopener">断筋诀</a></strong> <code>排山倒海</code> 自带冰冻减攻速减移速，同时配合<strong><a href="http://d.163.com/db/cn/49513/equipment/iceblink" target="_blank" rel="noopener">闪耀冰晶</a></strong>和<strong><a href="http://d.163.com/db/cn/49513/equipment/gem-of-efficacious-toxin" target="_blank" rel="noopener">剧毒宝石</a></strong>上debuff<br><strong><a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a></strong> <code>宁静致远</code> 低配群体舍身，并给<strong>全队</strong>上一个巨量的伤害吸收盾 <del>斯奎特zaima</del><br><strong><a href="http://d.163.com/db/cn/49513/skill/inner-sanctuary" target="_blank" rel="noopener">金轮阵</a></strong> <code>庇护之殿</code> <strong>站在里面</strong> 55%减伤，免控 <del>「使敌人无法进入」这个效果不必在意，忽略它吧</del><br><strong><a href="http://d.163.com/db/cn/49513/skill/breath-of-heaven" target="_blank" rel="noopener">回天息</a></strong> <code>御风而行</code> 大量治疗并加30%移速<br><strong><a href="http://d.163.com/db/cn/49513/skill/mantra-of-healing" target="_blank" rel="noopener">治愈真言</a></strong> <code>雪中送炭</code> 主要技能，给队友加伤害吸收盾 <del>手速有多快，队伍就有多硬</del><br><strong><a href="http://d.163.com/db/cn/49513/skill/epiphany" target="_blank" rel="noopener">灵光悟</a></strong> <code>疗伤雾</code> 所有技能带一点治疗效果，聊胜于无，同时提高全队秒回<br><strong><a href="http://d.163.com/db/cn/49513/skill/resolve" target="_blank" rel="noopener">精诚之心</a></strong> 常驻20%群体减伤<br><strong><a href="http://d.163.com/db/cn/49513/skill/beacon-of-ytar" target="_blank" rel="noopener">伊塔之辉</a></strong> 常驻20%CDR<br><strong><a href="http://d.163.com/db/cn/49513/skill/near-death-experience" target="_blank" rel="noopener">濒死体验</a></strong> 春哥<br><strong><a href="http://d.163.com/db/cn/49513/skill/chant-of-resonance" target="_blank" rel="noopener">真言谐鸣</a></strong> 真言减耗50% &amp; 回内+4/s <del>一般不需要，建议<strong>确认不缺内力后</strong>就果断换<strong><a href="http://d.163.com/db/cn/49513/skill/seize-the-initiative" target="_blank" rel="noopener">先发制人</a></strong></del></p><h3 id="可选-3"><a href="#可选-3" class="headerlink" title="可选"></a>可选</h3><p>如果坚韧确实足够，可以萃取<strong><a href="http://d.163.com/db/cn/49513/equipment/the-flavor-of-time-70" target="_blank" rel="noopener">时光流韵</a></strong>，把<strong><a href="http://d.163.com/db/cn/49513/equipment/justice-lantern-70" target="_blank" rel="noopener">正义灯戒</a></strong>换成<strong><a href="http://d.163.com/db/cn/49513/equipment/ring-of-royal-grandeur-70" target="_blank" rel="noopener">皇家华戒</a></strong>，空出来的项链位带<strong><a href="http://d.163.com/db/cn/49513/equipment/t12legendaryhellfireamuletintx1" target="_blank" rel="noopener">智力之地狱火护符</a></strong>（10智力=1全抗）即可平白多赚一个被动。</p><p>如果有别的小朋友抢着开塔，护甲萃取可以换其他玩具<strong><a href="http://d.163.com/db/cn/49513/equipment/aquila-cuirass-70" target="_blank" rel="noopener">天鹰斗衣</a></strong>/<strong><a href="http://d.163.com/db/cn/49513/equipment/gloves-of-worship-70" target="_blank" rel="noopener">礼赞手套</a></strong>/<strong><a href="http://d.163.com/db/cn/49513/equipment/boots-of-disregard-70" target="_blank" rel="noopener">蔑视长靴</a></strong>/<strong><a href="http://d.163.com/db/cn/49513/equipment/insatiable-belt-70" target="_blank" rel="noopener">贪婪腰带</a></strong>等等自行取舍。</p><p><strong><a href="http://d.163.com/db/cn/49513/skill/deadly-reach" target="_blank" rel="noopener">冲心拳</a></strong> <code>隔空打穴</code> 如果觉得「队友用不着禅定盾来保，真言盾就够了」而且「强奥/熔火/亵渎/胖子自爆/咦这是什么圈站里面洗澡好舒服无敌是啥能吃吗」就换掉<a href="http://d.163.com/db/cn/49513/skill/serenity" target="_blank" rel="noopener">禅定</a>，然后萃取可以换<strong><a href="http://d.163.com/db/cn/49513/equipment/strongarm-bracers-70" target="_blank" rel="noopener">力士护腕</a></strong>，给boss打<a href="http://d.163.com/db/cn/49513/skill/deadly-reach" target="_blank" rel="noopener">冲心拳</a>出击退易伤</p><p><strong><a href="http://d.163.com/db/cn/49513/skill/seize-the-initiative" target="_blank" rel="noopener">先发制人</a></strong> 不缺内力可以换掉<strong><a href="http://d.163.com/db/cn/49513/skill/chant-of-resonance" target="_blank" rel="noopener">真言谐鸣</a></strong></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 暗黑破坏神3 </tag>
            
            <tag> 配装 </tag>
            
            <tag> 武僧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《Minecraft》红石笔记#1 红石比较器与满箱检测</title>
      <link href="/game/Minecraft-Redstone-1-FullBoxDetector/"/>
      <url>/game/Minecraft-Redstone-1-FullBoxDetector/</url>
      
        <content type="html"><![CDATA[<h2 id="核心元件——红石比较器"><a href="#核心元件——红石比较器" class="headerlink" title="核心元件——红石比较器"></a>核心元件——红石比较器</h2><p>详情请查阅<a href="https://minecraft-zh.gamepedia.com/红石比较器" target="_blank" rel="noopener">wiki</a>，细节不再赘述。<br>挑重点的说：两种模式，信号强度计算。</p><h3 id="比较模式-前侧火把关闭"><a href="#比较模式-前侧火把关闭" class="headerlink" title="比较模式(前侧火把关闭)"></a>比较模式(前侧火把关闭)</h3><p>「侧面信号」&gt;「后面信号」，输出0；否则输出后面信号。<br>放置后默认为此模式。</p><h3 id="作差模式-前侧火把开启"><a href="#作差模式-前侧火把开启" class="headerlink" title="作差模式(前侧火把开启)"></a>作差模式(前侧火把开启)</h3><p>「（两侧中最大的）侧面信号」与「后面信号」作差，差值取绝对值，最后输出这个值。</p><a id="more"></a><h3 id="直接输出-计算容器信号强度"><a href="#直接输出-计算容器信号强度" class="headerlink" title="直接输出(计算容器信号强度)"></a>直接输出(计算容器信号强度)</h3><h4 id="已知物品数量，求信号强度值"><a href="#已知物品数量，求信号强度值" class="headerlink" title="已知物品数量，求信号强度值"></a>已知物品数量，求信号强度值</h4><p>当比较器背后为容器时，输出的信号强度与容器内容量有关。<br>容器为空时，输出0。<br>容器不为空时，<code>信号强度 = 向下取整[1 + (所有物品格的满度和 / 物品格总数) * 14]</code>。</p><blockquote><p><strong>什么叫满度？</strong><br><code>单格的满度 = 单格中的物品数 / 此类物品最大堆叠数</code><br>1组堆叠64个的物品A有48个，则满度为0.75。<br>1组堆叠16个的物品B有8个，则满度为0.5。<br>无法堆叠（即1组就1个；单组有且仅有1个）的物品C有1个，满度为1。</p></blockquote><blockquote><p><strong>为什么是除以14？</strong><br>因为「1.容器不为空才会有信号」&amp;&amp;「2.信号从1到15只有14种变化」。</p></blockquote><h4 id="已知信号强度值，求物品数量"><a href="#已知信号强度值，求物品数量" class="headerlink" title="已知信号强度值，求物品数量"></a>已知信号强度值，求物品数量</h4><p><code>所需物品数 = max{目标信号强度 , 取整[ ( 容器总格数 * 64 / 14) * ( 目标信号强度 - 1 ) ] + 1 }</code></p><h2 id="逻辑实现"><a href="#逻辑实现" class="headerlink" title="逻辑实现"></a>逻辑实现</h2><p>我们想实现的功能是满箱检测，满箱检测的目的一般是检测到箱子满了之后做些什么。<br>比如说防止溢出、防止溢出、还有防止溢出（说的就是你，地毯机。点名批评.jpg）。<br>也就是说，触发的条件是「箱子满了」，需要的结果是「发出信号」。<br>这里提供三种思路，抛砖引玉，欢迎革新想法和改良建议。</p><h2 id="差值计算法"><a href="#差值计算法" class="headerlink" title="差值计算法"></a>差值计算法</h2><p>也是目前最主流的用法，网上教程基本都是这个。</p><h3 id="布线"><a href="#布线" class="headerlink" title="布线"></a>布线</h3><p>这里我们先约定「箱子+一个普通比较器」是一个不管何种方案必定存在的整体。</p><blockquote><p>因为无论你准备如何实现满箱检测，总之你是一定要「用比较器检测箱子内容存量并输出对应信号」的。</p></blockquote><p>那么我们把这个箱子<strong>加上（用来输出它所用容量的）比较器</strong>的整体叫做，额，叫做什么呢，容量检测器吧。<br>好，现在我们获得了一个叫做「<strong>容量检测器</strong>」的新红石元件，它可以装若干物品，并根据物品数量输出相应的信号。<br>这个新元件（容量检测器）是由一个容器和一个「普通比较器」组成的，这个「普通比较器」只起一个显示作用；一会我们还要用到另一个「核心比较器」，那个<strong>后来的「核心比较器」</strong>才是真正实现主要功能的红石元件。</p><p>开始走线了。</p><ol><li>先放一个「核心比较器」</li><li>把「核心比较器」切换到作差模式（比较器前端火把亮起）</li><li>「核心比较器」侧面的input接「容量检测器」的output</li><li>「核心比较器」背后的input接一个红石信号源：红石火把、拉杆（当然要是打开状态）、处于充能状态的方块（比如红石块）之类</li></ol><p><img src="https://i.loli.net/2019/12/11/zT6uij1WEY9ObZG.png" alt="差值计算法"><br>完成。</p><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>当「容量检测器」装满物品时，「核心比较器」无输出；否则输出n格信号（n取决于容器的剩余空间，剩余空间越多则信号越强）。</p><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>处于「<strong>作！差！模！式！</strong>」的「核心比较器」后面输入固定为15，当侧面输出!=15时，相差多少就输出对应强度的信号。<br>只有侧面输入==15时，差值为0，无输出。</p><h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>我们要的是满箱检测啊，满的时候输出，不满不输出。这个效果反了，弟弟。<br>那简单，短路红石火把取个反就行了。</p><h2 id="控制信号法"><a href="#控制信号法" class="headerlink" title="控制信号法"></a>控制信号法</h2><p>这个方案其实挺傻的，和第一种思路比起没有明显优势，局限性还更大（需要用红石线控制信号强度）。（但正因如此布线反而灵活了？）</p><h3 id="布线-1"><a href="#布线-1" class="headerlink" title="布线"></a>布线</h3><ol><li>先放一个「核心比较器」</li><li>「核心比较器」侧面的input接「容量检测器」的output</li><li>「核心比较器」背后的input接<strong>两格</strong>红石线，然后再接红石信号源（总之就是要保证「核心比较器」后侧输入为14，只要能做到这一点就行。怕红石线被干扰的话骚一点接熔炉+比较器，再骚一点接讲台放一本15页的书翻到第14页都行）</li></ol><blockquote><p>话说1.14（指JAVA版）加入的讲台用来控制信号真的很好用<br>只占用一格，可以输出任意强度信号<br>缺点是成本过高（包括制造需要的时间成本）<br><del>其实成本高只是比起传统红石方案来说，实际上也高不到哪里去（10个木板+3本书+1套书与笔）</del></p></blockquote><p><img src="https://i.loli.net/2019/12/11/qpXS2Ookv3MKHQ7.png" alt="控制信号法"></p><h3 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h3><p>当「容量检测器」装满物品时，「核心比较器」无输出；否则固定输出14格信号。</p><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><p>「核心比较器」后面输出固定为14，当侧面输入&lt;=14时，总是输出14。<br>只有侧面输入==15时，比较器被截断，无输出。</p><h3 id="应用-1"><a href="#应用-1" class="headerlink" title="应用"></a>应用</h3><p>想要实现满箱才发出警报信号的话，最后输出需要取反，这一点同「差值计算法」。</p><h2 id="暴力比较法"><a href="#暴力比较法" class="headerlink" title="暴力比较法"></a>暴力比较法</h2><p>个人最喜欢的方法，简单粗暴。<br>原理简单，效果直观。</p><h3 id="布线-2"><a href="#布线-2" class="headerlink" title="布线"></a>布线</h3><ol><li>先放一个「核心比较器」</li><li>「核心比较器」<strong>背后的input</strong>接「容量检测器」的output</li><li>「核心比较器」<strong>侧面的input</strong>接<strong>一格</strong>红石线，然后再接红石信号源（需要放一格红石线的原因是红石比较器的侧面输入很傲娇，它不认发散的信号，只有用红石线或者中继器直接指定方向地接入它才认）</li></ol><p><img src="https://i.loli.net/2019/12/11/I5XV3GETxAcadLF.png" alt="暴力比较法"></p><h3 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h3><p>当「容量检测器」装满物品时，「核心比较器」输出15格信号；否则无输出。</p><h3 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h3><p>「核心比较器」侧面输出固定为15，当后面输入&lt;=14时，总是无输出（被侧面的15截断了）。<br>只有后面输入==15时，比较器被打通，输出15。</p><p>「核心比较器」侧面接入的红石线怕被干扰替换成中继器也行，不用怕会多延迟，这个中继器只是用来定向转送信号源的。<br>当它第一次被接通之后就常时输出15了，所以打几档都无所谓，此处作用完全等于「加了抗干扰和永不衰减两个功能的」红石线（当然这里只用到了抗干扰）。</p><h3 id="应用-2"><a href="#应用-2" class="headerlink" title="应用"></a>应用</h3><p>不用取反了，直接就是满箱才输出不满不输出，而且只要输出就是输出最大信号（15格）。</p><p>布线简直不能更简单，完全不用思考，箱子接第一个比较器接第二个比较器，第二个比较器侧面接入15信号，完成。<br>而且最后完成的效果看起来也很直观。</p><p>最重要的一点是这个方案比前面两个延迟都更短。<br>小型电路要用非门，利用短路做的火把反相器可以说唯一解了吧。<br>众所周知，<a href="https://minecraft-zh.gamepedia.com/%E7%BA%A2%E7%9F%B3%E7%81%AB%E6%8A%8A#.E7.BA.A2.E7.9F.B3.E5.85.83.E4.BB.B6" target="_blank" rel="noopener">红石火把有2gt延迟</a>，即红石火把改变状态至少需要1 tick。<br>也就是说，红石电路每多用一个火把反相器，就会多0.1s延迟。<br>0.1s的延迟已经不小了，我也不是写轮眼，把三种做在一起同时观察，延迟的差别肉眼可见。</p><h2 id="附录-满度表"><a href="#附录-满度表" class="headerlink" title="附录-满度表"></a>附录-满度表</h2><p>摘录自<a href="https://minecraft-zh.gamepedia.com/%E7%BA%A2%E7%9F%B3%E6%AF%94%E8%BE%83%E5%99%A8#.E5.AE.B9.E5.99.A8" target="_blank" rel="noopener">wiki</a></p><table style="margin-left: 0.5em; margin-right: 0; text-align: center;">    <tbody>        <tr>            <th colspan="7">容器信号强度所需最少物品</th>        </tr>        <tr>            <th rowspan="3" style="vertical-align:bottom;">信号<br>强度</th>            <th colspan="6">容器与物品栏数</th>        </tr>        <tr>            <div>                <th>3格容器</th>                <th>5格容器</th>                <th>9格容器</th>                <th>27格容器</th>                <th>54格容器</th>                <th>—</th>            </div>        </tr>        <tr>            <th>熔炉<br>高炉<br>烟熏炉</th>            <th>漏斗<br>酿造台<br>漏斗矿车on探测铁轨</th>            <th>发射器<br>投掷器</th>            <th>箱子/陷阱箱<br>木桶<br>潜影盒<br>运输矿车on探测铁轨</th>            <th>大箱子/大陷阱箱</th>            <th>唱片机播放的唱片</th>        </tr>        <tr>            <td>0</td>            <td>0个</td>            <td>0个</td>            <td>0个</td>            <td>0个</td>            <td>0个</td>            <td>—</td>        </tr>        <tr>            <td>1</td>            <td>1个</td>            <td>1个</td>            <td>1个</td>            <td>1个</td>            <td>1个</td>            <td>“13”</td>        </tr>        <tr>            <td>2</td>            <td>14个</td>            <td>23个</td>            <td>42个</td>            <td>1组+60个</td>            <td>3组+55个</td>            <td>“cat”</td>        </tr>        <tr>            <td>3</td>            <td>28个</td>            <td>46个</td>            <td>1组+19个</td>            <td>3组+55个</td>            <td>7组+46个</td>            <td>“blocks”</td>        </tr>        <tr>            <td>4</td>            <td>42个</td>            <td>1组+5个</td>            <td>1组+60个</td>            <td>5组+51个</td>            <td>11组+37个</td>            <td>“chirp”</td>        </tr>        <tr>            <td>5</td>            <td>55个</td>            <td>1组+28个</td>            <td>2组+37个</td>            <td>7组+46个</td>            <td>15组+28个</td>            <td>“far”</td>        </tr>        <tr>            <td>6</td>            <td>1组+5个</td>            <td>1组+51个</td>            <td>3组+14个</td>            <td>9组+42个</td>            <td>19组+19个</td>            <td>“mall”</td>        </tr>        <tr>            <td>7</td>            <td>1组+19个</td>            <td>2组+10个</td>            <td>3组+55个</td>            <td>11组+37个</td>            <td>23组+10个</td>            <td>“melohi”</td>        </tr>        <tr>            <td>8</td>            <td>1组+32个</td>            <td>2组+32个</td>            <td>4组+32个</td>            <td>13组+32个</td>            <td>27组</td>            <td>“stal”            </td>        </tr>        <tr>            <td>9</td>            <td>1组+46个</td>            <td>2组+55个</td>            <td>5组+10个</td>            <td>15组+28个</td>            <td>30组+55个</td>            <td>“strad”            </td>        </tr>        <tr>            <td>10</td>            <td>1组+60个</td>            <td>3组+14个</td>            <td>5组+51个</td>            <td>17组+23个</td>            <td>34组+46个</td>            <td>“ward”            </td>        </tr>        <tr>            <td>11</td>            <td>2组+10个</td>            <td>3组+37个</td>            <td>6组+28个</td>            <td>19组+19个</td>            <td>38组+37个</td>            <td>“11”            </td>        </tr>        <tr>            <td>12</td>            <td>2组+23个</td>            <td>3组+60个</td>            <td>7组+5个</td>            <td>21组+14个</td>            <td>42组+28个</td>            <td>“wait”            </td>        </tr>        <tr>            <td>13</td>            <td>2组+37个</td>            <td>4组+19个</td>            <td>7组+46个</td>            <td>23组+10个</td>            <td>46组+19个</td>            <td>—            </td>        </tr>        <tr>            <td>14</td>            <td>2组+51个</td>            <td>4组+42个</td>            <td>8组+23个</td>            <td>25组+5个</td>            <td>50组+10个</td>            <td>—            </td>        </tr>        <tr>            <td>15</td>            <td>3组</td>            <td>5组</td>            <td>9组</td>            <td>27组</td>            <td>54组</td>            <td>—            </td>        </tr>    </tbody></table>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
            <tag> 红石 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「杂谈」现在这个年头人均强迫症，但有人是真的强迫症</title>
      <link href="/gossip/Obsessive-Compulsive-Disorder/"/>
      <url>/gossip/Obsessive-Compulsive-Disorder/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本文包含大量个人观点，必然有片面之处，是否可靠请自行思考，健康问题请遵医嘱。</p></blockquote><a id="more"></a><h2 id="强迫症是什么"><a href="#强迫症是什么" class="headerlink" title="强迫症是什么"></a>强迫症是什么</h2><ul><li>拼好一块拼图</li><li>把一个画了四分之三的圆补齐</li><li>分类一堆混在一起的坚果</li><li>玩俄罗斯方块</li><li>按系列-高度的顺序重新摆放书柜</li><li>诸如此类「将混沌的事物以某种规律排序」或是「将残缺的事物补齐臻至化境」的事，都<strong>不是</strong>强迫症</li><li>别说你爽了，是个人都会爽</li></ul><p>人类会趋向于将事物推动至某种极致，以至于成为某种精神需求，即完成欲。<br>人总是倾向满足自己的欲望以获得快感，「满足完成欲」称为紫格尼克效应（<a href="https://en.wikipedia.org/wiki/Zeigarnik_effect" target="_blank" rel="noopener">Zeigarnik effect</a>）。</p><blockquote><p>顺便一提，这是个一般意义上的「坏」效应。<br>一是很多时候没有必要，井盖花纹和路面花纹没有对齐，对齐了你会爽吗，会；你会去把它对齐吗，不会。<br>假如你真的闲得蛋疼去对齐了……这波啊，这波是全人类血亏，因为你本来可以用「做这件事花的时间和精力」来生产更多对人类社会有益的价值。<br>二是在现实生活中，紫格尼克效应强烈的人相较于一直坚持到真正获得完成欲，常常更容易选择放弃；而人往往会对让自己产生挫败感的事物避之若浼。</p><blockquote><p>这是另外一个概念，如果不足以称为公理的话，我们叫它常识好了：<br>任何生物都是趋利避害的，因为不会趋利避害的生物已经灭绝了，而不够趋利避害的生物正在灭绝。</p></blockquote><p>刚买的口琴有一处簧片弯了，修了半天没修好，也许你以后这辈子都不会碰口琴了，也许我们就失去了一位从口琴入门到全乐器制霸的大音乐家。</p></blockquote><p>那么什么才是强迫症？</p><p>因为自动生成的原因，我Hexo博文的meta信息可能是这样的格式：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: 标题</span><br><span class="line">tags:</span><br><span class="line">  - 标签1</span><br><span class="line">  - 标签2</span><br><span class="line">categories:</span><br><span class="line">  - 分类</span><br><span class="line">date: 时间</span><br></pre></td></tr></table></figure><p>我有一次偶然注意到以「title - date - categories - tags」依次排列的时候：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: 标题</span><br><span class="line">date: 时间</span><br><span class="line">categories:</span><br><span class="line">  - 分类</span><br><span class="line">tags:</span><br><span class="line">  - 标签1</span><br><span class="line">  - 标签2</span><br></pre></td></tr></table></figure><p>我发现有一种奇妙的韵律，并认定这样才符合我的个人美学。<br>如果不是这样的话就不对劲，不合理。好吧，我不管它合不合理，它让我感觉不舒服。</p><p>我希望这样做。<br>你要问这样做有什么意义，没有意义。<br>但我就是愿意，其实不是我主观上愿意，但客观上看起来就是我主观愿意。</p><p>我会逐一浏览其他几十篇Hexo博文，然后把所有不是这个排列顺序的文章全部改过来。<br>有必要吗？如果我不说，没有任何人能感知，包括我自己，但我就是想做，这就是强迫观念。<br>如果状况恶化成我一定要做，并且我做了，那就是强迫行为了。<br>如果一个人的强迫行为严重到影响他保持人类尊严地正常生活的进程，那就是强迫症了，一种病症。</p><blockquote><p>包括「我能不能写个脚本来解决，不难吧，不过我写了脚本来代工还是得全部一一检查一遍」这个想法，也是强迫观念。</p></blockquote><h2 id="治疗方式"><a href="#治疗方式" class="headerlink" title="治疗方式"></a>治疗方式</h2><p>和其他精神疾病一样，分为心理治疗和生理治疗。</p><h3 id="心理治疗"><a href="#心理治疗" class="headerlink" title="心理治疗"></a>心理治疗</h3><p>自发主动的心理治疗是最有效的，OCD本身就是心理疾病。俗说话「心病还须心药医」对吧。<br>具体balabala学名不太了解，我也不懂，一句话概括就是转移注意力，顺便举几个实际的例子。<br>强迫的时候<strong>想点别的</strong>，<strong>做点别的</strong>。</p><p>打个比方，我现在强迫行为是关门，我犯强迫了就翻来覆去地不断开关门，而且门每次开关的程度、速度必须一致。<br>扇自己一耳光坚定信心，然后直接把衣服脱了去洗澡。<br>这样还开的话就叫一万个人来家里开Party，还开不开门，开不开门？<br>这样还开的话直接就医吧，赶紧的。</p><p>打个比方，我现在强迫行为是机械舞，我犯强迫了在我心里地面突然塌陷了。<br>现在地上只剩一条与独木桥同宽的小径，这条小径可能是直线，可能是曲线，可能是折线。<br>我必须按着这条全世界只有我能看到的小径走，一直走，走到那两根承重柱之间。<br>好，现在像机械舞一样，或者说像时光回溯一样，倒退回去。先不说别人看我的目光，我寻思我TM也不会跳舞啊。<br>说实话，OCD最折磨人的不是做出强迫行为，强迫行为产生的后果未必有多煎熬。<br>但卡在强迫观念和强迫行为之间是百分之百的，突然词穷，真正的suffer。<br>扇自己一耳光坚定信心，然后立刻打个滴滴到郊区的野地里。这块地也许有田，也许有林子，也许什么都没有。<br>但肯定没有那两根承重柱了。</p><p>打个比方，我现在强迫行为是切东西，切什么？切自己。有一天我不小心划了一条口子，然后我犯强迫了。<br>我必须在第一个伤口附近切第二条口子，必须与第一条口子平行，而且所有伤口必须等深、等长。<br>之后也一样，而且从第三条开始，两两伤口之间要等距，是不是变成数学问题了，多迷人啊。<br>别着迷了，扇自己一耳光坚定信心，然后拿块干净的布绑好伤口出去跑步，一直跑，跑到两眼发黑抬不动小腿为止。<br>脱力昏迷也好过全身切满口子流血致死吧。不过要注意剧烈运动之后不能马上躺下，心脏不好一躺躺没了，靠墙站到能慢慢呼吸。</p><blockquote><p>这里说的剧烈运动是指前面说的，脱力到睁着眼睛都一片黑暗看不到东西。<br>常识意义上的剧烈运动一般注意别大量灌水就好。</p></blockquote><p>举例可能有些偏激，但道理就是这样，「假如心理上没办法控制自己，那就从物理上控制自己」。<br>薛定谔的猫你或许不信，王阳明的花你或许也不信，吗的伽利略的铁球砸你头上你要信吧。</p><h3 id="生理治疗"><a href="#生理治疗" class="headerlink" title="生理治疗"></a>生理治疗</h3><p>据我所知目前用的抗强迫药物都是抗抑郁药，最常见的有舍曲林，盐酸氟西汀等SSRIs，德巴金不清楚是不是SSRIs。印象里还有文拉法辛，至于别的抗抑郁药诸如帕罗西汀、西酞普兰、度洛西汀等等，不太了解药理和作用机制，不知道能不能对强迫症起效。<br>具体不多说了，总之<strong>愿意尝试药物治疗一定请咨询权威机构，并在专业医生指导下用药</strong>。</p><h3 id="其他治疗"><a href="#其他治疗" class="headerlink" title="其他治疗"></a>其他治疗</h3><p>想什么呢，想试试物理治疗？杨教授都关门了。<br>或者指望非专业人士的<strong>话疗</strong>是最不靠谱的一种：</p><ul><li>你为什么非要做这件事？</li><li>我不知道，但我就是要这样做。（OS：其实我不想这样做啊，救救我。）</li><li>那你别这样做啊。</li><li>我不得不这样做啊。怎么办？</li><li>有任何人或者任何外在事物影响你、使你不得不这样做吗？</li><li>没有。</li><li>那你别这样做啊。</li><li>我不得不这样做啊。</li><li>……</li></ul><p><strong>没有人</strong>可以感同身受，这句话我说过一万次，针扎不到你身上你永远不知道有多痛。<br>尽量不要把希望交给没有相关知识的非专业人士，况且你未必能保证他对你足够体贴、善良、有耐心。<br>徒增烦恼。</p><p>重点不是「这样做」，重点是「能愿动词」。<br>不是我<strong>（想）要</strong>这样做，是我<strong>（必须得）要</strong>这样做。<br>不是<code>want to</code>，而是<code>have to</code>。我 <strong>没办法 不</strong> 这样做。<br>谁have的我？我不知道，如果我知道我可能会一刀捅死他。</p><h2 id="现实中的强迫症"><a href="#现实中的强迫症" class="headerlink" title="现实中的强迫症"></a>现实中的强迫症</h2><p>强迫观念导致的强迫行为反映到现实生活中，对社会造成影响，一般有三种后果。</p><h3 id="正面的后果"><a href="#正面的后果" class="headerlink" title="正面的后果"></a>正面的后果</h3><p>一般来说这些幸运儿都成功了，然后罹患强迫症的事实被埋没在鲜花和掌声中。<br>甚至最离谱的能归功一部分成功原因于强迫症，然后干脆就把强迫症当作正面影响来宣传。</p><h3 id="负面的后果"><a href="#负面的后果" class="headerlink" title="负面的后果"></a>负面的后果</h3><p>举个最<strong>典型</strong>的例子，相信大家没见过也听说过，偷窃癖，「我怎么就管不住这手呢」。<br>其实这里面有三种人：</p><ul><li>精神健康的正常人<br>这种人是最坏的。他什么病都没有，他就是试图把自己不但好吃懒做而且甚至不惜触犯《中华人民共和国刑法》第二百六十四条的规定而产生的主观责任推卸给客观原因。没别的，纯坏逼。</li><li>偷窃成瘾者<br>不劳而获是会带来快感的——不管这种快感的本质是多巴胺、内啡肽、催产素、去甲肾上腺、或者别的什么类吗啡肽——世界这么大，也许就会有一些奇葩的人生经历和受体奇怪，让偷窃行为可以产生堪比毒品的成瘾症状。<br>同时偷窃行为本身会带来智力或者行动力上的优越感，常常出现在武侠话本里的盗圣就是这种类型。也许其实他看不上这点价值，偷完还给你都行，但他就是爱偷。</li><li>真正的强迫症患者<br>我知道你也是受害者，但法人也需要为自己的所作所为负责，何况你是自然人。病友，很遗憾以这种方式认识你。</li></ul><h3 id="中性的后果"><a href="#中性的后果" class="headerlink" title="中性的后果"></a>中性的后果</h3><p>某种程度上说这些人才是最惨的，无论好坏都不被外界所知，难以被亲人友人理解。<br>只能孤独地、日复一日地忍受折磨。<br>忍完这一辈子就过去了。<br>脆弱点的没忍住就进去了，不是那里，我说的是精神病院。<br>再脆弱点的没忍住就再也不用忍了。</p><p>这才是真正的强迫症——强迫性神经(官能)症（Obsessive-Compulsive Disorder），一种心理疾病。</p>]]></content>
      
      
      <categories>
          
          <category> 杂谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 强迫症 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「游戏」《剑侠情缘网络版叁》世外蓬莱Ver丐帮PVE两段宏思路及实现</title>
      <link href="/game/Jx3-100-SYPL-PVE-GaiBang/"/>
      <url>/game/Jx3-100-SYPL-PVE-GaiBang/</url>
      
        <content type="html"><![CDATA[<p>刚A回来，被撺掇玩个丐帮，于是开始上手<br>数据及循环基于前人的研究基础《<a href="https://w.pvp.xoyo.com:31727/share?contentId=5c01bacbe1caf4519ebc611b&type=News" target="_blank" rel="noopener">丐帮PVE新手入门指导</a>》<br>圣诞节这孩子竟然宅在家里写宏，猛男落泪  </p><a id="more"></a><h2 id="核心技能简介"><a href="#核心技能简介" class="headerlink" title="核心技能简介"></a>核心技能简介</h2><h3 id="「龙战于野」"><a href="#「龙战于野」" class="headerlink" title="「龙战于野」"></a>「龙战于野」</h3><p>耗蓝20%<br>突进<br>提供[buff:龙战于野]&lt;下个亢龙破防+25%&gt;<br>提供[buff:伏虎]&lt;每层全队破防+80&gt;(需要阵眼)  </p><h3 id="「龙跃于渊」"><a href="#「龙跃于渊」" class="headerlink" title="「龙跃于渊」"></a>「龙跃于渊」</h3><p>耗蓝30%<br>解控免控3s<br>提供[buff:龙跃于渊]&lt;下个亢龙带dot&gt;<br>(第8层奇穴[雨龙] dot可以叠8层)  </p><h3 id="「亢龙有悔」"><a href="#「亢龙有悔」" class="headerlink" title="「亢龙有悔」"></a>「亢龙有悔」</h3><p>耗蓝All in 终结技<br>(第1层奇穴[玄黄] 伤害+10%)<br>(第2层奇穴[御龙] 酒CD-2s 新循环基础)<br>(第5层奇穴[克己] 50%几率回蓝30% 6sCD)<br>(第9层奇穴[催盏] dot伤害+15%)<br>(第10层奇穴[复礼] 耗蓝&lt;50%获得[buff:盈久]&lt;伤害+15% 持续8s&gt;)  </p><h2 id="秘籍选择"><a href="#秘籍选择" class="headerlink" title="秘籍选择"></a>秘籍选择</h2><h3 id="核心技能"><a href="#核心技能" class="headerlink" title="核心技能"></a>核心技能</h3><p>酒中仙 3本调息时间 1本读条<br>恶狗拦路 1本回复10%内力 1本伤害 2本范围<br>龙战于野 1本调息时间 1本会心 2本伤害<br>龙跃于渊 1本调息时间 3本伤害<br>亢龙有悔 1本会心 2本伤害 1本加攻击</p><h3 id="次要技能"><a href="#次要技能" class="headerlink" title="次要技能"></a>次要技能</h3><p>拨狗朝天 3本会心 1本效果</p><h2 id="新循环-御龙"><a href="#新循环-御龙" class="headerlink" title="新循环(御龙)"></a>新循环(御龙)</h2><ol><li>酒-龙战-龙跃-蛟龙-双龙-亢龙</li><li>斜打&amp;恶狗-斜打&amp;犬牙-龙战-龙跃-亢龙</li><li>重复以上两步无限循环</li></ol><blockquote><p><strong>注意</strong>：有时脸黑没有触发克己可能导致[龙战]CD跟不上（因为少打一个[亢龙]就少转了一个GCD）<br><strong>如果</strong>循环到下一个<strong>[龙战]还在CD</strong>，可以<strong>先打一个[蛟龙]占位</strong>，再打[龙战]进入正常循环  </p></blockquote><h2 id="宏及原理"><a href="#宏及原理" class="headerlink" title="宏及原理"></a>宏及原理</h2><h3 id="半自动连招"><a href="#半自动连招" class="headerlink" title="半自动连招"></a>半自动连招</h3><h4 id="耗蓝"><a href="#耗蓝" class="headerlink" title="耗蓝"></a>耗蓝</h4><p>当初究竟是打跃战亢还是战跃亢我记得是各有说法没有定论<br>反正按照现在的机制则必然是<strong>战跃亢</strong>了<br><strong>先龙战</strong>再龙跃的三个理由：  </p><ol><li><p>续无疆<br> (第4层奇穴[无疆]施展<strong>伤害</strong>招式后若蓝量&gt;80%，则外攻+15%持续30s)<br> 使用一个伤害技能后剩余蓝量80%以上触发，也就是说只有耗蓝20%及以下的技能才能触发<br> <strong>龙战</strong>耗蓝20%<strong>可以触发</strong>，<strong>龙跃</strong>耗蓝30%<strong>无法触发</strong>  </p></li><li><p>补伏虎<br> [buff:伏虎]]只持续20s，其实时间非常紧<br> 因此为了不影响循环，需要<strong>优先补</strong>(打)<strong>伏</strong>(龙)<strong>虎</strong>(战)  </p></li><li><p>吃盈久<br> (第10层奇穴[复礼]亢龙耗蓝&lt;50%获得[buff:盈久]&lt;伤害+15% 持续8s&gt;)<br> 亢龙完[buff:盈久]持续8s，要尽可能让系数高的技能吃到这个增伤<br> 龙战系数(<strong>2.54</strong>)&gt;&gt;龙跃(<strong>0.9</strong>)  </p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">战跃亢</span><br><span class="line">&#x2F;cast [mana&lt;0.4] 亢龙有悔</span><br><span class="line">&#x2F;cast 双龙取水</span><br><span class="line">&#x2F;cast [buff:龙跃于渊&amp;mana&gt;0.5] 蛟龙翻江</span><br><span class="line">&#x2F;cast [buff:龙战于野] 龙跃于渊</span><br><span class="line">&#x2F;cast [buff:酒中仙&amp;mana&gt;0.7] 龙战于野</span><br></pre></td></tr></table></figure><h4 id="回蓝"><a href="#回蓝" class="headerlink" title="回蓝"></a>回蓝</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">自动回蓝</span><br><span class="line">&#x2F;cast [mana&lt;0.01] 酒中仙</span><br><span class="line">&#x2F;cast [mana&lt;0.3] 斜打狗背</span><br><span class="line">&#x2F;cast [mana&lt;0.3] 恶狗拦路</span><br><span class="line">&#x2F;cast [mana&lt;0.9] 反截狗臀</span><br><span class="line">&#x2F;cast [mana&lt;0.9] 犬牙交错</span><br></pre></td></tr></table></figure><blockquote><p>经测试使用这组二段宏平均1m40s挂上8层  </p></blockquote><h3 id="手动小技巧"><a href="#手动小技巧" class="headerlink" title="手动小技巧"></a>手动小技巧</h3><h4 id="蛟龙套只打前两招"><a href="#蛟龙套只打前两招" class="headerlink" title="蛟龙套只打前两招"></a>蛟龙套只打前两招</h4><p>因为两个原因：<br>一、明辨的修改  </p><pre><code>1. 导致蛟龙套占比减少  2. 现在的明辨必须打满四连才能吃到20%的满破防buff  </code></pre><blockquote><p>的确现在点明辨还是每打一个蛟龙叠1层<br>但是叠到4层后必须再重新打满四连才能刷新这个4层的buff  </p></blockquote><p>二、蛟龙套后两个技能僵直太大  </p><p>基于这两个理由应该尽量避免打出来后两招，只打前两招<br>用宏代替[蛟龙翻江]键位可以做到只可能打出前两招无失误  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;cast 双龙取水</span><br><span class="line">&#x2F;cast 蛟龙翻江</span><br></pre></td></tr></table></figure><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>我爱丐帮！<br>丐帮天下无……狗！</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 剑侠情缘网络版叁 </tag>
            
            <tag> PVE </tag>
            
            <tag> 游戏宏 </tag>
            
            <tag> 丐帮 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「运维」CentOS7修改SSH端口号「记一次被攻击（未遂）」</title>
      <link href="/operation/Linux-We-Are-Under-Attack/"/>
      <url>/operation/Linux-We-Are-Under-Attack/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>2018年12月22日，三丰云的VPS被攻击了  </p><blockquote><p>1C1G5M CentOS 7.0 x86_64位 BGP多线  </p></blockquote><a id="more"></a><p>第一次碰到DDOS之外的攻击，想想还有点小激动<br><code>cat /var/log/secure</code>查日志攻击时间是从[12/21 23:47:11]到[12/22 18:39:46]<br>攻击方式很直接，直接暴力跑字典试root密码<br>一开始差点笑出声，后来想想室友的习惯，突然理解了<br>下水道摸多了再怎么瞎也碰得到死耗子的<br>零安全意识的学生之类的人还挺多的，什么abc123肯定有的<br>或者有长时间没人管的机器，大不了跑上十天半个月，总有一天试得出来<br><del>虽然他这效率属实有点低</del><br><code>cat /var/log/secure|grep &#39;Failed password for root&#39;|wc -l</code>共11872次，平均5.72秒一次……  </p><p>反正测试机也没有重要数据，改个端口意思一下就行了  </p><h2 id="CentOS7修改SSH端口号"><a href="#CentOS7修改SSH端口号" class="headerlink" title="CentOS7修改SSH端口号"></a>CentOS7修改SSH端口号</h2><h3 id="新增端口"><a href="#新增端口" class="headerlink" title="新增端口"></a>新增端口</h3><p><code>vim /etc/ssh/sshd_config</code>可以看到  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#Port 22</span><br></pre></td></tr></table></figure><blockquote><p>虽然注释掉了，但ssh登录端口还是22<br>这是因为如果不特别指定另外端口则默认使用端口22  </p></blockquote><p><code>yyp</code>复制一行出来，把注释都去掉</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Port 22</span><br><span class="line">Port 12345</span><br></pre></td></tr></table></figure><blockquote><p>保留22是因为万一配置哪里出了问题22端口也登录不上就很尴尬<br>最好挑10000~65535之间的端口号，10000以下容易跟其他软件占用冲突  </p></blockquote><h3 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h3><p><code>firewall-cmd --permanent --query-port=12345/tcp</code>查看防火墙端口状态<br>如果回显<code>no</code>说明12345端口没有开放，open it<br><code>firewall-cmd --permanent --add-port=12345/tcp</code>预计回显<code>success</code><br><code>firewall-cmd --reload</code>重载防火墙策略<br><code>firewall-cmd --permanent --query-port=12345/tcp</code>再看一次<br>这次应该回显<code>yes</code>了，防火墙配置完成  </p><h3 id="重启使能"><a href="#重启使能" class="headerlink" title="重启使能"></a>重启使能</h3><p><code>systemctl restart sshd</code>重启ssh服务<br><code>systemctl restart firewalld.service</code>重启防火墙服务<br><code>shutdown -r now</code>最好服务器也重启一下</p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul><li>直接尝试通过12345端口登录ssh  </li><li>通过22端口成功登录后<code>ssh root@localhost -p 12345</code>测试12345端口</li><li><code>netstat -lnp|grep 12345</code>查看端口占用，如果没有回显说明没有被占用</li></ul><blockquote><p>如果这里失败大概率是因为没有设置好SELinux</p></blockquote><h3 id="设置SELinux"><a href="#设置SELinux" class="headerlink" title="设置SELinux"></a>设置SELinux</h3><p><strong>如果测试没问题可以跳过这一步</strong><br><code>sestatus</code>检查SELinux状态<br>如果第一行不是<code>SELinux status: enabled</code>，<code>vi /etc/selinux/config</code>并设置<code>SELINUX=enforcing</code>并重启服务器以启用SELinux<br><code>semanage port -l|grep ssh</code>查看ssh端口<br>没有安装semanage就<code>yum install policycoreutils-python</code>安装<br><code>semanage port -a -t ssh_port_t -p tcp 12345</code>开放12345的ssh端口</p><h3 id="关闭默认端口"><a href="#关闭默认端口" class="headerlink" title="关闭默认端口"></a>关闭默认端口</h3><p>成功了就可以放心关闭22端口了，<code>vim /etc/ssh/sshd_config</code>  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Port 22</span><br><span class="line">Port 12345</span><br></pre></td></tr></table></figure><p>注释掉22  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#Port 22</span><br><span class="line">Port 12345</span><br></pre></td></tr></table></figure><p><code>systemctl restart sshd</code>重启ssh服务  </p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p>《<a href="https://blog.csdn.net/ausboyue/article/details/53691953" target="_blank" rel="noopener">CentOS7设置ssh服务以及端口修改</a>》</p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「硬件」树莓派食用手册#3 安装传感器以及摄像头等相关硬件</title>
      <link href="/hardware/RPi-3-Prepare-Hardware/"/>
      <url>/hardware/RPi-3-Prepare-Hardware/</url>
      
        <content type="html"><![CDATA[<p>摄像头 / 移动硬盘 / 传感器  </p><a id="more"></a><h2 id="添加摄像头"><a href="#添加摄像头" class="headerlink" title="添加摄像头"></a>添加摄像头</h2><h3 id="使能摄像头"><a href="#使能摄像头" class="headerlink" title="使能摄像头"></a>使能摄像头</h3><p>官方Raspbian系统：</p><ol><li>断电情况下将摄像头插入树莓派主板</li><li>开机并执行<code>raspi-config</code>打开配置</li><li>选择<code>5 Interfacing Options</code></li><li>选择<code>P1 Camera</code></li><li>选择<code>Yes</code>使能摄像头</li><li>执行<code>reboot</code>重启树莓派</li></ol><p>由于「<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#1%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener">Debian Pi Aarch64</a>」裁剪了树莓派专用指令，需要手动编辑配置文件。<br><code>vim /boot/config.txt</code>找到<code>start_x=1</code>把前面的<code>#</code>反注释掉，<code>reboot</code>重启树莓派。</p><blockquote><p>最好不要带电拔插摄像头，网上有热拔插结果把摄像头烧坏的<br><del>我试过一次，目前还好好的，不过最好还是规范操作</del></p></blockquote><h3 id="调试摄像头"><a href="#调试摄像头" class="headerlink" title="调试摄像头"></a>调试摄像头</h3><ol><li>执行<code>vcgencmd get_camera</code>查看摄像头连接状况，<code>supported=1 detected=1</code>为连接正常</li><li>执行<code>raspistill -t 1000 -o test.jpg</code>测试摄像头工作状况，会曝光一秒在当前工作目录下<code>pwd</code>生成<code>test.jpg</code></li></ol><blockquote><p>如果执行<code>vcgencmd get_camera</code>显示<code>supported=1 detected=0</code><br>说明摄像头模块已使能，但是检测/识别不到到硬件连接<br>检查是不是插错了/插反了/接触不良  </p></blockquote><blockquote><p>插错：有两个带状插槽，TF卡和电源附近那个是显示屏的插槽，靠近网口和音频的这个才是摄像头插槽<br>其实插槽旁边都用白字标明了，注意观察  </p></blockquote><blockquote><p>插反：观察可知，插槽白色的一边是接触片，插头都不用仔细看只要不是瞎子都看得到正反<br>接触片对接触片，轻轻按进去就行了  </p></blockquote><blockquote><p>接触不良：其实只要插槽插头正常，一般插进去就没问题了<br>问题是摄像头的镜头部分和PCB板是用榫卯结构连接的，那个还挺容易掉的<br>我的装好壳死活连不上，然后怀疑线路断了研究了半天接口<br>最后把摄像头从外壳上拆下来才发现镜头都脱落了，连个象拔蚌  </p></blockquote><h3 id="使用摄像头"><a href="#使用摄像头" class="headerlink" title="使用摄像头"></a>使用摄像头</h3><blockquote><p>没有root权限需要在命令前加<code>sudo</code>，因为输出文件是保存在当前文件夹，需要当前文件夹的写入权限</p></blockquote><ul><li><p><code>raspistill</code>拍照</p></li><li><p><code>-t</code> 延时 单位为毫秒(ms)</p></li><li><p><code>-o</code>输出 后面跟生成文件的文件名</p></li><li><p><code>–e png</code>生成文件为png(Portable Network Graphics)格式<br>  众所周知，png作为无损压缩位图比jpg清晰度高，体积大，生成慢  </p></li><li><p><code>-w</code>/<code>-h</code> 指定宽度和高度</p></li><li><p><code>-x IFD0.Artist=Rakuyo -x GPS.GPSAltitude=12600/10</code>添加EXIF信息<br>  此处为作者Rakuyo，海拔1260米  </p></li><li><p><code>-ifx emboss</code>设置图像为浮雕风格</p></li><li><p><code>-cfx 128:128</code>设置图像YUV颜色编码的U(色度)和V(浓度)通道为指定值<br>  此处为黑白图像  </p></li><li><p><code>-t 10000 -tl 1000 -o image_%d.jpg</code>连拍<br>  此处为10秒(10000ms)内每隔1秒(1000ms)获取一张图像并命名为<em>image_1.jpg</em>、<em>image_2.jpg</em>……  </p></li><li><p><code>-p 100,200,300,400</code>使预览窗口出现在(100,200)的位置，并且尺寸为宽度300px、高度200px</p></li><li><p><code>-n</code>禁用预览窗口</p></li><li><p>执行<code>raspistill -t 1000 -o emb.jpg -ifx emboss</code>拍一张浮雕风格的照片</p></li><li><p>执行<code>raspistill -t 1000 -o 720p.jpg -w 1280 -h 720 -q 5</code>拍一张720p的照片</p></li></ul><p>如果在黑暗环境下，拍出来的图像整体呈绿色<br>知足8，这个价格拍出来还能看就不错了<br>实在追求夜视建议买夜视版的摄像头，那个有补光灯  </p><p><code>raspistill -t 100 -o test.jpg -w 1600 -h 900 -q5</code></p><h2 id="添加移动硬盘"><a href="#添加移动硬盘" class="headerlink" title="添加移动硬盘"></a>添加移动硬盘</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get update</span><br><span class="line">$ apt-get install ntfs-3g</span><br><span class="line"><span class="comment"># 将移动硬盘插入树莓派</span></span><br><span class="line">$ /sbin/fdisk -l <span class="comment"># 一般盘符是sda1</span></span><br><span class="line">$ mkdir /mnt/NTFS</span><br><span class="line">$ mount /dev/sda1 /mnt/NTFS</span><br><span class="line">$ df -h <span class="comment"># 查看挂载是否成功</span></span><br><span class="line"><span class="comment"># umount /mnt/NTFS # 卸载</span></span><br></pre></td></tr></table></figure><p><code>vim /etc/fstab</code>设置自动挂载：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/dev/sda1 /mnt/NTFS ntfs-3g default 0 0</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"><span class="comment"># /dev/sda1 /mnt/NTFS ntfs-3g defaults,noexec,umask=0000 0 0</span></span><br></pre></td></tr></table></figure><h2 id="安装Samba"><a href="#安装Samba" class="headerlink" title="安装Samba"></a>安装Samba</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install samba samba-common-bin <span class="comment"># 安装Samba</span></span><br></pre></td></tr></table></figure><p>安装没什么问题，主要是调通相当费了一些事。</p><p><code>vim /etc/samba/smb.conf</code>修改配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 位于 Global Settings [global] ##</span></span><br><span class="line">wins support = yes</span><br><span class="line"></span><br><span class="line"><span class="comment">## 位于 Share Definitions [homes] ##</span></span><br><span class="line"><span class="built_in">read</span> only = no</span><br><span class="line"></span><br><span class="line"><span class="comment">## 在文件末尾添加以下内容 ##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 共享文件的名称 将在网络上以此名称显示</span></span><br><span class="line">[Disk1]</span><br><span class="line">comment = Your Disk</span><br><span class="line"><span class="comment"># 共享文件的路径</span></span><br><span class="line">path = /mnt/NTFS</span><br><span class="line"><span class="comment"># 允许访问的用户</span></span><br><span class="line">valid users = root</span><br><span class="line"><span class="comment"># 组</span></span><br><span class="line">force group = root</span><br><span class="line"><span class="comment"># 新建文件权限</span></span><br><span class="line">create mask = 0755</span><br><span class="line"><span class="comment"># 新建文件夹权限</span></span><br><span class="line">directory mask = 0775</span><br><span class="line"><span class="comment"># 允许浏览</span></span><br><span class="line">browseable = yes</span><br><span class="line"><span class="comment"># 共享开放</span></span><br><span class="line">public = yes</span><br><span class="line"><span class="comment"># 取消只读</span></span><br><span class="line"><span class="built_in">read</span> only = no</span><br><span class="line"><span class="comment"># 可写</span></span><br><span class="line"><span class="comment"># writable = yes</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ service smbd restart &amp;&amp; service nmbd restart <span class="comment"># 重启服务</span></span><br><span class="line">$ smbpasswd -a root <span class="comment"># 授权现有用户并创建独立密码</span></span><br></pre></td></tr></table></figure><p>本来到这里就大功告成了，然后卡权限卡了半天。<br>不知道下列操作具体是哪一步起效了，总之我全做之后就没问题了。</p><h3 id="修改注册表"><a href="#修改注册表" class="headerlink" title="修改注册表"></a>修改注册表</h3><p><code>Win + R</code>运行<code>regedit</code>，搜索：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\LanmanWorkstation\Parameters</span><br></pre></td></tr></table></figure><p>查看是否有<code>AllowInsecureGuestAuth</code>这一项，如果有就修改，没有就菜单栏「编辑 - 新建 - DWORD(32位)值」。<br>总之就是<del>非常可爱</del> 令<code>AllowInsecureGuestAuth</code>值为<code>1</code>。</p><h3 id="启用功能"><a href="#启用功能" class="headerlink" title="启用功能"></a>启用功能</h3><p>「控制面板」-「程序和功能」-「启用或关闭 Windows 功能」，按名称顺序排列的，勾选「SMB 1.0/CIFS 文件共享支持」以及「SMB Direct」，确定。</p><h3 id="尝试连接"><a href="#尝试连接" class="headerlink" title="尝试连接"></a>尝试连接</h3><p>重启电脑后打开资源管理器，在地址栏输入<code>\\192.168.x.x</code>(树莓派IP)进入Samba共享的文件目录。<br>测试通过之后可以右键「此电脑」选择「映射网络驱动器」就能当成本地磁盘用了。<br>当然「实际使用过程中的速度」会受到「树莓派机能」和「局域网传输速度（路由器机能/组网方式）」等方面限制。<br>如果追求高性能的NAS建议使用更专业的方案。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>不知道顶配4B效果如何，听说发热严重。<br>感觉真要NAS还得上x86，不管群晖还是黑群。</p><p>我目前「树莓派 3B+」+「Debian Pi Aarch64」+「挂载NTFS格式1T希捷」+「Samba共享文件」这种方案，效果极度有限。<br>别说使用无感了，播放电影完全无法大幅拖动进度条。<br>总之只能算尝个鲜，试图取代本地磁盘是不现实的。</p><p>但话说回来，便捷传输小文件还是比较实用的，WinSCP再方便也不如Win10原生资源管理器方便。<br>而且挂了硬盘的树莓派用起来应用面广了很多，配合Aria2等效果更佳。<br>家用PC很少有人24小时开机吧，电费要钱的。<br>但树莓派可以，所以挂载硬盘可以配合树莓派跑常驻服务，比如：</p><ul><li>刚刚提到的Aria2长期离线下载，只要树莓派开着，它就会一直下</li><li>录像，涉及到视频了，本身的TF卡肯定是不够用的，所以需要挂载硬盘</li><li>其他需要存储容量的服务，比如<code>you-get</code>；打个比方，利用lnmp环境在内网搭建网站，做好安全管理的前提下打开php的<code>system()</code> / <code>exec()</code>等函数，可以实现网页控制下载视频，看上哪个视频网址一发就到硬盘里了体验还是很好的</li></ul><h2 id="添加传感器"><a href="#添加传感器" class="headerlink" title="添加传感器"></a>添加传感器</h2><p>本节需要传感器面包板LED灯等等配件，请自行准备</p><h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><p>已经在写了，咕咕咕</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>「硬件」树莓派食用手册#1 安装64位Debian系统</title>
      <link href="/hardware/RPi-1-Prepare-System/"/>
      <url>/hardware/RPi-1-Prepare-System/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>这块3B+还是当初做毕设的时候买的，答辩完之后就一直吃灰了。<br>最近折腾了一顿nanopi neo2发现貌似还是树莓派玩起来舒服一些。<br>于是决定重新捡起来。<br>Cyanashi 于 2020.3.23</p></blockquote><p>当初装的是官方Raspbian纯净版系统「RASPBIAN STRETCH LITE」，里面不算轮子的话除了毕设项目就是几个网页，稍微回忆了下，确信没有什么值得备份的，直接重装吧。<br>毕设？现在让我去改当初的幼稚代码，不如直接重写还省时省力一些。</p><a id="more"></a><h2 id="选系统"><a href="#选系统" class="headerlink" title="选系统"></a>选系统</h2><p>据我所知目前的官方系统都是32位的，别的型号不太了解，反正树莓派3B+肯定是64位的CPU，嗯……</p><p>我选择「<a href="https://github.com/openfans-community-offical/Debian-Pi-Aarch64" target="_blank" rel="noopener">Debian Pi Aarch64</a>」，民间树莓派爱好者发行的树莓派64位系统。<br>为什么一定要上64位？<br>简单来说32位系统是无法完全发挥64位板子的性能的，具体有兴趣了解可以自行查询资料，此处不再赘述。<br>其实网上流传的树莓派64位系统方案还是挺多的，我选择Debian Pi Aarch64的原因是他们文档写得比较详细，而且开源，而且有中文，而且做了<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#1-4%E9%83%A8%E5%88%86%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C" target="_blank" rel="noopener">测试</a>。</p><h2 id="烧录系统"><a href="#烧录系统" class="headerlink" title="烧录系统"></a>烧录系统</h2><p>如果把树莓派视为一台PC，他的硬盘就是Micro SD Card（即Trans-flash Card，俗称TF卡）。</p><h3 id="存储卡种类科普"><a href="#存储卡种类科普" class="headerlink" title="存储卡种类科普"></a>存储卡种类科普</h3><p>大部分人都见过的存储卡应该有两种，大的和小的。</p><p>小的就是前几年手机常用的存储卡，你管他叫内存卡也好，sd卡也罢，tf卡也行，实际上人家原名Trans-flash Card，后来改名Micro SD Card。<br>大的一般是相机用得多，那个才是真正的SD卡（Secure Digital Memory Card），其实这是一个大类，详细又分为：普通SD卡/SDHC（SD High Capacity）/SDXC（SD eXtended Capacity）/SDUC（SD Ultra Capacity），其实就是容量和读写速度的区别，现在说相机用的SD卡一般默认指SDXC或SDUC。</p><p>虽然不同种类的SD卡直观来看是容量上的区别，如果看本质的话其实是文件系统的区别，普通SD是FAT16（&lt;2G），SDHC是FAT32（&gt;2G），SDXC才是exFAT（&lt;2T），SDUC也是exFAT（&lt;128T）。</p><p>SDUC是SD 7.0标准提出的两个种类之一，另一种是SD Express（读取速度接近1G/s）。<br>SD Express不是横向扩展的种类，而是竖直扩展。<br>它管的是传输速度，跟容量没关系，也就是说有SDHC Express / SDXC Express / SDUC Express。</p><p>另外还有MS卡（Memory Stick，俗称记忆棒，索尼研发的，没错，就是PS那个，童年回忆有了），以及CF卡（Compact Flash，闪迪制定标准的闪存卡）。<br>要考古的话早年还有东芝和三星的SM卡（Smart Media），西门子和闪迪的MMC卡（Multi-Media Card），国内接触的比较少就不继续展开了。</p><h3 id="存储卡速度科普"><a href="#存储卡速度科普" class="headerlink" title="存储卡速度科普"></a>存储卡速度科普</h3><h4 id="速度等级"><a href="#速度等级" class="headerlink" title="速度等级"></a>速度等级</h4><p>即Speed Class，分为四级：Class2（&gt;2M/s）、Class4（&gt;4M/s）、Class6（&gt;6M/s）、Class10（&gt;10M/s）。<br>一般说的Class0是指低于Class2和没标注的。<br>都2020年了，C10以下也好意思拿出来卖？</p><h4 id="超高速速度等级"><a href="#超高速速度等级" class="headerlink" title="超高速速度等级"></a>超高速速度等级</h4><p>分为两级，即UHS-I（UHS Speed Class 1，&gt;10M/s）和UHS-III（UHS Speed Class 3，&gt;30M/s）。<br>有一说一，现在还标着C10卖的卡的感觉都是用早年的最高标准骗外行。<br>U1=C10，你随便找张U3的卡岂不是等于3倍C10？<br>如果非要杠，C10就是Class的最高标准了，1T/s不也是C10？<br>我想说的是，U1也许会标C10好看一点，但凡他能达到29.9M/s他会放着U3不标去标什么C10吗？销售商的宣发和杠这个的人里面肯定有一个傻子，我觉得是销售商。</p><h4 id="视频速度等级"><a href="#视频速度等级" class="headerlink" title="视频速度等级"></a>视频速度等级</h4><p>最吃容量的文件格式是什么？当然是视频啦。<br>音频弟弟就不用说了，目前的技术用数字信号记录音频是有其局限性的，上限（说的就是你，flac）摆在那里，群众对耳放/功放的追求又比较玄学 <del>所以现在还有一大堆黑胶党</del>。<br>而胶片/胶卷党就很难过了，人眼能接受的信息量是有限的，就算你视力5.2，能看清多远的极限就在那里，同样距离拍一张超高分辨率的照片 <del>放大再放大，每一根毛看得都清清楚楚</del> 想必是比人眼要清晰的。<br>况且图像编码技术日新月异，胶片早就打不过数码了，战斗力差距还会随着技术发展越来越大。</p><p>而图像再大也就一张图，视频可是在图像的基础上能无限增长的……<br>现在不是都拍4K视频 <del>120fps那种</del> 了吗，所以出了新的标准。<br>分为五级：V6（6M/s）、V10（10M/s）、V30（30M/s）、V60（60M/s）、V90（90M/s）。</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><img src="https://www.sdcard.org/chs/consumers/choices/speed_class/img/video_speed%20class_01.jpg" alt="来自SD卡官网"><br>看到这里应该对如何选存储卡没有疑问了。<br>我没有跑题，以下内容基于我们已经选好TF卡的前提下。</p><h3 id="装机"><a href="#装机" class="headerlink" title="装机"></a>装机</h3><p>裸板可以跳过这一小节。<br>哎，树莓派是不是机器，是吧，我装树莓派也是装机，没毛病。<br>不过这里要注意一点：</p><p>如果你是第一次玩树莓派，如果你给板子买了壳，不管这个壳看起来插口留了多大，<strong>一定要装完壳再装TF卡</strong>。</p><p>我当初大力出奇迹怼坏了一张64G，一张32G，纯憨批，没什么好说的。</p><h3 id="正式烧录系统"><a href="#正式烧录系统" class="headerlink" title="正式烧录系统"></a>正式烧录系统</h3><p>众所周知，PC装系统 = 板子烧录img到TF卡。<br>如果是刚买的「Micro SD Card 崭新出厂」，建议用「<a href="https://www.sdcard.org/downloads/formatter_4/eula_windows/index.html" target="_blank" rel="noopener">SD Memory Card Formatter</a>」格式化一次。</p><p>准备好系统镜像，现在的<a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener">官方系统</a>有三个版本：</p><ul><li>「<a href="https://downloads.raspberrypi.org/raspbian_full_latest" target="_blank" rel="noopener">Raspbian Buster with desktop and recommended software</a>」桌面版带推荐软件</li><li>「<a href="https://downloads.raspberrypi.org/raspbian_latest" target="_blank" rel="noopener">Raspbian Buster with desktop</a>」桌面版</li><li>「<a href="https://downloads.raspberrypi.org/raspbian_lite_latest" target="_blank" rel="noopener">Raspbian Buster Lite</a>」无桌面版</li></ul><p>小孩子才做选择，我全都不要。前文说了，我选择使用「<a href="https://gitee.com/openfans-community/Debian-Pi-Aarch64/blob/master/README_zh.md#6%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80" target="_blank" rel="noopener">Debian Pi Aarch64</a>」，民间编译的64位Debian。</p><p>确定下好的系统镜像是<code>.img</code>格式，如果是其他格式，包括但不限于<code>.zip</code>/<code>.tar</code>/<code>.xz</code>等等，请把压缩包里的<code>.img</code>系统镜像文件解压出来。<br>友情提醒：「<a href="http://www.7-zip.org/download.html" target="_blank" rel="noopener">7-Zip</a>」可以解压大部分压缩包格式。打个比方，在win上面解压<code>.xz</code>属于基本操作。</p><p>确认过TF卡读写没问题就可以开始烧录了，我喜欢用「<a href="https://www.balena.io/etcher/" target="_blank" rel="noopener">Etcher</a>」（支持全平台win/mac/linux，就一个字，专业），当然你更喜欢轻便小巧的「<a href="https://sourceforge.net/projects/win32diskimager/" target="_blank" rel="noopener">Win32 Disk Imager</a>」（win特供）也行。</p><p>注意烧录系统完成后，windows会重新读取TF卡，一般会发现两个盘，其中一个盘win无法识别，提醒你是否格式化，<strong>绝对不要点格式化</strong>，linux系统的磁盘分区win读不出来怎么想都很合理吧。</p><blockquote><p>如果你烧录的是官方镜像，请注意以下内容：<br>最好去windows可以读的那个（大概只有几十M？）boot盘的<strong>根目录</strong>下新建一个文件，<strong>命名为<code>ssh</code>（没有后缀名）</strong><br>这是因为某次更新后raspbian为了安全起见默认禁用ssh，但可以用这种方式手动打开<br>系统初始化的时候检测到根目录下有名为<code>ssh</code>文件会删除此文件并启用ssh<br>以前（18年）是这样，不太清楚现在还是不是，如果是多此一举也不会出问题  </p></blockquote><p>本文之后的内容都以默认使用Debian Pi Aarch64为准，官方系统仅供参考。</p><h2 id="SSH连接"><a href="#SSH连接" class="headerlink" title="SSH连接"></a>SSH连接</h2><p>准备好ssh连接软件，「<a href="https://www.netsarang.com/zh/Xshell/" target="_blank" rel="noopener">Xshell</a>」都直接自称「业界最强大的SSH客户机」了，但如果你依然愿意使用「<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">PuTTY</a>」的话也没有问题。<br><img src="https://i.loli.net/2020/03/23/Zf3Q7xOAuhkc8MG.png" alt="查看网络属性"><br>首先使用PC查看网络属性，记住名为「以太网」的项，有多个以太网选「描述」是网卡型号那个，截张图不费事吧。<br>Win+X，打开PowerShell，运行<code>ipconfig</code>，如果是连wifi的笔记本，以太网一项的「媒体状态」应该是「媒体已断开连接」。<br>把TF卡插入树莓派（卡槽在板子背面），<strong>用网线连接PC和树莓派</strong>，接通电源。<br>再运行<code>ipconfig</code>，以太网有了吧，有了就对了。<br>Win+X，打开PowerShell，运行<code>arp -a</code>，一般情况会有一个MAC地址b8开头的动态IP，那个就是树莓派IP。<br>如果这个IP用22端口连不进去——什么叫连不进去，用ssh软件连接这个IP无法打开，或者<code>telnet [这个IP] 22</code>提示「无法打开到主机的连接」，就叫连不进去——那么就用路由器的DHCP给它分配一个IP。</p><p>如何用笔记本把网络分享给树莓派呢？<br><img src="https://i.loli.net/2020/03/23/b5aSFV2mD8jzo9k.png" alt="共享网络"><br>打开「控制面板 - 网络和共享中心」，点击「WLAN」-「属性」，切到「共享」标签卡，勾选「允许其他网络用户通过此计算机的 Internet 连接来连接」，如果下面的让你填「家庭网络连接」就填树莓派的网络连接，一般就是以太网。</p><p>打开路由器后台管理页面，新增一个MAC地址b8开头的IP，那个IP就是路由器分给（通过笔记本共享了网络的）树莓派的IP。<br>用ssh软件连接树莓派，初始账户<code>pi</code>/<code>raspberry</code>，如果登录成功就大功告成了。<br>在树莓派终端运行<code>ifconfig wlan0</code>可以看到树莓派当前IP。</p><blockquote><p>推荐用路由器给树莓派分配一个固定IP，只要是近几年的路由器应该都有这个功能，给树莓派MAC绑定一个固定的IP。<br>方便以后使用固定IP连接树莓派，否则每次重启路由器或者树莓派之后，想连接树莓派还要开路由器后台看新的IP是什么，也挺麻烦的。</p></blockquote><h2 id="默认root"><a href="#默认root" class="headerlink" title="默认root"></a>默认root</h2><ol><li>执行<code>sudo -i</code>将当前用户从<code>pi</code>切换到<code>root</code></li><li>执行<code>cd ~</code>进入root工作目录</li><li>（可选）最好执行<code>sudo passwd root</code>设置root密码并<strong>牢记</strong>，忘记密码自行解决</li><li>执行<code>ssh-keygen</code>生成密钥对</li><li>执行<code>cd .ssh</code>切换到ssh元目录</li><li>执行<code>cat id_rsa.pub &gt;&gt; authorized_keys</code>把刚刚生成的密钥对存进白名单</li><li>执行<code>chmod -R 700 ~/.ssh</code>确保ssh元目录权限正确</li><li>执行<code>chmod 600 ~/.ssh/authorized_keys</code>确保白名单文件权限正确</li><li>执行<code>vim /etc/ssh/sshd_config</code>编辑ssh配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## 允许使用ssh-key验证并登录 ##</span><br><span class="line">RSAAuthentication yes</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"></span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">## 上面这行的意思是允许登录root 但禁止直接登录root 即只能用别的账户登录成功后 sudo -i 切换到root ##</span><br><span class="line">## 不用动它 新增下面这行就行 ##</span><br><span class="line">PermitRootLogin yes # 允许root直接登录</span><br></pre></td></tr></table></figure><code>:eq</code>保存并退出</li><li>把<code>~/.ssh/id_rsa</code>（私钥文件）下载到本地PC，直接打开复制粘贴也好，用WinSCP下载也罢，总之把私钥保存到本地就行</li><li>执行<code>systemctl restart sshd</code>或者<code>service sshd restart</code>或者<code>/etc/init.d/ssh restart</code>重启ssh</li><li>回到Xshell，打开「工具」菜单中的用户密钥管理者，导入，把私钥导入Xshell然后登录会话的时候选「Public Key」就OK了</li></ol><p>（可选）配置完成后，为了提高安全性直接禁止密码登录：<br><code>vim /etc/ssh/sshd_config</code>打开配置文件，修改为<code>PasswordAuthentication no</code>保存后重启ssh即可。<br>此外还可以把默认的22端口修改为其他端口进一步提高安全性。</p><h2 id="修改主机名"><a href="#修改主机名" class="headerlink" title="修改主机名"></a>修改主机名</h2><p>自己的树莓派当然有特别的名字，如果还叫<code>raspbian</code>那跟别人家的妖艳贱货有什么区别，对吧。<br><code>vim /etc/hostname</code>把<code>raspbian</code>修改新的名字。<br>如果想把localhost的别名也改了，可以<code>vim /etc/hosts</code>把<code>raspbian</code>修改新的名字。<br><code>reboot</code>重启后生效。</p>]]></content>
      
      
      <categories>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 树莓派 </tag>
            
            <tag> Linux </tag>
            
            <tag> Debian </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
